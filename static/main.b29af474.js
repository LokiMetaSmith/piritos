!function(){function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}var t,o,n,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},s={},a=i.parcelRequire960c;function l(){return 2*Math.floor(2*Math.random())-1}function c(e,t){return t<e&&([e,t]=[t,e]),Math.floor(Math.random()*(t-e+1))+e}function d(e,t=0,o=1){return Math.min(o,Math.max(e,t))}function u(e,t){return t<e&&([e,t]=[t,e]),Math.random()*(t-e)+e}function m(e=2){return Math.floor(Math.random()*e)}function y(e=1,t){null==t&&(t=e);const o=c(e,t);return c(Math.pow(10,o-1),Math.pow(10,o)-1)}function p(e){return Array.isArray(e)?0==e.length?"":e[m(e.length)]:""}function h(e,t,o=0){return(e+="").length>=t?e:new Array(t-e.length+1).join(o)+e}function g(e,t=1e3){let o,n=!1;const i=()=>{null==o?n=!1:(e(...o),o=null,setTimeout(i,t))};return(...r)=>{n?o=r:(e(...r),n=!0,setTimeout(i,t))}}function f(e){return e.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()})).replace(/([^\d])(\d)/g,"$1 $2")}function b(e,t,o){e.push(setTimeout(t,o))}function S(e="24hour",t="showSeconds",o=null){null===o&&(o=new Date);let n=o.getHours();"24hour"!==e&&(n%=12,0==n&&(n=12));let i="";return"showSeconds"===t&&(i=":"+h(o.getSeconds(),2)),h(n,2)+":"+h(o.getMinutes(),2)+i}null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},i.parcelRequire960c=a),a.register("gTwGg",(function(t,o){var n,i;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var r={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)r[t[o]]=e[t[o]]},i=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("ai42B",(function(t,o){var n;e(t.exports,"getBundleURL",(function(){return n}),(function(e){return n=e}));var i={};function r(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var t=i[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return r(e[2])}return"/"}(),i[e]=t),t}})),a.register("gdjxA",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("hCL1a")})),a.register("cRw7W",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("7FeS3")})),a.register("ashtd",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("hLYRc")})),a.register("fShS2",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("ecG2M")})),a.register("lyPys",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("24O77")})),a.register("bOTFL",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("7R7jS")})),a.register("kUZfR",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("2V7ke")})),a.register("8MnPM",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("juaDp")})),a.register("ffGfb",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("bvUO1")})),a.register("4FHTV",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("fmylE")})),a.register("lsNJd",(function(e,t){e.exports=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("5BSke")})),a("gTwGg").register(JSON.parse('{"b1Qpi":"main.b29af474.js","70LIh":"c804.df34a5a3.mp3","eFWUo":"c805.fe04160f.mp3","9rAdf":"c806.7471c895.mp3","65FxP":"c807.7dbb1f94.mp3","eH6We":"c811.193629bd.mp3","lsKPa":"c812.cec97ca8.mp3","4V6jk":"c813.6adaed39.mp3","jKonY":"c815.bf4e6816.mp3","fv4wn":"c816.983554c8.mp3","j730I":"c817a.0dc43017.mp3","cU6oL":"c817b.f15eeefd.mp3","1MxnB":"c824.b5843ba5.mp3","dxqUc":"c826.c92c5ee6.mp3","aMoM0":"c829.ee19f85d.mp3","3T6Sn":"powering_up.ebd58d74.mp3","3mGU8":"powering_down.3cae8d9b.mp3","9jUsU":"redalert1a.02b04c25.mp3","bg8ja":"redalert2a.a124b93c.mp3","hCL1a":"jwst001.42fb05db.jpg","7FeS3":"jwst002.645fdddf.jpg","hLYRc":"jwst003.e80af99c.jpg","ecG2M":"jwst004.b6a031a4.jpg","24O77":"jwst005.6bf06e28.jpg","7R7jS":"jwst006.629ad489.jpg","2V7ke":"jwst007.75ad7f1c.jpg","juaDp":"jwst008.01e9efe8.jpg","bvUO1":"jwst009.5877a861.jpg","fmylE":"jwst010.b4c1e73f.jpg","5BSke":"jwst011.96070044.jpg","cPYTU":"ritosRemotePage.840af751.svg"}'));t=["ALPHA","BETA","GAMMA","DELTA","EPSILON","ZETA","ETA","THETA","IOTA","KAPPA","LAMBDA","MU","NU","XI","OMICRON","PI","RHO","SIGMA","TAU","UPSILON","PHI","CHI","PSI","OMEGA"];o=["WF","WARP","POWER","FIELD","MAG F.","CCR","FACTOR","WARP FT","SHIELD","M/SEC","METERS","NANO SEC","SUBSPACE","RATIO","DILITHIUM","FUSION","PLASMA","K.PASCALS","K.HERTZ","EPS","HALFLIFE","INJECTOR","EJECTION","A.MATTER","CONV.","REACTION","RAMSCOOP","MFG/C","M/ARA","QCRD","WPS","CCF","IPS","PDT","PORT","NACELLE","WARP COILS","WARP CORE","WFC","ODN","PLASMA PTC","ENG.","MEASURE","LEVELS","FUEL LEVEL","EM LEVEL","EXHAUST","RESTORE","QUANTUM","UNLOCK","LOCKED","STORAGE","VENTING","CALIB.","SIF","IMPULSE","ENGINE"];n=["WARP FACTOR","POWER TRANSFER LEVEL","WARP FIELD ESTABLISHED","MAGNETIC FIELD STRENGTH","MAGNETIC FIELD GENERATOR","MAGNETIC CONSTRICTION SEGMENT","ELECTROMAGNETIC FIELD","MICROCOCHRANES MARGIN","SHIELD STRENGTH LEVEL","OPTICAL DATA NETWORK","REACTION RATIO","DILITHIUM RECRYSTALLIZATION","DILITHIUM CRYSTAL ARTICULATION","PRIMARY DEUTERIUM TANKAGE","DEUTERIUM SUPPLY","CONTINUUM DISTORTION FIELD","FUSION REACTION RATE","PLANCK TIME REACTION","POWER TRANSPORT CONDUIT","EPS DISTRIBUTION","PLASMA INJECTOR OFFLINE","PLASMA STREAM WARNING","PLASMA CONTAINMENT","ANTIMATTER CONTAINMENT","CONTAINMENT FIELD","WARP CORE EJECTION SYSTEM","ANTIMATTER GENERATOR","ANTIMATTER STORAGE POD","ANTIMATTER REACANT INJECTOR","MATTER REACANT INJECTOR","CONVERSION FACTOR","REACTION CHAMBER","BUSSARD RAMSCOOP","SUBSPACE FIELD GEOMETRY","SUBSPACE FIELD FOLDS","MATTER/ANTIMATER REACTION","QUANTUM CHARGE REVERSAL","IMPULSE PROPULSION SYSTEM","WARP ENGINE EFFICIENCY","WPS BREACH LEVEL","ELECTRO-PLASMA SYSTEM","STARBOARD NACELLE","PORT NACELLE ONLINE","WARP FIELD COILS","WARP CORE EJECTION","WARP CORE C/F","DILITHIUM DEGRADATION","STRUCTURAL INTEGRITY FIELD","RECRYSTALLIZATION REFINEMENT","REACTION CHAMBER","WARP DRIVE ONLINE","ENERGY FLUX"];const C=[],A={};function v(){for(let e=0;e<4;e++)C[e].d3node.interrupt()}function T(e="resetLocations"){"resetLocations"==e&&w();for(let e=0;e<4;e++)E(e,"systemStarted")}function D(){lr();for(let e=0;e<4;e++)C[e]={d3node:d3.select(`#turbolift${e}`)};w()}function w(){for(let e=0;e<4;e++){const t=x();C[e].currentSection=t.section,C[e].currentX=t.x,C[e].currentY=t.y,C[e].d3node.attr("transform",`translate(${C[e].currentX}, ${C[e].currentY})`)}}function E(e,t=null){"systemStarted"!==t&&(C[e].currentSection=C[e].destSection,C[e].currentX=C[e].destX,C[e].currentY=C[e].destY);const o=x(C[e].currentX,C[e].currentY);C[e].destSection=o.section,C[e].destX=o.x,C[e].destY=o.y;const n=C[e].currentSection,i=C[e].destSection;C[e].junctions=[...A[`section${n}`][`toSection${i}`]],C[e].destReached=!1,C[e].prevJunction=null,C[e].nextJunction=null,L(e)}function x(e=0,t=0){let o,n,i,r=!0;for(;r;)o=p(A.sections),n=p(A[`section${o}`].doorX),i=p(A[`section${o}`].doorY),r=n==e&&i==t;return{section:o,x:n,y:i}}function k(e){C[e].destReached?C[e].d3node.transition().duration(600).attr("opacity",.5).transition().duration(600).attr("opacity",1).transition().delay(c(4e3,8e3)).duration(100).attr("opacity",0).transition().duration(100).attr("opacity",1).transition().duration(100).attr("opacity",0).transition().duration(100).attr("opacity",1).on("end",(()=>{E(e)})):L(e)}function L(e){const t=C[e].d3node.attr("transform");let o,n;if(0!=C[e].junctions.length?(C[e].prevJunction=C[e].nextJunction,C[e].nextJunction=C[e].junctions.shift(),o=A.junctions[C[e].nextJunction].x,n=A.junctions[C[e].nextJunction].y):(C[e].prevJunction=null,C[e].nextJunction=null,o=C[e].destX,n=C[e].destY,C[e].destReached=!0),"j7"!=C[e].prevJunction&&"j8"!=C[e].prevJunction||"j7"!=C[e].nextJunction&&"j8"!=C[e].nextJunction){let i=c(2500,5e3);"j8"!=C[e].prevJunction&&"j9"!=C[e].prevJunction||"j8"!=C[e].nextJunction&&"j9"!=C[e].nextJunction||(i=500),C[e].d3node.transition().delay(c(300,600)).ease(d3.easeCubicInOut).duration(i).attrTween("transform",(function(){return d3.interpolateString(t,`translate(${o},${n})`)})).on("end",(()=>{k(e)}))}else C[e].d3node.transition().delay(300).duration(150).attr("opacity",0).transition().duration(0).attr("transform",`translate(${o},${n})`).transition().duration(150).attr("opacity",1).on("end",(()=>{k(e)}))}A.sections=[1,2,3,4,5,6,7,8],A.section1={doorX:[2577,2790,2969],doorY:[133],toSection1:[],toSection2:["j1"],toSection3:["j1","j2"],toSection4:["j1","j2","j3"],toSection5:["j1","j2","j3","j4"],toSection6:["j1","j2","j3","j5"],toSection7:["j1","j2","j3","j5","j6","j7","j8","j9","j10"],toSection8:["j1","j2","j3","j5","j6","j7","j8","j9","j10","j11"]},A.section2={doorX:[2539],doorY:[14,34,54,74,94,114,134,154,174,194,214,233],toSection1:["j1"],toSection2:[],toSection3:["j2"],toSection4:["j2","j3"],toSection5:["j2","j3","j4"],toSection6:["j2","j3","j5"],toSection7:["j2","j3","j5","j6","j7","j8","j9","j10"],toSection8:["j2","j3","j5","j6","j7","j8","j9","j10","j11"]},A.section3={doorX:[2246,2350,2450,2577,2702],doorY:[233],toSection1:["j2","j1"],toSection2:["j2"],toSection3:[],toSection4:["j3"],toSection5:["j3","j4"],toSection6:["j3","j5"],toSection7:["j3","j5","j6","j7","j8","j9","j10"],toSection8:["j3","j5","j6","j7","j8","j9","j10","j11"]},A.section4={doorX:[2223],doorY:[54,74,94,114,134,154,174,194,214,233],toSection1:["j3","j2","j1"],toSection2:["j3","j2"],toSection3:["j3"],toSection4:[],toSection5:["j4"],toSection6:["j3","j5"],toSection7:["j3","j5","j6","j7","j8","j9","j10"],toSection8:["j3","j5","j6","j7","j8","j9","j10","j11"]},A.section5={doorX:[2223,2033,1858],doorY:[134],toSection1:["j4","j3","j2","j1"],toSection2:["j4","j3","j2"],toSection3:["j4","j3"],toSection4:["j4"],toSection5:[],toSection6:["j4","j3","j5"],toSection7:["j4","j3","j5","j6","j7","j8","j9","j10"],toSection8:["j4","j3","j5","j6","j7","j8","j9","j10","j11"]},A.section6={doorX:[906,1171,1446,1645,1843,1923],doorY:[616],toSection1:["j5","j3","j2","j1"],toSection2:["j5","j3","j2"],toSection3:["j5","j3"],toSection4:["j5","j3"],toSection5:["j5","j3","j4"],toSection6:[],toSection7:["j6","j7","j8","j9","j10"],toSection8:["j6","j7","j8","j9","j10","j11"]},A.section7={doorX:[963,1087,1126],doorY:[480],toSection1:["j10","j9","j8","j7","j6","j5","j3","j2","j1"],toSection2:["j10","j9","j8","j7","j6","j5","j3","j2"],toSection3:["j10","j9","j8","j7","j6","j5","j3"],toSection4:["j10","j9","j8","j7","j6","j5","j3"],toSection5:["j10","j9","j8","j7","j6","j5","j3","j4"],toSection6:["j10","j9","j8","j7","j6"],toSection7:[],toSection8:["j11"]},A.section8={doorX:[1126],doorY:[368,398,418,444,462],toSection1:["j11","j10","j9","j8","j7","j6","j5","j3","j2","j1"],toSection2:["j11","j10","j9","j8","j7","j6","j5","j3","j2"],toSection3:["j11","j10","j9","j8","j7","j6","j5","j3"],toSection4:["j11","j10","j9","j8","j7","j6","j5","j3"],toSection5:["j11","j10","j9","j8","j7","j6","j5","j3","j4"],toSection6:["j11","j10","j9","j8","j7","j6"],toSection7:["j11"],toSection8:[]},A.junctions={j1:{x:2539,y:134},j2:{x:2539,y:233},j3:{x:2223,y:233},j4:{x:2223,y:134},j5:{x:1895,y:616},j6:{x:889,y:616},j7:{x:889,y:675},j8:{x:889,y:544},j9:{x:889,y:538},j10:{x:936,y:480},j11:{x:1126,y:480}};var B;B=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("70LIh");var I;I=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("eFWUo");var q;q=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("9rAdf");var R;R=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("65FxP");var F;F=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("eH6We");var M;M=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("lsKPa");var N;N=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("4V6jk");var j;j=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("jKonY");var $;$=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("fv4wn");var P;P=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("j730I");var O;O=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("cU6oL");var U;U=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("1MxnB");var H;H=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("dxqUc");var _;_=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("aMoM0");var G;G=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("3T6Sn");var X;X=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("3mGU8");var V;V=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("9jUsU");var W;function Y(e){const t=lr();if("running"!=t.sounds.audioCtx.state)t.sounds.audioCtx.resume(),t.sounds.audioMainSwitch=!0;else{if(!0===e){if(t.sounds.audioMainSwitch)return}else if(!1===e&&!t.sounds.audioMainSwitch)return;t.sounds.audioMainSwitch=!t.sounds.audioMainSwitch}t.sounds.audioMainSwitch?(z(),"init"==document.documentElement.dataset.pageState?K("shortRandomBeep",0,0,0,.65):K(p(["beepX1Up","beepX1Upper","beepX1Down","beepX1Downer"]),0,0,0,.4),Oi("Audio is now enabled")):(!function(){const e=lr();delete document.documentElement.dataset.audio,e.sounds.masterGainNode.gain.value=0,e.userSessionSettings.audioEnabled=!1}(),Oi("Audio has been disabled"))}function z(){const e=lr();document.documentElement.dataset.audio="",e.sounds.masterGainNode.gain.value=1,e.userSessionSettings.audioEnabled=!0}function Z(){return lr().sounds.sfxMasterGainNode.gain.value}function Q(e){const t=lr();t.sounds.sfxMasterGainNode.gain.value=e,t.userSessionSettings.audioFxLevel=e}function J(e,t=0,o=0,n,i=1,r=1){const s=lr();"suspended"===s.sounds.audioCtx.state&&s.sounds.audioCtx.resume();const a=s.sounds.audioCtx.createBufferSource();a.buffer=e;const l=s.sounds.audioCtx.createGain();return a.connect(l),l.connect(s.sounds.sfxMasterGainNode),l.gain.value=i,a.playbackRate.value=r,a.start(s.sounds.audioCtx.currentTime+t,o,n),a}function K(e,t=0,o=0,n,i=1,r=1){const s=lr();if(0==n&&(n=void 0),"shortRandomBeep"==e){J(s.sounds.clips[p(["c811","c812","c813","c829"])],t,o,n,i,u(.93,1.1)*r)}else if("shortBeep"==e){const e=m(7);if(1==e){J(s.sounds.clips.c811,.015,.155,n,i,r)}else if(2==e){J(s.sounds.clips.c812,.015,.143,n,i,r)}else if(3==e){J(s.sounds.clips.c812,.063,.146,n,i,r)}else if(4==e){J(s.sounds.clips.c813,.172,0,n,i,r)}else if(5==e){J(s.sounds.clips.c824,0,.266,n,i,r)}else if(6==e){J(s.sounds.clips.c829,0,.172,n,i,r)}else{J(s.sounds.clips.c829,0,.115,n,i,r)}}else if("beepX1Up"==e){J(s.sounds.clips.c813,t,.08,.06,i,u(1.1,1.3))}else if("beepX1Upper"==e){J(s.sounds.clips.c813,t,.08,.06,i,u(1.2,1.5))}else if("beepX1Down"==e){J(s.sounds.clips.c813,t,.08,.06,i,u(.65,.93))}else if("beepX1Downer"==e){J(s.sounds.clips.c813,t,.08,.06,i,u(.5,.8))}else if("beepX2Up"==e){J(s.sounds.clips.c813,t,.08,.15,i,u(1.1,1.3))}else if("beepX2Upper"==e){J(s.sounds.clips.c813,t,.08,.15,i,u(1.2,1.5))}else if("beepX2Down"==e){J(s.sounds.clips.c813,t,.08,.15,i,u(.85,.93))}else if("beepX2Downer"==e){J(s.sounds.clips.c813,t,.08,.15,i,u(.5,.8))}else if("beepX3Up"==e)J(s.sounds.clips.c813,t,.08,.06,i,r*u(.95,1.1)),J(s.sounds.clips.c813,t+u(.09,.3),.08,.15,i*u(.7,1),r*u(1.1,1.3));else if("beepX3Upper"==e)J(s.sounds.clips.c813,t,.08,.06,i,r*u(1.1,1.3)),J(s.sounds.clips.c813,t+u(.09,.3),.08,.15,i*u(.7,1),r*u(1.2,1.5));else if("beepX3Down"==e)J(s.sounds.clips.c813,t,.08,.06,i,r*u(.93,1)),J(s.sounds.clips.c813,t+.15,.08,.15,.7*i,r*u(.85,.93));else if("beepX3Downer"==e)J(s.sounds.clips.c813,t,.08,.06,i,r*u(.85,.93)),J(s.sounds.clips.c813,t+.15,.08,.15,.7*i,r*u(.5,.8));else if("negative"==e){J(s.sounds.clips.c804,t,o,n,i,p([.9,1,u(.85,1)])*r)}else if("affirmative"==e){J(s.sounds.clips.c805,t,o,n,i,p([.93,1.2,u(.95,1)])*r)}else if("awaiting"==e){J(s.sounds.clips.c807,t,o,n,i,p([.93,1.2,u(.95,1)])*r)}else if("deployed"==e){J(s.sounds.clips.c816,t,o,n,i,p([.95,1,u(.9,1.2)])*r)}else if("executing"==e){J(s.sounds.clips.c817a,t,o,n,i,p([.93,1.2,u(.95,1)])*r)}else if("processing"==e){J(s.sounds.clips.c826,t,o,n,i,p([.93,1,u(.8,1.2)])*r)}else if("warningLow"==e){J(s.sounds.clips.c811,t,o,n,i,p([.75,.85])*r)}else if("warningHigh"==e){J(s.sounds.clips.c812,t,o,n,i,p([.75,.85])*r)}else if("warningLong"==e){J(s.sounds.clips.c817b,t,o,n,i,p([.88,.94,1])*r)}else if("notification"==e){J(s.sounds.clips[p(["c813","c829"])],t,o,n,i,p([.8,.85])*r)}else if("exitTask"==e){J(s.sounds.clips.c815,t,o,n,i,p([1,u(.95,1.1)])*r)}else if("lowProfileTask"==e){J(s.sounds.clips.c806,t,o,n,i,p([1,u(.95,1.1)])*r)}else if("longTask"==e){J(s.sounds.clips.c806,t,o,n,i,p([.93,1])*r)}else if("longTaskLow"==e){J(s.sounds.clips.c806,t,o,n,i,u(.78,.85)*r)}else if("powerUp"==e){J(s.sounds.clips.p001,t,o,n,i,r)}else if("powerDown"==e){J(s.sounds.clips.p002,t,o,n,i,r)}else if("startRedAlert"==e){null!=s.sounds.redAlertTrackNode&&K("stopRedAlert"),K("warningLong"),K("executing",1);const e=s.sounds.clips[s.sounds.redAlertTrackNames[s.sounds.redAlertTrackNameCurrentIndex]];s.sounds.redAlertTrackNameCurrentIndex=(s.sounds.redAlertTrackNameCurrentIndex+1)%s.sounds.redAlertTrackNames.length,s.sounds.redAlertTrackNode=J(e,2.3,o,n,i,r),s.sounds.redAlertTrackNode.loop=!0,s.sounds.redAlertTrackNode.loopEnd=2.9}else if("stopRedAlert"==e)s.sounds.redAlertTrackNode.stop(),s.sounds.redAlertTrackNode=null,K("exitTask",.25,0,0,.6,.9);else if(e in s.sounds.clips){J(s.sounds.clips[e],t,o,n,i,r)}}function ee(){const e=lr();e.shipRef.shipD3=d3.select("#msdContainer svg #ship"),e.shipRef.zoomInBoundaryBBox=e.shipRef.shipD3.select("#zoomInBoundary").node().getBBox(),e.shipRef.zoomInBoundaryCX=e.shipRef.zoomInBoundaryBBox.x+.5*e.shipRef.zoomInBoundaryBBox.width,e.shipRef.zoomInBoundaryCY=e.shipRef.zoomInBoundaryBBox.y+.5*e.shipRef.zoomInBoundaryBBox.height,e.shipRef.ttA=`translate(${e.shipRef.zoomInBoundaryCX}px, ${e.shipRef.zoomInBoundaryCY}px)`,e.shipRef.ttB=`translate(-${e.shipRef.zoomInBoundaryCX}px, -${e.shipRef.zoomInBoundaryCY}px)`,Ji(e.shipRef.shipD3.node()),e.shipContentDom.querySelectorAll('#hitareas > *[id$="_zoomTo"]').forEach((t=>{e.shipHitareaZoomToBBox[t.getAttribute("id").replace("_zoomTo","")]=t.getBBox(),t.remove()})),e.shipContentDom.querySelector("#hitareas").onpointerdown=e=>{0==e.target.getAttribute("id").indexOf("hit_")&&!1===Ie(e.target)&&re(e.target)};const t=e.shipContentDom.querySelector("#wires");Ji(t),e.shipRef.specialZoomInBoundaryBBox=t.getBBox(),e.shipRef.specialZoomInBoundaryCX=t.dataset.transformOriginX,e.shipRef.specialZoomInBoundaryCY=t.dataset.transformOriginY,e.shipRef.specialZoomIn_ttA=`translate(${e.shipRef.specialZoomInBoundaryCX}px, ${e.shipRef.specialZoomInBoundaryCY}px)`,e.shipRef.specialZoomIn_ttB=`translate(-${e.shipRef.specialZoomInBoundaryCX}px, -${e.shipRef.specialZoomInBoundaryCY}px)`,e.shipContentDom.querySelector("#wcHatchHitspot").onpointerdown=function(){de()}}function te(e){return"hit_saucerModule"===e||"hit_starboardNacelle"===e||"hit_engineeringHull"===e}function oe(){const e=lr().shipRef.shipD3.node().dataset.zoomObj;if(void 0!==e&&Math.random()<.2)return void ne();if(!te(e)&&Math.random()<.15)return void re(p(["hit_engineeringHull","hit_starboardNacelle","hit_saucerModule"]));const t=document.querySelectorAll("#msdContainer svg #ship #hitareas > *");let o=m(t.length);t[o].getAttribute("id")==e&&(o=(o+1)%t.length);re(t[o])}function ne(){const e=lr(),t=e.shipRef.shipD3.node().dataset.zoomObj;if(void 0!==t){re(te(t)?t:document.querySelector(`#msdContainer svg #ship #hitareas #${t}`))}else{K("longTaskLow",0,0,0,.3),Math.random()<.5?K("shortRandomBeep",.5,0,0,.25):K(`beepX${c(1,3)}${p(["Down","Downer","Up","Upper"])}`,.5,0,0,.2);const t=document.querySelectorAll("#msdContainer svg #outlines > path"),o=p([0,1,2,4,6,10,16,20]),n=p([0,.3,.6,1,1,1,1]),i=p(e.nonDarkColorCssVarNames),r=document.querySelector("#msdContainer svg #contentShip"),s=`translate(${r.dataset.transformOriginX}px, ${r.dataset.transformOriginY}px)`,a=`translate(-${r.dataset.transformOriginX}px, -${r.dataset.transformOriginY}px)`;d3.select(r).transition().duration(600).ease(d3.easeCubicOut).style("transform",`${s} scale(1.037) ${a}`).on("end",(()=>{tr(document.querySelector("#msdContainer svg #ship #outlines")),t.forEach((e=>{e.setAttribute("stroke-width",o),e.setAttribute("stroke-opacity",n),e.setAttribute("stroke",`var(--${i})`)}))})).transition().delay(500).ease(d3.easeCubicIn).duration(1200).style("transform",`${s} scale(1) ${a}`).on("end",(()=>{t.forEach((e=>{e.setAttribute("stroke-width",e.getAttribute("data-stroke-width")),e.setAttribute("stroke",e.getAttribute("data-stroke")),e.removeAttribute("stroke-opacity")}))}))}}function ie(){const e=lr(),t=e.shipRef.shipD3;t.interrupt(),t.style("transform",`${e.shipRef.ttA} scale(1) ${e.shipRef.ttB}`),t.node().dataset.zoomScale=1,delete t.node().dataset.zoomObj,delete document.documentElement.dataset.zooming,t.classed("zoomOut",!1),e.shipZoomMode=!1,delete document.documentElement.dataset.shipZoomMode,delete document.documentElement.dataset.shipZoomObj}function re(e){const t=lr(),o=t.shipRef.shipD3,n=te(e),i=n?e:e.getAttribute("id"),r=n?t.shipRef.specialZoomInBoundaryBBox:t.shipRef.zoomInBoundaryBBox,s=n?t.shipRef.specialZoomInBoundaryCX:t.shipRef.zoomInBoundaryCX,a=n?t.shipRef.specialZoomInBoundaryCY:t.shipRef.zoomInBoundaryCY,l=n?{ttA:t.shipRef.specialZoomIn_ttA,ttB:t.shipRef.specialZoomIn_ttB}:{ttA:t.shipRef.ttA,ttB:t.shipRef.ttB};let d;d=i in t.shipHitareaZoomToBBox?t.shipHitareaZoomToBBox[i]:e.getBBox();let u=1100;const m="zoomObj"in o.node().dataset?o.node().dataset.zoomObj:void 0;var y;const h=null!==(y=o.node().dataset.zoomScale)&&void 0!==y?y:1;var g;const b=null!==(g=o.node().dataset.zoomTranslate)&&void 0!==g?g:"0,0";if(me("forZooming"),delete document.documentElement.dataset.shipZoomObj,m==i)return o.node().dataset.zoomScale=1,delete o.node().dataset.zoomObj,document.documentElement.dataset.zooming="",K(p(["beepX1Upper","beepX2Down","beepX3Downer"]),0,0,0,.3),o.style("transform",`${l.ttA} scale(1) translate(${b}) ${l.ttB}`).classed("zoomOut",!0).transition().delay(520).duration(1).on("start",(()=>{delete document.documentElement.dataset.zooming,o.style("transform",`${l.ttA} scale(1) ${l.ttB}`),K(p(["exitTask","negative"]),.2,0,0,.25,.9)})).on("end cancel interrupt",(()=>{delete document.documentElement.dataset.zooming,o.classed("zoomOut",!1)})).transition().delay(1200).duration(0).on("start",(()=>{ue("forZooming"),"show"==o.node().dataset.showLabelsOnZoomOut&&we("faster"),t.shipZoomMode=!1,delete document.documentElement.dataset.shipZoomMode})),void ir();{o.node().dataset.zoomObj=i,null!=m?u=400:(o.node().dataset.showLabelsOnZoomOut="showing"==document.querySelector("#msdLabels").dataset.visible?"show":"no","delay"==o.node().dataset.labelsHideDelay?(o.node().dataset.labelsHideDelay=null,setTimeout((()=>{Ee("skipAnimation")}),1e3)):Ee("skipAnimation"));let e=f(i.replace(/[^_]*_(.*)/g,"$1")).toUpperCase();e=e.replace("MAIN STAGE","MAIN-STAGE"),e=e.replace("CAPTAINS YACHT","CAPTAIN’S YACHT"),e=e.replace("PTC EPS CONDUITS","PTC / EPS CONDUITS"),ir(e),o.interrupt(),t.shipZoomMode=!0,document.documentElement.dataset.shipZoomMode=""}const S=`${s-(d.x+.5*d.width)}px, ${a-(d.y+.5*d.height)}px`,C=Math.min(r.width/d.width,r.height/d.height);o.style("transform",`${l.ttA} scale(${h}) translate(${S}) ${l.ttB}`),o.node().dataset.zoomTranslate=S,K(`beepX${c(1,3)}${p(["Down","Downer","Up","Upper"])}`,0,0,0,.45),Math.random()<.5&&null==m&&K(`beepX${c(1,3)}${p(["Down","Downer","Up","Upper"])}`,.25,0,0,.15),o.transition().delay(u).duration(700).on("start",(()=>{if(document.documentElement.dataset.zooming="",o.style("transform",`${l.ttA} scale(${C}) translate(${S}) ${l.ttB}`),o.node().dataset.zoomScale=C,null==m){const e=Math.random();e<.5?K(p(["processing","executing"]),0,.1,.4,.3,.8):e<.75?K("longTask",0,.8,0,.3,1.2):K("notification",0,0,0,.3)}})).on("end",(()=>{null!=m&&K(`beepX${p(["1","1","2"])}${p(["Down","Downer","Up","Upper"])}`,0,0,0,.4)})).transition().delay(420).duration(0).on("start",(()=>{delete document.documentElement.dataset.zooming,document.documentElement.dataset.shipZoomObj=i.replace("hit_",""),ue("forZooming")}))}function se(e,t=0,o=1,n="short",i=!0){if(0==o)return;const r=lr();let s=t;i||(s="short"==n?c(200,600):"number"==typeof n?Math.floor(u(.7*n,1.3*n)):c(800,1200)),e.transition("randomColor").delay(s).duration(1).attr("fill",`var(--${p(r.allColorCssVarNames)})`).on("end",(()=>{se(e,0,o>0?o-1:o,n,!1)}))}function ae(e){e.interrupt("randomColor")}function le(e,t=0,o=1,n="short",i=!0){if(0==o)return;let r=t;i?e.attr("opacity",1):r="short"==n?c(200,600):"number"==typeof n?Math.floor(u(.7*n,1.3*n)):c(2e3,3e3),e.transition("blinking").delay(r).duration(500).attr("opacity",0).on("cancel interrupt",(()=>{e.attr("opacity",1)})).transition("blinking").delay(250).duration(1e3).attr("opacity",1).on("cancel interrupt",(()=>{e.attr("opacity",1)})).on("end",(()=>{le(e,0,o>0?o-1:o,n,!1)}))}function ce(e){e.interrupt("blinking")}function de(){const e=lr(),t=e.shipContentDom.querySelector("#warpCore");if("ejectionInProgress"in t.dataset)return void Oi(p(["Warp Core Ejection in Progress already","Awaiting for a new warp core","Ejection system is currently offline","warp core status: ejected","Warp Core is not ready to be ejected again","seriously, the core is not ready","Move away from the warp core ejection hatch"]));t.dataset.ejectionInProgress="",Oi("Warp Core Ejection in Progress","timePrefix");const o=t.querySelector("#wc_matter"),n=t.querySelector("#wc_antimatter"),i=e.shipContentDom.querySelector("#msdContainer svg #ship #wcHatchL"),r=e.shipContentDom.querySelector("#msdContainer svg #ship #wcHatchR"),s=d3.selectAll([i,r]),a=d3.select(e.svg2.querySelector("#miniWarpCore"));d3.select(t).style("opacity",3).transition().duration(500).on("start",(()=>{K("warningLong",0,.4,0,.6),tr(t,"blink3")})).on("end",(()=>{o.style.fill="var(--secondary)",n.style.fill="var(--secondary)",K("notification",.25),s.transition().duration(600).attr("transform",((e,t)=>`translate(${30*(2*t-1)} 0)`))})).transition().delay(1e3).duration(3e3).attr("transform","translate(0 600)").style("opacity",0).on("start",(()=>{K("negative",.2,0,0,1,.85),a.style("opacity",3).style("display",null).transition().duration(3e3).attr("transform","translate(0 145)").style("opacity",0),setTimeout((()=>{Oi("Warp Core Ejected","timePrefix")}),1200)})).on("end",(()=>{t.setAttribute("transform","translate(0 250)")})).transition().delay(1e3).duration(6e3).ease(d3.easeCubicOut).on("start",(()=>{K("awaiting",.3,0,0,.5,.75),a.attr("transform","translate(0 90)").transition().duration(6e3).ease(d3.easeCubicOut).attr("transform","translate(0 0)").style("opacity",3).on("end",(function(){this.style.display="none"})),setTimeout((()=>{K("exitTask",0,0,0,.7),s.transition().delay(500).duration(1e3).ease(d3.easeCubicInOut).attr("transform","translate(0 0)").on("start",((e,t)=>{0==t&&K("beepX2Downer",.4,0,0,.3)}))}),4500)})).attr("transform","translate(0 0)").style("opacity",2).on("end",(()=>{K("powerUp",0,.3,0,.7)})).transition().delay(600).duration(250).on("start",(()=>{tr(t,"blink1"),K("beepX3Upper",0,0,0,.3)})).on("end",(function(){o.style.fill=null,n.style.fill=null})).transition().delay(500).duration(0).on("start",(()=>{Oi(p(["Warp Core replaced","Warp Core Reinsertion Complete"]),"timePrefix"),delete t.dataset.ejectionInProgress}))}function ue(e=null){const t="forZooming"==e;delete document.documentElement.dataset.aniZooming,t||(T(),ge(),fe(),function(){const e=lr(),t=e.shipContentDom.querySelector('[id^="shuttlecraft1Fly"]').querySelector("animateMotion");if(null===t)return void function(e=null){const t=lr(),o=t.shipContentDom.querySelector('[id^="shuttlecraft1Fly"]'),n=t.shipContentDom.querySelector('[id^="shuttlecraft1Path"]'),i=document.createElementNS("http://www.w3.org/2000/svg","animateMotion");"startFlying"===e?i.setAttribute("dur","30s"):i.setAttribute("dur","0");i.setAttribute("begin",`-${c(0,30)}s`),i.setAttribute("repeatCount","indefinite"),i.setAttribute("path",n.getAttribute("d")),o.appendChild(i);const r=o.getBBox();o.style.transform=`translate(-${r.x+.5*r.width}px, -${r.y+.5*r.height}px)`,n.setAttribute("stroke","none"),o.dataset.init=""}("startFlying");t.setAttribute("dur","30s")}(),be("init")),Se(!0),function(){const e=d3.select("#msdContainer svg #plasmaStream"),t=d3.select("#msdContainer svg #cylinderFront");if(e.classed("active",!0),null==e.attr("data-init")){e.attr("data-init","");const o=e.node().getBBox();e.attr("transform-origin",`${o.x+.5*o.width} ${o.y+.5*o.height}`),e.selectAll("line").attr("stroke-dashoffset",(()=>c(-100,0))).style("animation-duration",(()=>u(3,6)+"s")),t.attr("opacity",.5)}const o=function(){e.attr("opacity",1).attr("visibility","visible").attr("transform","scale(.1 .2)").transition().duration(400).ease(d3.easeCubicOut).attr("transform","scale(1 1)").transition().delay(5e3).duration(1500).ease(d3.easeCubicIn).attr("transform","translate(-242) scale(6 .3)").on("start",(()=>{t.transition().delay(1200).duration(300).attr("opacity",1).on("cancel interrupt",(()=>{t.attr("opacity",1)})).transition().delay(c(800,1600)).duration(800).attr("opacity",.5).on("end",(()=>{o()}))})).on("end",(()=>{e.attr("transform",null),e.attr("opacity",0).style("visibility","visible")}))};o()}(),se(d3.select("#msdContainer svg #magFieldGen"),c(3500,7e3),-1,5e3),function(){const e=d3.select("#msdContainer svg #bussardProcessor");le(e,c(5e3,7e3),-1,5e3),se(e,c(3500,7e3),-1,13e3)}(),function(){const e=d3.select("#msdContainer svg #contentShip #internals");se(e.select("#shuttle1 path"),c(3500,7e3),-1,13e3),se(e.select("#bay2shuttle1 path"),c(5e3,11e3),-1,13e3),se(e.select("#bay2shuttle2 path"),c(2e3,5e3),-1,9e3),se(e.select("#torpedoLauncher"),c(2e3,5e3),-1,9e3),se(e.select("#bridge"),c(2e3,5e3),-1,9e3),se(e.select("#transporterBase"),c(2e3,5e3),-1,9e3),se(e.select("#transporterMid"),c(2e3,5e3),-1,9e3),le(e.select("#deuteriumTank1"),c(2e3,8e3),-1,11e3),le(e.select("#deuteriumTank2"),c(2e3,8e3),-1,11e3),le(e.select("#antimatterStorage"),c(4e3,5e3),-1,12e3),le(e.select("#tractorBeamMainForward"),c(2e3,8e3),-1,8e3),le(e.select("#tractorBeamMainAft"),c(2e3,8e3),-1,8e3),le(e.select("#tractorBeam2ndHull"),c(2e3,8e3),-1,8e3),le(e.select("#tardis"),c(2e3,8e3),-1,8e3)}(),pe()}function me(e=null){const t="forZooming"==e;t&&(document.documentElement.dataset.aniZooming=""),t||(v(),function(){const e=lr().shipContentDom.querySelector("#holodeck"),t=Number(e.dataset.timerId);isNaN(t)||clearTimeout(t);d3.selectAll("#msdContainer svg #holodeck *").interrupt(),he()}(),function(){const e=lr();d3.select(e.shipContentDom.querySelector("#transporterSubject1")).interrupt()}(),function(){const e=lr().shipContentDom.querySelector('[id^="shuttlecraft1Fly"] animateMotion');null!==e&&e.setAttribute("dur","0")}(),function(){const e=d3.select("#msdContainer svg #shuttleOnLift"),t=d3.select("#msdContainer svg #shuttleLift"),o=Number(t.node().dataset.timerId);isNaN(o)||clearTimeout(o);delete t.node().dataset.timerId,e.interrupt(),t.interrupt()}()),Se(!1),function(){const e=d3.select("#msdContainer svg #plasmaStream"),t=d3.select("#msdContainer svg #cylinderFront");e.interrupt(),t.interrupt(),e.classed("active",!1)}(),ae(d3.select("#msdContainer svg #magFieldGen")),function(){const e=d3.select("#msdContainer svg #bussardProcessor");ce(e),ae(e)}(),function(){const e=d3.select("#msdContainer svg #contentShip #internals");ae(e.select("#shuttle1 path")),ae(e.select("#bay2shuttle1 path")),ae(e.select("#bay2shuttle2 path")),ae(e.select("#torpedoLauncher")),ae(e.select("#bridge")),ae(e.select("#transporterBase")),ae(e.select("#transporterMid")),ce(e.select("#deuteriumTank1")),ce(e.select("#deuteriumTank2")),ce(e.select("#antimatterStorage")),ce(e.select("#tractorBeamMainForward")),ce(e.select("#tractorBeamMainAft")),ce(e.select("#tractorBeam2ndHull")),ce(e.select("#tardis"))}(),ye()}function ye(){lr().svg1.pauseAnimations()}function pe(){lr().svg1.unpauseAnimations()}function he(){const e=lr().shipContentDom.querySelector("#holodeck");e.querySelector("#holodeckArch").setAttribute("opacity",1),e.querySelector("#holodeckGrid").setAttribute("opacity",1),e.querySelector("#holoDino").setAttribute("opacity",0),e.querySelector("#holoParis").setAttribute("opacity",0),e.querySelector("#badgey").setAttribute("opacity",0),e.querySelector("#holoMovie").setAttribute("opacity",0),e.querySelector("#holoMovie #seqInit").style.transition="opacity 400ms",e.querySelectorAll('#holoMovie [id^="seq"]').forEach((e=>{e.setAttribute("opacity",0)}))}function ge(){const e=lr().shipContentDom.querySelector("#holodeck"),t=d3.select(e);t.selectAll("*").interrupt();const o=t.select("#holodeckArch"),n=t.select("#holodeckGrid"),i=["holoDino","holoParis","badgey","holoMovie"];let r=m(i.length);parseInt(e.dataset.previousTitleIndex)==r&&(r=(r+1)%i.length),e.dataset.previousTitleIndex=r;const s=i[r],a=d3.select(`#msdContainer svg #${s}`),l="holoMovie"==s;o.transition().duration(910).attr("opacity",0).on("end",(function(){l&&(a.attr("opacity",1),e.querySelector("#seqInit").setAttribute("opacity",1)),n.transition().delay(310).duration(970).attr("opacity",0),a.transition().delay(0).duration(710).attr("opacity",1).on("start",(()=>{l&&a.selectAll("[id^=seq_]").style("transition",(()=>`opacity ${p([300,700])}ms ease ${100*c(0,30)}ms`)).attr("opacity",1)})).on("end",(function(){const t=l?3500:0;n.transition().delay(4e3+t).duration(900).attr("opacity",.6).on("end",(()=>{a.transition().delay(300).duration(650).attr("opacity",0).on("start",(()=>{l&&a.selectAll("[id^=seq]").attr("opacity",0)})).on("end",(()=>{o.transition().delay(270).duration(600).attr("opacity",1).on("end",(()=>{e.dataset.timerId=setTimeout((()=>{ge()}),u(5800,9500))}))}))}))}))}))}function fe(e=null){const t=lr(),o=d3.select(t.shipContentDom.querySelector("#transporterAni1")),n=d3.select(t.shipContentDom.querySelector("#transporterSubject1")),i=d3.select(t.shipContentDom.querySelector("#transporterBeam1"));d3.selectAll("#msdContainer svg #transporterBeam1 line").style("stroke-dashoffset",(()=>u(-10,-45))).style("animation-duration",(()=>u(3.5,4.5)+"s"));const r=()=>{i.classed("beaming",!1),setTimeout((()=>{i.classed("beaming",!0)}),1)};i.attr("opacity",0),n.transition().delay(c(6e3,12e3)).duration(0).on("start",(()=>{r()})).transition().delay(2e3).duration(0).attr("opacity",0).transition().delay(c(6e3,12e3)).duration(0).on("start",(()=>{o.attr("transform",Math.random()<.5?null:"translate(15 0)"),r()})).transition().delay(1e3).duration(0).attr("opacity",1).on("end",(()=>{fe()}))}function be(e=null){const t=d3.select("#msdContainer svg #shuttleOnLift"),o=d3.select("#msdContainer svg #shuttleLift");"init"==e&&(t.attr("transform","translate(0 44)"),o.attr("transform","translate(0 44)"));const n=c(3e3,6e3),i=c(3e3,5e3);o.transition().delay(c(1e3,2e3)).duration(n).ease(d3.easeCubicInOut).attr("transform","translate(0 0)").on("start",(()=>{t.transition().duration(n).ease(d3.easeCubicInOut).attr("transform","translate(0 0)")})).transition().delay(c(200,500)).duration(c(1e3,4e3)).ease(d3.easeCubicInOut).attr("transform","translate(0 44)").transition().delay(c(2500,6e3)).duration(c(1e3,4e3)).ease(d3.easeCubicInOut).attr("transform","translate(0 0)").transition().delay(c(300,700)).duration(i).ease(d3.easeCubicInOut).attr("transform","translate(0 44)").on("start",(()=>{t.transition().duration(i).ease(d3.easeCubicInOut).attr("transform","translate(0 44)").on("end",(()=>{se(t.select("path"),400,4)}))})).on("end",(()=>{o.node().dataset.timerId=setTimeout((()=>{be()}),u(2500,6e3))}))}function Se(e){const t=document.getElementById("nacelleDisk"),o=document.getElementById("nacelleDiskMarker");t.classList.toggle("active",e),o.classList.toggle("active",e)}let Ce,Ae,ve;function Te(){Ae.forEach((e=>{const t=e.querySelector("path"),o=e.querySelector('[id^="dot"]'),n=e.querySelector("text"),i=`var(--${p(["secondary","secondaryBright","secondaryBrighter","secondaryBrightest","primary","primarySat"])})`;t.setAttribute("stroke",i),o.setAttribute("stroke",i),n.setAttribute("fill",i)}))}function De(){const e=lr();Ce=e.shipContentDom.querySelector("#msdLabels"),Ae=Ce.querySelectorAll('[id^="label"]'),ve=Ae.length,Ae.forEach((e=>{const t=e.querySelector("path"),o=t.getTotalLength();t.setAttribute("stroke-dasharray",o),t.setAttribute("stroke-dashoffset",o),t.setAttribute("visibility","hidden"),t.dataset.length=o;const n=e.querySelector("text");n.setAttribute("visibility","hidden"),n.setAttribute("opacity",0);const i=e.querySelector('[id^="dot"]');i.setAttribute("opacity",0),i.setAttribute("visibility","hidden"),e.style.display="none"})),Ce.dataset.status="allHidden",Te()}function we(e=null){const t=lr();d3.selectAll("#msdLabels *").interrupt();const o=d3.select("#msdLabels");o.interrupt(),o.node().dataset.visible="showing",t.shipLabelsVisible=!1;const n="faster"===e?.4:1,i="faster"===e?.1:1,r=d3.selectAll('#msdLabels [id^="dot"]'),s=r.size();let a=Math.floor(.6*s),l=0;d3.selectAll("#msdLabels > g").style("display",null),"faster"!==e?(K("beepX3Up",0,0,0,.4),o.transition().delay(400).duration(350).on("start",(()=>{K("beepX3Downer",0,0,0,.4)})).on("end",(()=>{K("processing",0,0,0,.25,.8)})).transition().delay(250).duration(0).on("start",(()=>{K("longTaskLow",0,0,0,.2,.9)}))):(K("beepX2Up",0,0,0,.4),K("processing",.15,.3,0,.25,p([.8,.7,.6]))),r.attr("visibility","visible").transition().delay((()=>c(0,1500)*i)).duration(200*i).attr("opacity",1).transition().duration(100*i).attr("opacity",0).transition().duration(400*i).attr("opacity",1).on("end",(function(e,o){l++,l==a&&(document.documentElement.dataset.shipLabelsVisible="",d3.select(this).transition().delay(1e3*n).duration(0).on("start",(()=>{t.shipLabelsVisible=!0}))),d3.select(this.parentNode).select("path").attr("visibility","visible").transition().duration(c(800,2e3)*n).attr("stroke-dashoffset",0).ease(d3.easeCubicInOut).on("end",(function(){d3.select(this.parentNode).select("text").attr("visibility","visible").transition().duration(600*n).attr("opacity",1)}))}))}function Ee(e=null){const t=lr();d3.selectAll("#msdLabels *").interrupt();const o=d3.select("#msdLabels");o.interrupt(),o.node().dataset.visible="hiding",t.shipLabelsVisible=!1;const n="skipAnimation"===e;let i=0;"skipAnimation"!==e&&(K("beepX1Downer",0,0,0,.6),K("warningLong",0,0,0,.3,.92)),d3.selectAll("#msdLabels text").transition().duration((()=>n?0:c(50,600))).attr("opacity",0).on("end",(function(){this.setAttribute("visibility","hidden");const e=d3.select(this.parentNode).select("path");e.transition().duration(n?0:u(600,1e3)).ease(d3.easeCubicInOut).attr("stroke-dashoffset",e.node().dataset.length).on("end",(function(){this.setAttribute("visibility","hidden"),d3.select(this.parentNode).select('[id^="dot"]').transition().duration(n?0:400).attr("opacity",0).on("end",(function(){this.setAttribute("visibility","hidden"),i++,i==ve&&(Te(),d3.selectAll("#msdLabels > g").style("display","none"),delete document.documentElement.dataset.shipLabelsVisible)}))}))}))}function xe(){"showing"==document.querySelector("#msdLabels").dataset.visible?Ee():we()}function ke(){const e=lr();document.querySelectorAll("#msdLabels > g").forEach((t=>{const o=t.querySelector('[id^="hot_"]');null!==o&&(e.shipLabelsHotArea.push({id:o.getAttribute("id"),rect:o.getBBox(),parentId:o.parentElement.getAttribute("id")}),o.remove())}))}function Le(e,t){const o=lr(),n=o.getPointerLocationOnSvg(e,t);o.shipLabelsHotArea.every((e=>!(n.x>=e.rect.x&&n.x<=e.rect.x+e.rect.width&&n.y>=e.rect.y&&n.y<=e.rect.y+e.rect.height)||(Be(e),!1)))}function Be(e){const t=lr();t.shipLabelGotHit=!0,setTimeout((()=>{t.shipLabelGotHit=!1}),2e3);const o=document.querySelector("#msdContainer svg #ship #msdLabels #"+e.parentId);document.querySelectorAll("#msdLabels > g").forEach((e=>{e!==o&&(e.style.display="none",e.querySelectorAll("path, circle, text").forEach((e=>{e.setAttribute("visibility","hidden")})))}));const n=e.id.replace("hot_","hit_"),i=document.querySelector("#msdContainer svg #ship #hitareas #"+n);null!==i&&(t.shipRef.shipD3.node().dataset.labelsHideDelay="delay",K(p(["executing","beepX2Down","beepX3Downer","beepX2Upper"]),.3,0,0,.5),t.shipRef.shipD3.transition().delay(350).duration(800).on("start",(()=>{tr(o,"blink2")})).on("end",(()=>{re(i)})))}function Ie(e){const t=lr();if(t.shipZoomMode||!t.shipLabelsVisible)return!1;let o=null;const n=e.getAttribute("id").replace("hit_","hot_");let i=null;return t.shipLabelsHotArea.every((e=>e.id!=n||(o=t.shipContentDom.querySelector(`#msdLabels #${e.parentId}`),i=e,!1))),Be(i),!0}function qe(){const e=lr(),t=document.querySelector("#msdContainer2 > svg #ritosTop"),o=t.querySelector("#saucer");let n;n=p(e.allColorCssVarNames),o.querySelectorAll('[id^="escPod"]').forEach((e=>{e.setAttribute("fill",`var(--${n})`)})),o.querySelectorAll('g[id^="plate"] path, path[id^="plate"]').forEach((t=>{t.setAttribute("fill",`var(--${p(e.allColorCssVarNames)})`)})),Math.random()<.3?(o.querySelectorAll("path, circle").forEach((t=>{t.setAttribute("stroke",`var(--${p(e.allColorCssVarNames)})`)})),t.querySelectorAll("#secondary path, #secondary circle").forEach((t=>{t.setAttribute("stroke",`var(--${p(e.allColorCssVarNames)})`)}))):(n=p(e.allColorCssVarNames),o.querySelectorAll("path, circle").forEach((e=>{e.setAttribute("stroke",`var(--${n})`)})),n=Math.random()<.75?n:p(e.allColorCssVarNames),t.querySelectorAll("#secondary path, #secondary circle").forEach((e=>{e.setAttribute("stroke",`var(--${n})`)})))}function Re(e){const t=lr(),o=document.querySelector("#msdContainer2 > svg #ritosTop"),n=o.querySelector('[id^="fieldOutline"]');let i;i=!0===e||!1!==e&&!(o.classList.contains("dottedField")||o.classList.contains("expandingField")),o.classList.remove("dottedField","expandingField"),n.style.animationDirection=null,n.style.animationTimingFunction=null;const r=Number(o.dataset.transformOriginX),s=Number(o.dataset.transformOriginY);if(i){K(p(["deployed","negative"]),0,0,0,.3);const e=p(["dottedField","expandingField"]);o.classList.add(e);const i=Math.random();Oi(i<.25?`initiating SIF Level ${p(["1","2","3","4","5","10"])} Diagnostic`:i<.5?"extended hull plating magnetic shielding activated":i<.75?"SIF monitoring on secondary hull plating":`structural integrity field at ${c(70,99)}%`),clearTimeout(t.ritosTopFieldTimer),t.ritosTopFieldTimer=setTimeout((()=>{Fe()}),13e3),n.setAttribute("stroke",`var(--${p(t.nonDarkColorCssVarNames)})`),n.setAttribute("stroke-width",c(10,35)),n.setAttribute("stroke-dasharray",`${c(20,50)} ${c(15,30)}`),n.style.animationDuration=c(3e3,7e3)+"ms","dottedField"==e?(n.style.animationDirection=p(["normal","reverse","alternate","alternate-reverse"]),n.setAttribute("transform",`translate(${r} ${s}) scale(${.01*c(95,115)}) translate(-${r} -${s})`)):n.removeAttribute("transform"),n.style.animationTimingFunction=p(["ease-in-out","ease-in","ease-out","linear","steps(10, end)","steps(20, end)","steps(40, end)"])}else K("beepX1Downer",0,0,0,.3),Fe()}function Fe(){const e=lr();clearTimeout(e.ritosTopFieldTimer),e.ritosTopFieldTimer=null,document.querySelector("#msdContainer2 > svg #ritosTop").classList.remove("dottedField","expandingField")}function Me(e){const t=lr(),o=document.querySelector("#msdContainer2 > svg #ritosFront"),n=document.querySelector("#msdContainer2 > svg #bracketsWindow"),i=o.classList.toggle("rotateShield",e);if(document.documentElement.dataset.ritosFrontLarge="",i){K(p(["warningLong","executing"]),0,0,0,.4),function(){const e=lr();document.querySelector("#msdContainer2 > svg #bracketsWindow").querySelectorAll("*").forEach((t=>{t.hasAttribute("fill")&&t.setAttribute("fill",`var(--${p(e.allColorCssVarNames)})`),t.hasAttribute("stroke")&&t.setAttribute("stroke",`var(--${p(e.allColorCssVarNames)})`),t.getAttribute("id").includes("bar")&&(t.setAttribute("stroke-dasharray",`72 6 ${6*p([0,6])} ${6*c(1,12)} ${6*p([0,6])} ${6*c(6,12)}  ${6*p([0,6])} ${6*c(1,12)} ${6*p([0,6])} ${6*c(1,12)} ${6*p([0,6])} ${6*c(1,12)}`),t.style.animationDuration=p([23,37,47,173,187,191])+"s",t.style.animationTimingFunction=`steps(${p([c(10,30),c(350,500)])})`)}))}(),n.classList.add("activeAnimation");const e=Math.random();Oi(e<.3?`Shield ${p(["Modulation","harmonic"])} set at ${c(200,400)}.${c(0,9)} MHz frequency`:e<.6?"Shield activated monitoring • space debris impact":`Shield strength at ${c(60,99)}% ${p(["","","","","and holding","and dropping!"])}`),clearTimeout(t.ritosFrontShieldTimer),t.ritosFrontShieldTimer=setTimeout((()=>{Ne()}),13e3);const o=p(t.allColorCssVarNames),i=Math.random()<.5?"none":`${c(20,50)} ${c(5,30)}`,r=c(1,6),s=Math.random()<.5;document.querySelectorAll('#msdContainer2 > svg #ritosFront [id^="arcRotate"]').forEach((e=>{e.setAttribute("stroke",`var(--${o})`),e.setAttribute("stroke-dasharray",i),e.style.animationDuration=r+"s";const t=e.getAttribute("id");let n;(t.includes("2")||t.includes("4"))&&(e.style.animationDelay=.5*r+"s"),n=t.includes("1")||t.includes("2")?s?"normal":"reverse":s?"reverse":"normal",e.style.animationDirection=n}));const a=document.querySelector("#msdContainer2 > svg #rotatingShieldBg1");let l=a.getAttribute("fill");l=l.replace("url(","").replace(")",""),document.querySelector(`#msdContainer2 > svg ${l} stop:nth-child(2)`).setAttribute("stop-color",`var(--${t.allColorCssVarNames})`),a.style.animationDuration=c(1e3,6e3)+"ms"}else K("beepX3Downer",0,0,0,.3),n.classList.remove("activeAnimation"),Ne()}function Ne(){const e=lr();clearTimeout(e.ritosFrontShieldTimer),e.ritosFrontShieldTimer=null,document.querySelector("#msdContainer2 > svg #ritosFront").classList.remove("rotateShield"),delete document.documentElement.dataset.ritosFrontLarge,document.querySelector("#msdContainer2 > svg #bracketsWindow").classList.remove("activeAnimation")}function je(){const e=lr(),t=document.querySelector("#msdContainer svg #rubberDucky"),o=document.querySelector("#msdContainer svg #rubberDuckyTarget"),n=t.getBBox(),i=e.rubberDuckyPositions;i.push({x:n.x,y:n.y}),t.setAttribute("transform-origin",`${n.x+.5*n.width} ${n.y+.5*n.height}`),o.setAttribute("transform-origin",t.getAttribute("transform-origin")),o.setAttribute("opacity",0),t.setAttribute("transform","translate(0 0) scale(1 1) rotate(0)"),t.setAttribute("opacity",1),t.dataset.rdIndex=0,t.dataset.translate="0 0",t.dataset.hFlip=1,t.dataset.aniInProgress=!1,document.querySelectorAll("#msdContainer svg #rubberDuckyPositions > rect").forEach((e=>{i.push({x:Number(e.getAttribute("x")),y:Number(e.getAttribute("y"))})})),document.querySelector("#msdContainer svg #rubberDuckyPositions").remove(),document.querySelector("#msdContainer svg #rubberDucky_hotzone").onpointerdown=()=>{var e;t.dataset.aniInProgress=!0;const o=null!==(e=t.dataset.translate)&&void 0!==e?e:"0 0";var n;const i=Number(null!==(n=t.dataset.hFlip)&&void 0!==n?n:1);K(p(["warningLong","processing"]),0,0,0,.8,1.4),d3.select(t).transition().duration(400).ease(d3.easeQuadIn).attr("transform",`translate(${o}) scale(${8*i} 8) rotate(${l()*m(0)})`).on("end",(function(){this.setAttribute("opacity",.2),setTimeout((()=>{this.setAttribute("opacity",.7)}),150)})).transition().delay(300).on("start",(function(){K("exitTask",0,0,0,.8,1.15)})).duration(300).ease(d3.easeQuadIn).attr("transform",`translate(${o}) scale(${.1*i} .1) rotate(${l()*m(100)})`).attr("opacity",0).on("end",(function(){$e()}))}}function $e(){const e=lr().rubberDuckyPositions,t=document.querySelector("#msdContainer svg #rubberDucky");var o;const n=Number(null!==(o=t.dataset.rdIndex)&&void 0!==o?o:0);let i=m(e.length);i==n&&(i=(i+c(1,Math.round(.7*e.length)))%e.length),t.dataset.rdIndex=i;const r=e[i].x-e[0].x+" "+(e[i].y-e[0].y),s=l();t.dataset.translate=r,t.dataset.hFlip=s,t.setAttribute("transform",`translate(${r}) scale(${s} 1) rotate(0)`),d3.select(t).transition().delay(c(0,1e3)).duration(p([800,1200])).attr("opacity",1).on("end",(()=>{Oi(p(["Rubber Ducky has been beamed to another location!","Rubber Ducky got transported to somewhere on the ship","Rubber Ducky activated the Site-to-site transport..."])),t.dataset.aniInProgress=!1}))}function Pe(){const e=document.querySelector("#msdContainer svg #rubberDucky");if("true"===e.dataset.aniInProgress)return;e.dataset.aniInProgress=!0;const t=document.querySelector("#msdContainer svg #rubberDuckyTarget");var o;const n=null!==(o=e.dataset.translate)&&void 0!==o?o:"0 0";var i;const r=Number(null!==(i=e.dataset.hFlip)&&void 0!==i?i:1);K(p(["warningHigh","deployed","affirmative"]),0,0,0,.6),d3.select(t).attr("transform",`translate(${n}) scale(3) rotate(0)`).attr("opacity",1).attr("visibility","visible").transition("blinking").delay(200).duration(0).attr("opacity",0).transition("blinking").delay(200).on("start",(()=>{t.setAttribute("opacity",.5),Oi("Rubber Ducky located","timePrefix")})).duration(400).attr("transform",`translate(${n}) scale(2) rotate(90)`).attr("opacity",0).on("end",(()=>{t.setAttribute("visibility","hidden")})),d3.select(e).transition().delay(400).duration(700).attr("transform",`translate(${n}) scale(${7*r} 7) rotate(0)`).on("start",(()=>{K("beepX2Upper",.4,0,0,.7)})).transition().delay(150).duration(1e3).attr("transform",`translate(${n}) scale(${r} 1) rotate(0)`).transition().duration(100).attr("opacity",0).on("start",(()=>{K("notification",0,0,0,.7)})).on("end",(()=>{$e()}))}function Oe(e){const t=lr();t.bufferTimeStatus=!t.bufferTimeStatus;const o=t.svg1.querySelector("#homeBtn3 #bufferTimeQuota tspan");if(t.bufferTimeStatus){K("warningHigh",0,0,0,.6),document.documentElement.dataset.bufferTime="",o.textContent="WARNING / ZERO QUOTA",t.bufferTimeCountdown=60;const e=t.svg2.querySelector("#bufferTimeRings1"),n=t.svg2.querySelector("#bufferTimeNumber"),i=n.querySelector("tspan"),r=43.25;e.style.strokeDasharray="0 2595";const s=t.svg2.querySelector("#bufferTimeRings3"),a=t.svg2.querySelector("#bufferTimeRings4");s.style.strokeDashoffset=c(-6e3,6e3),a.style.strokeDashoffset=c(-6e3,6e3);const l=1;let d=l;const u=["warning","warning","warning","warning","hey!","super warning","final warning","To all crews","LD crew","Per the captain","special event","To beta-shifters","to all holonovel writers"],m=["","","","","","","","","","","","","","","","","","","","","","!"," !!","...!!!"," seriously",". shut up!",", m’kay",". absolutely zero.",", except for androids",", unless you’re Mike",", not even for captains"],y=e=>{n.setAttribute("transform",`translate(${t.bufferTimeTextOrigin.x} ${t.bufferTimeTextOrigin.y}) scale(1 0.85) translate(${-1*t.bufferTimeTextOrigin.x+t.bufferTimeTextWidthOffset[e]} -${t.bufferTimeTextOrigin.y})`)};i.textContent="60",y(60),t.bufferTimeTimer=setInterval((()=>{t.bufferTimeCountdown<-5&&(t.bufferTimeCountdown=60,d=l);let o=t.bufferTimeCountdown<0?0:t.bufferTimeCountdown;const n=h(o,2);y(o),i.textContent=n;const g=(60-o)*r;if(e.style.strokeDasharray=`${2595-g} ${g}`,e.style.strokeDashoffset=649-g,s.style.strokeDashoffset=1002-4009/60*o,a.style.strokeDashoffset=1221-4078/60*o,60==t.bufferTimeCountdown)d==l&&K("executing");else if(t.bufferTimeCountdown>=16){const e=1-t.bufferTimeCountdown/60*.82;t.bufferTimeCountdown%10==0?K("beepX3Upper",0,0,0,e):K("beepX1Down",0,0,.08,Math.max(e,.6))}else{let e;t.bufferTimeCountdown>=6?(e="blink1",K("beepX1Up")):t.bufferTimeCountdown>=1?(e="blink2",K("beepX2Up")):(e="blink3",K(p(["processing","warningHigh"]))),a.classList.add(e),t.bufferTimeCountdown<1&&(s.classList.add(e),s.style.strokeDashoffset=c(-6e3,6e3),a.style.strokeDashoffset=c(-6e3,6e3)),i.classList.add(e),setTimeout((()=>{i.removeAttribute("class"),s.removeAttribute("class"),a.removeAttribute("class")}),600)}o%10==0&&Oi(`${p(u)} • No Buffer Time granted${p(m)}`,"timePrefix"),d>0?d--:--t.bufferTimeCountdown}),1e3)}else K("exitTask"),delete document.documentElement.dataset.bufferTime,o.textContent="QUOTA • PERMITTED",clearInterval(t.bufferTimeTimer),t.bufferTimeTimer=null,Oi("Buffer Time Quota Restored","timePrefix")}W=a("ai42B").getBundleURL("b1Qpi")+"sounds/"+a("gTwGg").resolve("bg8ja");let Ue=!1,He=!1;let _e,Ge;const Xe=["pointerdown","pointermove","keypress","scroll","touchstart"];let Ve=()=>{};function We(){Yn(),He=!0}const Ye=3e3;function ze(e){He&&Zn(),He=!1,clearTimeout(_e),delete document.documentElement.dataset.idle,clearTimeout(Ge),Ge=setTimeout((()=>{document.documentElement.dataset.idle=""}),3100),Ve()}let Ze=null;function Qe(e=null){const t=lr();return null!=e&&!0===t.jwstImg.filePreloaded[e]}function Je(e=null){const t=lr();if(null==e)return!1;if(1==t.jwstImg.filePreloaded[e])return;const o=new Image;o.dataset.jwstImgIndex=e,o.addEventListener("load",Ke,!0),o.src=t.jwstImg.fileRef[e]}function Ke(e){const t=lr(),o=parseInt(e.currentTarget.dataset.jwstImgIndex);t.jwstImg.filePreloaded[o]=!0,t.jwstImg.preloadedIndexes.push(o)}function et(){const e=lr(),t=document.querySelector("#msdContainer2 > svg #target"),o=t.querySelector("#targetOuter"),n=t.querySelector("#targetInnerH"),i=t.querySelector("#targetInnerV"),r=document.querySelector("#msdContainer2 > svg #targetStar"),s=document.querySelector("#msdContainer2 > svg #targetLines"),a=s.querySelector("#targetLineH"),d=s.querySelector("#targetLineV"),y=document.querySelector("#msdContainer > svg #jwstImage_placeholder").getBBox(),g=t.getBBox().width,f=[.8*g,y.width-.8*g],b=[.8*g,y.height-.8*g],S=document.querySelector("#msdContainer svg #jwstImage_placeholder + image");Qi(t),Qi(r),Qi(o),Qi(n),Qi(i),t.setAttribute("transform",`translate(${.5*y.width} ${.5*y.height})`);r.style.opacity=0,o.setAttribute("opacity",0),i.setAttribute("opacity",0),n.setAttribute("fill",`var(--${p(e.nonDarkColorCssVarNames)})`),s.setAttribute("opacity",0),a.setAttribute("opacity",0),d.setAttribute("opacity",0),t.style.opacity=0;const C=e.jwstImg.starRotation[e.jwstImg.currentIndex];let A,v,T=c(4,10);const D=()=>{A=c(f[0],f[1]),v=c(b[0],b[1]);const g=`${A} ${v}`,w=l()*m(4)*180,E=u(.2,1.4),x=Math.random()<.35,k=x?1:0;r.style.filter=Math.random()<.5?"drop-shadow(0 0 8px #fff) drop-shadow(0 0 32px #fff)":`drop-shadow(0 0 8px #fff) drop-shadow(0 0 32px #fff) brightness(0.6) sepia(1) saturate(${c(1,8)}) hue-rotate(${c(0,360)}deg)`,function(){const t=`var(--${p(e.nonDarkColorCssVarNames)})`;d.setAttribute("stroke",t),a.setAttribute("stroke",t);const o=`${c(6,40)} ${p([0,c(6,40)])}`;d.setAttribute("stroke-dasharray",o),a.setAttribute("stroke-dasharray",o);const n=Math.random()<.5?c(4,10):c(30,100);d.setAttribute("stroke-width",n),a.setAttribute("stroke-width",n);const i=.1*c(3,8);d.setAttribute("opacity",i),a.setAttribute("opacity",i),s.setAttribute("opacity",1);const r=c(100,1200),l=c(100,1200),m=Math.max(r,l);let h=0;r>l&&(h=Math.abs(r-l));d3.select(a).transition().duration(r).ease(or()).attr("y1",y.y+v).attr("y2",y.y+v),d3.select(d).transition().duration(l).ease(or()).on("start",(()=>{d3.select(s).transition().duration(m).attr("opacity",.5)})).attr("x1",y.x+A).attr("x2",y.x+A).transition().delay(150+h).duration(1500).on("start",(()=>{s.setAttribute("opacity",0)})).on("end",(()=>{const e=u(i,1);d.setAttribute("opacity",e),a.setAttribute("opacity",e)}))}();const L=c(0,2400),B=c(800,4e3),I=L+B-1600;e.jwstImg.soundTimer=setTimeout((()=>{K(p(["executing","longTaskLow","beepX3Downer"]),0,0,0,.25)}),I),d3.select(t).transition().delay(L).duration(B).ease(or()).attr("transform",`translate(${g}) rotate(0) scale(${u(.6,1.4)})`).style("opacity",.4).on("end",(()=>{K("deployed",0,0,0,.25),t.style.opacity=1,tr(t),s.setAttribute("opacity",1),tr(s),d3.select(a).transition().delay(350).duration(150).attr("opacity",0),d3.select(d).transition().delay(350).duration(150).attr("opacity",0);const o=`var(--${p(e.nonDarkColorCssVarNames)})`;n.setAttribute("fill",o),x&&i.setAttribute("fill",o),d3.select(r).attr("transform",`translate(${g}) rotate(${C}) scale(${u(.6,1.4)})`).transition().delay(400).duration(700).on("start",(()=>{tr(r)})).transition().duration(1e3).ease(or()).style("opacity",u(.6,1.2)).transition().delay(c(900,3e3)).duration(c(800,3e3)).ease(or()).style("opacity",0)})).transition().delay(1e3*k).duration(9e3*k).on("start",(()=>{x&&(o.setAttribute("opacity",1),tr(o),i.setAttribute("transform","scale(0.1)"),d3.selectAll([i,n]).transition().delay(1200).duration(1200).ease(d3.easeBackInOut.overshoot(4)).attr("transform","scale(0.6)").attr("opacity","1").on("start",((e,t)=>{0==t&&K(p(["warningHigh","warningLow"]),.75,0,0,.3)})).transition().delay(400).duration(1500).ease(d3.easeBackInOut.overshoot(4)).attr("transform",`scale(0.5) rotate(${l()*c(1,10)*90})`).on("end",(function(){this.setAttribute("transform","scale(0.5)")})).transition().delay(400).duration(1500).ease(d3.easeBackIn.overshoot(4)).attr("transform","scale(1)"),d3.select(o).attr("transform","scale(1)").transition().delay(400).duration(1500).ease(d3.easeBackInOut.overshoot(6)).attr("transform","scale(1.2)").attr("opacity","1").on("start",(()=>{K(p(["affirmative","warningLow","deployed","exitTask","executing"]),.5,0,0,.4)})).transition().delay(1200).duration(1500).ease(d3.easeBackInOut.overshoot(6)).attr("transform",`scale(1.3) rotate(${l()*c(1,10)*90})`).on("start",(()=>{K("processing",0,.2,0,.15,.9)})).on("end",(function(){this.setAttribute("transform","scale(1.3)"),K("beepX2Upper",0,0,0,.5)})).transition().delay(400).duration(1500).ease(d3.easeBackInOut.overshoot(6)).on("start",(()=>{const t=S.getBBox();S.setAttribute("transform-origin",`${t.x+A} ${t.y+v}`),d3.select(S).transition().delay(950).duration(100*c(4,15)).ease(d3.easeBackOut).attr("transform",`scale(1.${h(c(5,17),2)})`),e.jwstImg.soundTimer=setTimeout((()=>{K(p(["exitTask","affirmative","beepX3Upper","executing"]),0,0,0,.3)}),1100)})).attr("transform","scale(1)").on("end",(()=>{tr(i),tr(n),tr(o),d3.select(r).interrupt().style("opacity",0).transition().duration(800).style("opacity",1),o.setAttribute("fill",`var(--${p(e.nonDarkColorCssVarNames)})`),d3.select(t).transition("rotate1").duration(100*c(6,12)).ease(or()).attr("transform",`translate(${g}) rotate(${l()*(90*c(0,2)+45)}) scale(${u(.6,1.4)})`).on("start",(()=>{K("processing",0,.4,0,.13)})).on("end",(()=>{K("beepX2Downer",0,0,0,.25)}))})))})).transition().delay(c(50,600)).duration(100*c(6,20)).ease(or()).on("start",(()=>{const e=Math.random();let t="";e<.15&&(t=`invert(${.1*c(7,10)})`),e<.3?t=`saturate(${.1*c(0,7)})`:e<.45?t=`saturate(${.1*c(11,20)}) brightness(${.1*c(11,20)})`:e<.6?t="blur(8px)":e<.75&&(t=`hur-rotate(${c(40,330)})`),S.style.filter=t,K("shortBeep",0,0,0,.3)})).attr("transform",`translate(${g}) rotate(${w}) scale(${u(.2,1.4)})`).on("end",(()=>{x&&tr(r)})).transition().duration(100*c(2,16)).ease(or()).attr("transform",`translate(${g}) rotate(${Math.random()<.5?w:0}) scale(${E})`).on("start",(()=>{K("exitTask",0,0,0,.2,.85)})).on("end",(()=>{x&&(o.setAttribute("fill",n.getAttribute("fill")),o.setAttribute("opacity",.7),d3.select(S).transition().delay(2e3).duration(100*c(12,25)).ease(d3.easeCubicInOut).attr("transform","scale(1)").on("start",(()=>{K("negative",.3,0,0,.15,.9)})).on("end",(()=>{K("beepX1Down",0,0,0,.3)})))})).transition().delay(c(2500,7e3)).duration(3700).on("start",(()=>{x&&(d3.selectAll([i,o]).transition().delay((()=>100*c(0,8))).duration((()=>100*c(4,10))).attr("opacity",0).on("start",(()=>{K("shortBeep",0,0,0,.2)})),d3.select(r).transition().duration(1200).style("opacity",0))})).on("end",(()=>{T--,0==T&&delete document.documentElement.dataset.huggy,K("beepX3Downer",0,0,0,.3),t.setAttribute("transform",`translate(${g}) rotate(0) scale(${E})`),0==T?(t.style.opacity=0,tt("restart")):(tr(t,"blink1"),D())}))};D()}function tt(e=null){lr();const t=document.querySelector("#msdContainer > svg #jwstImageGroup"),o=t.querySelector("mask"),n=o.querySelector("#jwstMaskRef"),i=t.querySelector("#jwstImage_placeholder + image");d3.select(n).interrupt().transition().duration(400).style("opacity",0).on("end cancel interrupt",(()=>{"restart"===e?ot():(null!=i&&i.remove(),o.querySelectorAll("rect").forEach((e=>{e.remove()})),n.style.opacity=0)}))}function ot(){const e=lr();!function(){const e=lr();let t=e.jwstImg.nextIndex;if(Qe(t))e.jwstImg.nextIndex=m(e.jwstImg.fileRef.length),e.jwstImg.nextIndex==t&&(e.jwstImg.nextIndex=(e.jwstImg.nextIndex+1)%e.jwstImg.fileRef.length),Je(e.jwstImg.nextIndex);else{let o=m(e.preloadedIndexes.length);o==e.jwstImg.currentIndex&&(o=(o+1)%e.preloadedIndexes.length),t=o}e.jwstImg.currentIndex=t;const o=document.querySelector("#msdContainer svg #jwstImage_placeholder + image");if(null==o){const o=document.querySelector("#msdContainer svg #jwstImage_placeholder"),i=o.getBBox();var n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS(null,"x",i.x),n.setAttributeNS(null,"y",i.y),n.setAttributeNS(null,"width",i.width),n.setAttributeNS(null,"height",i.height),n.setAttributeNS("http://www.w3.org/1999/xlink","href",e.jwstImg.fileRef[t]),o.parentNode.insertBefore(n,o.nextSibling)}else o.setAttributeNS("http://www.w3.org/1999/xlink","href",e.jwstImg.fileRef[t]);Oi("loading image from NASA’s James Webb Space Telescope...")}();const t=document.querySelector("#msdContainer > svg #jwstImageGroup"),o=t.querySelector("mask"),n=o.querySelector("#jwstMaskRef");n.style.opacity=0;const i=t.querySelector("#jwstImage_placeholder").getBBox();let r=i.height,s=i.y;const a="http://www.w3.org/2000/svg",l=t.querySelector("#jwstImage_placeholder + image");o.querySelectorAll("rect").forEach((e=>{e.remove()})),l.style.filter="blur(32px)",l.style.transition="none",document.documentElement.dataset.jwst="";let d=!0;if(Math.random()<.5){const e=Math.random()<.5?()=>c(90,250):()=>c(10,70);for(;r>0;){let t=e();t>r?(t=r,r=0):r-=t;let n=document.createElementNS(a,"rect");n.setAttribute("x",i.x),n.setAttribute("y",s),n.setAttribute("width",i.width),n.setAttribute("height",t),n.setAttribute("fill","#fff"),n.setAttribute("rx",0),s+=t,o.appendChild(n),n.style.opacity=0}}else{d=Math.random()<.5;const e=i.width/7,t=i.height/4;for(let n=0;n<7;n++)for(let r=0;r<4;r++){let s=document.createElementNS(a,"rect");s.setAttribute("x",i.x+e*n),s.setAttribute("y",i.y+t*r),s.setAttribute("width",e),s.setAttribute("height",t),s.setAttribute("fill","#fff"),o.appendChild(s),s.style.opacity=0}}d3.select(t).transition().delay(200).duration(1750).on("start",(()=>{o.querySelectorAll("rect").forEach((e=>{e.style.transition=`opacity ${c(100,1e3)}ms ${p(["linear","ease","ease-in","ease-out"])} ${c(0,600)}ms`,e.style.opacity=d?1:.2*c(2,5)})),l.style.filter="none",l.style.transition="filter 1.4s ease 0.8s",e.jwstImg.soundTimer=setTimeout((()=>{K("processing",0,0,0,p([.15,.3,.5]),p([1,.93,.85])),K("processing",.37,0,0,p([.11,.17,.29]),p([1,.93,.85]))}),650)})).on("end",(()=>{o.querySelectorAll("rect").forEach((e=>{d&&(n.style.opacity=1,e.remove())})),Oi(e.jwstImg.description[e.jwstImg.currentIndex],null,!0),e.jwstImg.currentIndex==e.jwstImg.huggyIndex&&(document.documentElement.dataset.huggy="")})).transition().delay(1e3).duration(0).on("start",(()=>{et()}))}function nt(){const e=lr(),t=document.querySelector("#msdContainer > svg #jwstImageGroup").querySelector("mask"),o=t.querySelector("#jwstMaskRef"),n=document.querySelector("#msdContainer > svg #ringClock"),i=Ki(n),r=`translate(${i.x}px, ${i.y}px)`,s=`translate(-${i.x}px, -${i.y}px)`;if(delete document.documentElement.dataset.huggy,!0===e.jwstStatus)e.jwstStatus=!1,clearTimeout(e.jwstImg.soundTimer),e.jwstImg.soundTimer=null,K("beepX3Downer"),K("exitTask",.3),Pi(),tt(),zi("normal"),Yi("normal"),n.classList.remove("jwst"),d3.select(n).transition().delay(250).duration(800).ease(d3.easeBackInOut).style("opacity",1).style("transform",`${r} rotate(0) scale(1) ${s}`).on("end cancel interrupt",(function(){this.style.transition=null,this.style.transform=`${r} rotate(0) scale(1) ${s}`})),delete document.documentElement.dataset.jwst,function(){lr();const e=document.querySelector("#msdContainer > svg #jwstImageGroup"),t=e.querySelector("#jwstImage_placeholder + image"),o=document.querySelector("#msdContainer2 > svg #target"),n=o.querySelector("#targetOuter"),i=o.querySelector("#targetInnerH"),r=o.querySelector("#targetInnerV"),s=document.querySelector("#msdContainer2 > svg #targetStar"),a=document.querySelector("#msdContainer2 > svg #targetLines"),l=a.querySelector("#targetLineH"),c=a.querySelector("#targetLineV");d3.selectAll([e,t,s,o,i,r,n,a,l,c]).interrupt(),o.style.visibility="hidden",a.style.visibility="hidden",s.style.visibility="hidden"}(),t.querySelectorAll("rect").forEach((e=>{e.remove()}));else{e.jwstStatus=!0,K("shortRandomBeep",0,0,0,.5),K("executing",.15,0,0,.4),d3.select(o).interrupt(),o.style.opacity=0;const t=document.querySelector("#msdContainer2 > svg"),i=t.querySelector("#target"),r=t.querySelector("#targetLines"),s=t.querySelector("#targetStar");i.style.visibility="visible",i.style.opacity=0,r.style.visibility="visible",r.style.opacity=0,s.style.visibility="visible",s.style.opacity=0,Yi("minimized"),zi("minimized");const a=n.dataset.jwstRingClockTransform;d3.select(n).style("transition","none").transition().delay(80).duration(600).ease(d3.easeBackInOut.overshoot(1.05)).style("opacity",.55).style("transform",a).on("end cancel interrupt",(function(){this.style.transition=null,this.classList.add("jwst")})),ot()}}function it(e){Qi(e),e.style.opacity=.35,e.setAttribute("fill","#fff"),tr(e,"blink2");const t=String.fromCharCode(75),o=String.fromCharCode(97);d3.select(e).transition().delay(500).duration(1e3).ease(d3.easeCubicOut).on("start",(()=>{e.style.opacity=.8,Oi("you’ve found the  "+t+" o "+o+" l "+o+" ! !  Con"+String.fromCharCode(103)+"rats ~")})).attr("transform","scale(2)").on("end",(()=>{Oi("A l l   h a i l   t h e   g r e a t    "+t+" o "+o+" l "+o+"  ! ! ! ! !")})).transition().delay(800).duration(400).attr("transform","scale(1)").on("end",(()=>{e.style.opacity=null,e.setAttribute("fill","#666")}))}const rt=["N9Sxyvz4lW4","TepWfVIaWv8","X3tKtrqsSBg","Kxrj7PYJMQY","PLcKQG9ZuAQaTXcpM_C_i_9wXBra7tXRPF"];function st(){const e=lr();e.videoBox={youTubeApiReady:!1,youTubePlayer:null,youTube_onPlayerReady:null,youTube_onPlayerStateChange:null,defaultVolume:10},e.homeContentDom.querySelector("#ytMenu #menuBg").style.fillOpacity=1,e.homeContentDom.querySelector("#ytMenu #menuBg").style.strokeWidth=0,e.homeContentDom.querySelector("#ytMenu #menuBg").style.filter="none";const t=document.getElementById("ytInput_placeholder"),o=t.getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");n.setAttribute("width",o.width),n.setAttribute("height",o.height),n.setAttribute("x",o.x),n.setAttribute("y",o.y),t.parentNode.insertBefore(n,t.nextSibling),t.style.display="none";const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id","ytTextInput"),i.setAttribute("placeholder","ENTER A YOUTUBE VIDEO/PLAYLIST ID HERE"),i.style.width=o.width+"px",i.style.height=o.height+"px",i.style.pointerEvents="auto",n.appendChild(i),i.addEventListener("keyup",(e=>{if("Enter"===e.key){let e=pt(i.value.trim());e.length>0&&ct(e)}})),e.homeContentDom.querySelector('[id^="btnS47Menu"]').onpointerdown=()=>{lt()},e.homeContentDom.querySelector('[id^="btnS47End"]').onpointerdown=()=>{yt()},e.shipFrameDom.querySelector('#frameShipMain [id^="btnS47Close"]').onpointerdown=()=>{yt()},e.homeContentDom.querySelector('[id^="ytMenu"]').onpointerdown=e=>{const t=e.target.getAttribute("id");let o=null;t.includes("btnS47Yt6")?(o=pt(i.value.trim()),0==o.length&&(o=null)):t.includes("btnS47Yt1")?o=rt[0]:t.includes("btnS47Yt2")?o=rt[1]:t.includes("btnS47Yt3")?o=rt[2]:t.includes("btnS47Yt4")?o=rt[3]:t.includes("btnS47Yt5")&&(o=rt[4]),null!==o&&ct(o)};const r=document.createElement("script");r.src="https://www.youtube.com/iframe_api";const s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(r,s),e.videoBox.youTube_onPlayerReady=t=>{const o=t.target;o.setVolume(e.videoBox.defaultVolume),o.setShuffle(!0),o.setLoop(!0),o.playVideo()},e.videoBox.youTube_onPlayerStateChange=e=>{},window.onYouTubeIframeAPIReady=()=>{e.videoBox.youTubeApiReady=!0}}function at(){ct(p(rt))}function lt(e,t=null){lr();let o;o=!0===e||!1!==e&&!("ytMenu"in document.documentElement.dataset),o?(document.documentElement.dataset.ytMenu="","mute"!==t&&K("notification",0,0,0,.25)):(delete document.documentElement.dataset.ytMenu,"mute"!==t&&K("beepX2Downer",0,0,0,.3))}function ct(e){const t=lr();yt("mute"),Oi("YouTube Channel Opened: Establishing connection...");const o=dt();if(t.videoBox.youTubeApiReady){const n=document.createElement("div");n.setAttribute("id","ytIframe2"),document.body.appendChild(n);const i={height:o.height,width:o.width,playerVars:{playsinline:1,loop:1,disablekb:1,rel:0},events:{onReady:t.videoBox.youTube_onPlayerReady,onStateChange:t.videoBox.youTube_onPlayerStateChange}};e.length<12?i.videoId=e:(i.playerVars.listType="playlist",i.playerVars.list=e),t.videoBox.youTubePlayer=new YT.Player("ytIframe2",i)}else{const t=document.createElement("iframe");e.length<12?t.setAttribute("src",`https://www.youtube.com/embed/${e}?autoplay=1&enablejsapi=1&origin=https://www.mewho.com&modestbranding=1&disablekb=1&playsinline=1&rel=0`):t.setAttribute("src",`https://www.youtube.com/embed/videoseries?list=${e}&autoplay=1&enablejsapi=1&origin=https://www.mewho.com&modestbranding=1&loop=1&disablekb=1&playsinline=1&rel=0`),t.setAttribute("id","ytIframe2"),t.setAttribute("frameborder","0"),t.setAttribute("width",o.width),t.setAttribute("height",o.height),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen",""),document.body.appendChild(t)}document.documentElement.dataset.ytWindow="",lt(!1),K("processing",.15,.3,0,.2)}function dt(e=null){const t=lr();let o,n;n="ship"==e||"home"==e||"sickbay"==e?e:"sickbay"in document.documentElement.dataset?"sickbay":document.documentElement.dataset.pageState,o="ship"==n?t.shipFrameDom.querySelector("#yt_placeholderShipFixed"):"sickbay"==n?t.sickbayContentDom.querySelector("#yt_placeholderSickbay"):t.homeContentDom.querySelector("#yt_placeholder");const i=o.getBoundingClientRect();return document.documentElement.style.setProperty("--ytIframeTop",i.top+"px"),document.documentElement.style.setProperty("--ytIframeLeft",i.left+"px"),document.documentElement.style.setProperty("--ytIframeWidth",i.width+"px"),document.documentElement.style.setProperty("--ytIframeHeight",i.height+"px"),i}function ut(){const e=document.getElementById("ytIframe2");null!=e&&e.classList.add("hide")}function mt(){const e=document.getElementById("ytIframe2");null!=e&&e.classList.remove("hide")}function yt(e=null){const t=lr();delete document.documentElement.dataset.ytWindow,t.videoBox.youTubePlayer=null;const o=document.getElementById("ytIframe2");null!==o&&o.remove(),lt(!1,"mute"),"mute"!==e&&(K("exitTask",0,0,0,.6),Oi("YouTube Video Window Terminated As Requested"))}function pt(e){return void 0!==(e=e.split(/(vi\/|v%3D|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_\-]/i)[0]:e[0]}let ht=0;function gt(){const e=lr();if("transitioning"==e.pageStatus)return;e.setPageState("home"),e.pageStatus="transitioning",mi(),ui(e.homeContentDom.querySelector("#homeClock tspan"),e.homeContentDom.querySelector("#homeDate tspan"),"hasRingClock"),e.logPlaceholderDom=e.homeContentDom.querySelector("#log_placeholder"),Ni(),e.logDisplayDom.style.opacity=1;const t=e.homeFrameDom.querySelector("#homeTopBar"),o=e.homeFrameDom.querySelector("#topRightBlock");e.homeContentDom.querySelector("#homeWindow").style.transform="translate(70px,0)",e.homeFrameDom.style.visibility="visible",e.homeFrameDom.style.opacity=1,e.homeContentDom.style.opacity=1,e.homeContentDom.style.visibility="visible",e.configContentDom.style.visibility="hidden",e.configContentDom.style.opacity=0,Gi();const n=e.homeContentDom.querySelector("#ringClock"),i=e.homeContentDom.querySelector("#homeWindow"),r=e.homeContentDom.querySelector("#homeConfig"),s=e.homeFrameDom.querySelector("#frameTitleText"),a=Ki(n),d=`translate(${a.x}px, ${a.y}px)`,u=`translate(-${a.x}px, -${a.y}px)`;K("beepX2Downer",.15,0,0,.3),d3.select(e.homeFrameDom.querySelector("#topLeftCorner")).style("opacity",1).transition().delay(200).duration(200).on("start",(function(){this.style.animationDuration="0.7s",this.classList.add("blink2"),b(e.pageTimers,(()=>{this.classList.remove("blink2")}),500)})).on("end",(function(){o.style.transition=null,o.style.opacity=1,o.style.transform="translate(0,0)",K("beepX1Down",.55)})).transition().delay(100).duration(700).on("start",(function(){t.style.opacity=1,t.setAttribute("width",t.dataset.width)})).on("end",(function(){K("beepX2Up"),s.style.opacity=1,s.classList.add("blink2"),b(e.pageTimers,(()=>{s.classList.remove("blink2")}),600);const t=e.homeFrameDom.querySelectorAll('[id^="homeBtn"]');t.forEach((t=>{b(e.pageTimers,(()=>{t.style.transition=`opacity ${c(-100,1200)}ms ease ${c(0,200)}ms`,t.style.opacity=1}),c(0,600))})),b(e.pageTimers,(()=>{t.forEach((e=>{e.style.transition=null}))}),1800)})).transition().delay(400).duration(800).on("start",(function(){b(e.pageTimers,(()=>{K("negative",0,0,0,.5),e.homeContentDom.querySelector("#homeDate").style.opacity=1}),500),e.homeContentDom.querySelector("#homeClock").style.opacity=1})).on("end",(function(){i.style.opacity=.3,i.style.transform=null,K("longTaskLow"),e.setDocumentCurrentPage("home"),e.pageStatus="home"})).transition().delay(800).duration(800).on("start",(function(){r.style.opacity=.15,e.configContentDom.style.visibility="visible",e.configContentDom.style.opacity=.15})).on("end",(function(){n.style.opacity=.5,n.style.transform=`${d} rotate(${l()*c(15,50)}deg)  scale(0.5) ${u}`,K("beepX3Downer",0,0,0,.5),b(e.pageTimers,(()=>{n.querySelectorAll('#ringSecond, [id^="ringMinute"]').forEach((e=>{e.style.strokeDashoffset=null})),n.classList.add("blink3"),n.style.opacity=1,b(e.pageTimers,(()=>{n.classList.remove("blink3")}),1e3)}),1e3),b(e.pageTimers,(()=>{K("processing",0,0,0,.3),n.style.transform=`${d} rotate(0) scale(1.1) ${u}`,b(e.pageTimers,(()=>{n.style.transform=`${d} rotate(0) scale(1) ${u}`,K("shortRandomBeep",.25,0,0,.3),K("notification",1,0,0,.5)}),1e3)}),1500)})).transition().delay(850).duration(2e3).on("start",(function(){i.style.opacity=null})).on("end",(function(){r.style.opacity=null})).transition().delay(600).duration(600).on("start",(function(){e.configContentDom.style.opacity=1,e.configContentDom.classList.add("enabled"),Oi("LD LCARS is ready","timePrefix")})).on("end",(function(){})).on("cancel interrupt",(()=>{n.style.transform=`${d} rotate(0) scale(1) ${u}`})).transition().delay(2300).duration(1).on("start",(function(){Oi(Ui())})),e.shipContentDom.style.opacity=0,e.shipContentDom.style.visibility="hidden",e.shipFrameDom.style.opacity=0,e.shipFrameDom.style.visibility="hidden"}function ft(){const e=lr();if("transitioning"==e.pageStatus)return;e.pageStatus="transitioning",e.pageTimers.forEach((e=>{clearTimeout(e)})),e.pageTimers=[],Oi("switching to LD Main screen","timePrefix"),mi(),ui(e.homeContentDom.querySelector("#homeClock tspan"),e.homeContentDom.querySelector("#homeDate tspan"),"hasRingClock"),delete document.documentElement.dataset.tinyShips;const t=e.homeFrameDom.querySelector("#topLeftCorner");t.setAttribute("fill",t.dataset.fill),t.setAttribute("d",t.dataset.d);const o=e.homeFrameDom.querySelector("#homeTopBar");o.setAttribute("fill",o.dataset.fill),o.setAttribute("x",o.dataset.x),o.setAttribute("width",o.dataset.width);const n=e.homeFrameDom.querySelector("#topRightBlock");n.setAttribute("fill",n.dataset.fill),n.style.opacity=1,e.homeContentDom.querySelector("#homeClock").style.visibility="visible",e.homeContentDom.querySelector("#homeDate").style.visibility="visible",e.homeContentDom.querySelector("#homeConfig").style.opacity=0,e.homeContentDom.querySelector("#homeWindow").style.opacity=.4,e.configContentDom.removeAttribute("transform"),e.configContentDom.style.visibility="hidden",e.configContentDom.style.opacity=0,e.configContentDom.classList.remove("enabled"),e.homeContentDom.querySelector("#homeWindow").style.transform="translate(-250px,0)",ut(),Gi(),d3.select(e.shipFrameDom.querySelector("#shipMainTopLeftCorner")).transition("main").duration(400).on("start",(()=>{K("warningLow",0,0,0,.6),e.shipContentDom.style.transitionDuration="0.3s",e.shipContentDom.style.opacity=0,b(e.pageTimers,(()=>{e.shipContentDom.style.transitionDuration=null}),350),e.shipFrameDom.querySelector("#shipMsdBtns").style.opacity=0})).on("end",(()=>{ie(),me(),e.shipFrameDom.querySelector("#shipTopBar1c").style.opacity=0,e.shipFrameDom.querySelector("#shipFrame1e").style.opacity=0,e.shipFrameDom.querySelector("#shipClock").style.opacity=0,b(e.pageTimers,(()=>{e.shipFrameDom.querySelector("#shipTopBar1b").style.opacity=0,e.shipFrameDom.querySelector("#shipFrame1d").style.opacity=0,e.shipFrameDom.querySelector("#subTitle").style.opacity=0,b(e.pageTimers,(()=>{e.shipFrameDom.querySelector("#shipTitle").style.opacity=0,e.shipFrameDom.querySelector("#subTitleBar").style.opacity=0}),160)}),160),K("negative",0,.2,0,.25,1.1)})).transition("main").delay(480).duration(600).on("start",(()=>{const t=d3.transition().duration(600).ease(d3.easeCubic);K("executing",0,.4,0,.3),e.shipFrameDom.querySelector("#shipMainTopLeftCorner").setAttribute("fill",e.homeFrameDom.querySelector("#topLeftCorner").dataset.fill),d3.select(e.shipFrameDom.querySelector("#shipMainTopLeftCorner")).transition(t).attr("d",e.homeFrameDom.querySelector("#topLeftCorner").dataset.d);const o=e.homeFrameDom.querySelector("#homeBtn0").getBBox(),n=e.homeFrameDom.querySelector("#homeBtn2").getBBox();d3.select(e.shipFrameDom.querySelector("#shipFrame1a")).transition(t).attr("x",o.x).attr("y",o.y).attr("width",o.width).attr("height",n.y+n.height-o.y),d3.select(e.shipFrameDom.querySelector("#shipFrame1b")).transition(t).attr("y",e.shipFrameDom.querySelector("#shipFrame1c").getBBox().y).attr("height",0).on("end",(function(){this.style.opacity=0})),d3.select(e.shipFrameDom.querySelector("#shipFrame1c")).transition(t).style("opacity",0);const i=e.shipFrameDom.querySelector("#frameShipSub").getBBox().x-e.shipFrameDom.querySelector("#shipMainTopLeftCorner").getBBox().x;e.shipFrameDom.querySelector("#frameShipSub").style.transition=null,d3.select(e.shipFrameDom.querySelector("#frameShipSub")).transition(t).style("transform",`translate(${i}px,0)`).style("opacity",0),d3.select(e.shipFrameDom.querySelector("#shipTopBar1a")).transition(t).attr("x",e.homeFrameDom.querySelector("#homeTopBar").dataset.x).attr("width",e.homeFrameDom.querySelector("#homeTopBar").dataset.width)})).transition("main").delay(0).duration(300).on("start",(()=>{e.logDisplayDom.style.opacity=0,e.shipFrameDom.querySelector("#frameShipConfig").classList.add("blink2"),K("exitTask",0,0,0,.4,1.2)})).on("end",(()=>{e.shipFrameDom.querySelector("#frameShipConfig").classList.remove("blink2")})).transition("main").delay(30).duration(200).on("start",(()=>{e.shipFrameDom.querySelector("#frameShipConfig").style.transform="translate(800px, 0)",e.shipFrameDom.querySelector("#frameShipConfig").style.opacity=0,e.setPageState("home"),e.logPlaceholderDom=e.homeContentDom.querySelector("#log_placeholder"),Ni(),e.logDisplayDom.style.opacity=1,e.logDisplayDom.style.visibility="visible"})).on("end",(()=>{if(e.homeContentDom.querySelector("#homeWindow").style.transform=null,e.homeContentDom.querySelector("#homeWindow").style.visibility="visible",e.homeContentDom.querySelector("#homeWindow").style.opacity=null,K(p(["beepX2Upper","beepX1Up","beepX2Downer"]),.2,0,0,.7),e.homeFrameDom.style.visibility="visible",e.homeFrameDom.style.opacity=1,e.homeContentDom.style.opacity=1,e.homeContentDom.style.visibility="visible",b(e.pageTimers,(()=>{e.homeFrameDom.querySelectorAll('[id^="homeBtn"]').forEach((e=>{e.style.opacity=1}))}),300),0==ht){const t=e.homeFrameDom.querySelectorAll('[id^="homeBtn"]').length-1,o=e.homeFrameDom.querySelector(`[id^="homeBtn${t}"]`).getBBox(),n=e.homeFrameDom.querySelector('[id^="homeBtn0"]').getBBox().y;ht=o.y+o.height-n}d3.select(e.shipFrameDom.querySelector("#shipFrame1a")).transition().duration(400).attr("height",ht).style("opacity",0),e.homeContentDom.querySelector("#ringClock").style.opacity=1,e.homeContentDom.querySelector("#ringClock").style.visibility="visible",e.homeContentDom.querySelector("#homeConfig").style.visibility="visible",e.homeContentDom.querySelector("#homeConfig").style.opacity=.3,e.configContentDom.style.visibility="visible",e.configContentDom.style.opacity=.2})).transition("main").delay(300).duration(600).on("start",(()=>{e.homeFrameDom.querySelector("#frameTitleText").style.visibility="visible",e.homeFrameDom.querySelector("#frameTitleText").style.opacity=1,e.homeFrameDom.querySelector("#frameTitleText").classList.add("blink2"),e.homeContentDom.querySelector("#homeConfig").style.opacity=null,e.configContentDom.style.transitionDuration="0.6s",e.configContentDom.style.opacity=1,e.configContentDom.classList.add("enabled"),e.shipFrameDom.style.visibility="hidden",e.shipFrameDom.style.opacity=0,e.shipContentDom.style.opacity=0,e.shipContentDom.style.visibility="hidden",Oi("LD Main screen loaded","timePrefix")})).on("end",(()=>{e.homeFrameDom.querySelector("#frameTitleText").classList.remove("blink2"),e.configContentDom.style.transitionDuration=null,dt("home"),mt(),ie(),me(),e.pageStatus="home"})).transition("main").delay(2300).duration(0).on("start",(function(){Oi(Ui("home"))})),e.setDocumentCurrentPage("home")}function bt(){const e=lr();if("transitioning"==e.pageStatus)return;e.pageStatus="transitioning",d3.select(e.homeFrameDom.querySelector("#topLeftCorner")).interrupt(),e.pageTimers.forEach((e=>{clearTimeout(e)})),e.pageTimers=[],e.jwstStatus&&nt(),e.bufferTimeStatus&&Oe(),mi(),ui(document.querySelector("#msdContainer > svg #shipClock tspan"),null,"noRingClock");const t=e.homeContentDom.querySelector("#ringClock");d3.select(t).interrupt(),t.style.opacity=0,setTimeout((()=>{t.style.visibility="hidden"}),600),Oi("Switching to USS Cerritos MAP","timePrefix");const o=e.shipFrameDom.querySelector("#shipMainTopLeftCorner");o.setAttribute("fill",o.dataset.fill),o.setAttribute("d",o.dataset.d);const n=e.shipFrameDom.querySelector("#shipTopBar1a");n.setAttribute("fill",n.dataset.fill),n.setAttribute("x",n.dataset.x),n.setAttribute("width",n.dataset.width),e.shipFrameDom.querySelector("#shipTitle").style.opacity=0,e.shipFrameDom.querySelector("#shipTopBar1b").style.opacity=null;const i=e.shipFrameDom.querySelector("#shipTopBar1c");i.setAttribute("fill",i.dataset.fill),i.style.opacity=null;const r=e.shipFrameDom.querySelector("#shipFrame1a");r.setAttribute("x",r.dataset.x),r.setAttribute("y",r.dataset.y),r.setAttribute("width",r.dataset.width),r.setAttribute("height",r.dataset.height),r.style=null;const s=e.shipFrameDom.querySelector("#shipFrame1b");s.setAttribute("y",s.dataset.y),s.setAttribute("height",s.dataset.height),s.style=null,e.shipFrameDom.querySelector("#shipFrame1c").style=null,e.shipFrameDom.querySelector("#subTitleBar").style.opacity=null,e.shipFrameDom.querySelector("#subTitle").style.opacity=null,e.shipFrameDom.querySelector("#shipFrame1d").style.opacity=null,e.shipFrameDom.querySelector("#shipClock").style.opacity=null,e.shipFrameDom.querySelector("#shipFrame1e").style.opacity=null,e.shipFrameDom.querySelector("#shipMsdBtns").style.opacity=0,e.homeFrameDom.querySelectorAll('[id^="tmpFrameHome1"]').forEach((e=>{e.style.visibility="hidden",e.style.opacity=0,e.setAttribute("x",e.dataset.x),e.setAttribute("y",e.dataset.y),e.setAttribute("width",e.dataset.width),e.setAttribute("height",e.dataset.height)}));const a=e.shipFrameDom.querySelector("#frameShipConfig");a.style.transform=null,a.style.opacity=null,a.classList.remove("configsEnabled"),Xi(),ut(),e.homeFrameDom.querySelector("#frameTitleText").style.opacity=.4,K("beepX2Downer",0,0,0,.8),d3.select(e.homeFrameDom.querySelector("#topLeftCorner")).transition("main").delay(600).duration(300).on("start",(()=>{e.homeContentDom.querySelector("#homeConfig").style.visibility="hidden",e.homeContentDom.querySelector("#homeWindow").style.visibility="hidden",e.configContentDom.style.visibility="hidden",e.configContentDom.style.opacity=0,e.configContentDom.classList.remove("enabled"),e.configContentDom.setAttribute("transform",e.configContentDom.dataset.shipTransform),K("shortRandomBeep",0,0,0,.3)})).on("end",(()=>{e.homeContentDom.querySelector("#homeClock").style.visibility="hidden"})).transition("main").delay(150).duration(400).on("start",(()=>{e.homeContentDom.querySelector("#homeDate").style.visibility="hidden"})).on("end",(()=>{e.homeFrameDom.querySelectorAll('[id^="tmpFrameHome1"]').forEach((e=>{e.style.opacity=null,e.style.visibility="visible"})),e.homeFrameDom.querySelectorAll('[id^="homeBtn"]').forEach((e=>{e.style.opacity=0}))})).transition("main").delay(150).duration(400).on("start",(function(){this.setAttribute("fill",e.shipFrameDom.querySelector("#shipMainTopLeftCorner").dataset.fill),e.homeFrameDom.querySelector("#homeTopBar").setAttribute("fill",e.shipFrameDom.querySelector("#shipTopBar1a").dataset.fill),e.homeFrameDom.querySelector("#topRightBlock").setAttribute("fill",e.shipFrameDom.querySelector("#shipTopBar1c").dataset.fill),Oi("loading MSD / Master System Display","timePrefix"),K("affirmative",0,0,0,.3)})).transition("main").delay(200).duration(550).on("start",(function(){const t=d3.transition().duration(500).ease(d3.easeCubicOut);d3.select(this).transition(t).attr("d",e.shipFrameDom.querySelector("#shipMainTopLeftCorner").getAttribute("d"));const o=e.shipFrameDom.querySelector("#shipFrame1a").getBBox();d3.select(e.homeFrameDom.querySelector("#tmpFrameHome1a")).transition(t).attr("x",o.x).attr("y",o.y).attr("width",o.width).attr("height",o.height);const n=e.shipFrameDom.querySelector("#shipFrame1b").getBBox();d3.select(e.homeFrameDom.querySelector("#tmpFrameHome1b")).transition(t).attr("x",n.x).attr("y",n.y).attr("width",n.width).attr("height",n.height);const i=e.shipFrameDom.querySelector("#shipFrame1c").getBBox();d3.select(e.homeFrameDom.querySelector("#tmpFrameHome1c")).transition(t).attr("x",i.x).attr("y",i.y).attr("width",n.width).attr("height",n.width);const r=e.shipFrameDom.querySelector("#shipTopBar1a").getBBox(),s=e.shipFrameDom.querySelector("#shipTopBar1b").getBBox(),a=e.homeFrameDom.querySelector("#homeTopBar");a.style.transition="none",d3.select(a).transition(t).attr("x",r.x).attr("width",s.x+s.width-r.x),e.homeFrameDom.querySelector("#frameTitleText").style.visibility="hidden",e.homeFrameDom.querySelector("#topRightBlock").style.opacity=0,K("warningHigh",0,0,0,.2)})).on("end",(()=>{e.logDisplayDom.style.opacity=0})).transition("main").delay(200).duration(400).on("start",(()=>{e.logDisplayDom.style.visibility="hidden",e.logPlaceholderDom=e.shipFrameDom.querySelector("#logsConfig_placeholder"),e.setPageState("ship"),e.homeContentDom.style.opacity=0,e.homeContentDom.style.visibility="hidden",e.homeFrameDom.style.opacity=0,e.homeFrameDom.style.visibility="hidden",e.shipFrameDom.querySelector("#frameShipMain").style.opacity=1,e.shipFrameDom.querySelector("#frameShipConfig").style.opacity=0,e.shipFrameDom.querySelector("#frameShipSub").style.opacity=0,e.shipFrameDom.querySelector("#frameShipSub").style.transform="translate(-100px, 0)",e.shipContentDom.style.opacity=0,e.shipContentDom.style.visibility="visible",e.shipFrameDom.style.opacity=1,e.shipFrameDom.style.visibility="visible",e.shipFrameDom.querySelector("#subTitle").classList.add("blink2"),setTimeout((()=>{e.shipFrameDom.querySelector("#subTitle").classList.remove("blink2")}),800),K("beepX3Down",0,0,0,.3)})).on("end",(()=>{e.shipFrameDom.querySelector("#frameShipSub").style.transition="opacity 1s ease-in, transform 0.8s ease-out",e.shipFrameDom.querySelector("#frameShipSub").style.opacity=1,e.shipFrameDom.querySelector("#frameShipSub").style.transform=null,e.shipFrameDom.querySelector("#shipTitle").style.opacity=null,e.shipFrameDom.querySelector("#shipTitle").classList.add("blink1"),Ni(),e.shipFrameDom.querySelector("#frameShipConfig").style.opacity=1,e.logDisplayDom.style.opacity=1,e.logDisplayDom.style.visibility="visible",e.logDisplayDom.style.opacity=1,Oi("USS Cerritos MSD loading complete","timePrefix"),K("exitTask",.2,0,0,.4)})).transition("main").delay(600).duration(1e3).on("start",(()=>{K("powerUp",0,.35,0,.5,p([1.3,1.4,.85])),e.shipContentDom.style.opacity=1,e.shipFrameDom.querySelector("#shipTitle").classList.remove("blink1"),ue(),dt("ship"),mt()})).on("end",(()=>{e.shipFrameDom.querySelector("#shipMsdBtns").style.opacity=1,K("shortRandomBeep",0,0,0,.3),K("beepX2Up",.4,0,0,.1),K("beepX3Downer",.8,0,0,.2),e.homeFrameDom.querySelectorAll('[id^="tmpFrameHome1"]').forEach((e=>{e.style.visibility="hidden"})),e.homeContentDom.style.visibility="hidden",e.homeFrameDom.style.visibility="hidden",document.documentElement.dataset.tinyShips="",qe(),e.pageStatus="ship"})).transition("main").delay(2300).duration(0).on("start",(function(){Oi(Ui("map"))})),e.setDocumentCurrentPage("ship")}function St(){const e=lr();e.setPageState("remote"),e.setDocumentCurrentPage("remote"),e.pageStatus="remote"}const Ct=[];let At,vt,Tt,Dt,wt,Et,xt,kt,Lt,Bt,It,qt,Rt,Ft,Mt,Nt,jt,$t,Pt,Ot,Ut,Ht,_t,Gt,Xt,Vt,Wt,Yt,zt,Zt,Qt,Jt,Kt,eo,to,oo,no,io,ro,so,ao,lo,co,uo,mo,yo,po,ho,go,fo,bo,So,Co,Ao,vo,To,Do,wo,Eo,xo,ko,Lo,Bo,Io,qo,Ro,Fo,Mo,No,jo,$o,Po,Oo,Uo,Ho,_o,Go,Xo,Vo,Wo,Yo,zo,Zo=0,Qo=0,Jo=0,Ko=0,en="",tn=!1,on=!1;const nn={ecg:null,eeg:null,etc:null},rn={ecg:null,eeg:null,etc:null},sn={ecg:!1,eeg:!1,etc:!1},an={ecg:!0,eeg:!0,etc:!0},ln={};let cn=0,dn=0,un=0,mn=!0;function yn(e=null){let t;t=!0===e||!1!==e&&!("sickbay"in document.documentElement.dataset),t?bn():pn()}function pn(){Sn(),Oi("Exited from Sickbay","timePrefix")}function hn(){Sn(),bn()}function gn(){const e=lr();Yo=e.homeFrameDom.querySelector("#frameTitleText"),zo=Yo.querySelector("tspan"),Po=e.sickbayContentDom.querySelector("#patient"),Po.dataset.fill=Po.getAttribute("fill"),Oo=e.sickbayContentDom.querySelector("#ptScan"),Oo.dataset.opacity=Oo.getAttribute("opacity"),Oo.style.transition="all 0.4s",Uo=Oo.querySelectorAll('[id^="ptScan"]'),Xo=e.sickbayContentDom.querySelector("#ptBodyTarget");const t=e.sickbayContentDom.querySelector("#caduceus"),o=t.getBBox();t.style.setProperty("--cx",`${o.x+.5*o.width}px`),t.style.setProperty("--cy",`${o.y+.5*o.height}px`);const n=e.svg1.querySelector("defs"),i=document.createElementNS("http://www.w3.org/2000/svg","clipPath");i.setAttribute("id","patientClipPathDef"),n.appendChild(i),i.appendChild(e.sickbayContentDom.querySelector("#patientClipPath")),Po.setAttribute("clip-path","url(#patientClipPathDef)"),e.sickbayContentDom.querySelectorAll('[id^="quantumLine"').forEach((e=>{e.setAttribute("clip-path","url(#patientClipPathDef)")})),e.sickbayContentDom.querySelectorAll('[id^="patientClipPath_"]').forEach((e=>{i.appendChild(e)}));const r=e.sickbayContentDom.querySelector("#ecg0"),s=e.sickbayContentDom.querySelector("#ecg1");let a=r.getBBox(),l=a.x,c=a.y+.5*a.height;n.style.setProperty("--defaultSickbayGraphTranslatePlus",`translate(${l}px, ${c}px)`),n.style.setProperty("--defaultSickbayGraphTranslateMinus",`translate(${-1*l}px, ${-1*c}px)`);const d=document.createElementNS("http://www.w3.org/2000/svg","clipPath");d.setAttribute("id","ecg0ClipPathDef"),n.appendChild(d),d.appendChild(r),e.sickbayContentDom.querySelector("#ecg0gradientBox").setAttribute("clip-path","url(#ecg0ClipPathDef)"),e.sickbayContentDom.querySelector("#ecg0gradientBox").setAttribute("fill","url(#gradientAni_ecg0)");const m=document.createElementNS("http://www.w3.org/2000/svg","clipPath");m.setAttribute("id","ecg1ClipPathDef"),n.appendChild(m),m.appendChild(s),e.sickbayContentDom.querySelector("#ecg1gradientBox").setAttribute("clip-path","url(#ecg1ClipPathDef)"),e.sickbayContentDom.querySelector("#ecg1gradientBox").setAttribute("fill","url(#gradientAni_ecg1)"),e.svg1.querySelector("#gradientAni_ecg0").dataset.type="ecg";const y=e.sickbayContentDom.querySelector("#eeg0"),p=e.sickbayContentDom.querySelector("#eeg1"),h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");h.setAttribute("id","eeg0ClipPathDef"),n.appendChild(h),h.appendChild(y),e.sickbayContentDom.querySelector("#eeg0gradientBox").setAttribute("clip-path","url(#eeg0ClipPathDef)"),e.sickbayContentDom.querySelector("#eeg0gradientBox").setAttribute("fill","url(#gradientAni_eeg0)");const g=document.createElementNS("http://www.w3.org/2000/svg","clipPath");g.setAttribute("id","eeg1ClipPathDef"),n.appendChild(g),g.appendChild(p),e.sickbayContentDom.querySelector("#eeg1gradientBox").setAttribute("clip-path","url(#eeg1ClipPathDef)"),e.sickbayContentDom.querySelector("#eeg1gradientBox").setAttribute("fill","url(#gradientAni_eeg1)"),e.svg1.querySelector("#gradientAni_eeg0").dataset.type="eeg";const b=e.sickbayContentDom.querySelector("#etc0"),S=e.sickbayContentDom.querySelector("#etc1"),C=document.createElementNS("http://www.w3.org/2000/svg","clipPath");C.setAttribute("id","etc0ClipPathDef"),n.appendChild(C),C.appendChild(b),e.sickbayContentDom.querySelector("#etc0gradientBox").setAttribute("clip-path","url(#etc0ClipPathDef)"),e.sickbayContentDom.querySelector("#etc0gradientBox").setAttribute("fill","url(#gradientAni_etc0)");const A=document.createElementNS("http://www.w3.org/2000/svg","clipPath");A.setAttribute("id","etc1ClipPathDef"),n.appendChild(A),A.appendChild(S),e.sickbayContentDom.querySelector("#etc1gradientBox").setAttribute("clip-path","url(#etc1ClipPathDef)"),e.sickbayContentDom.querySelector("#etc1gradientBox").setAttribute("fill","url(#gradientAni_etc1)"),e.svg1.querySelector("#gradientAni_etc0").dataset.type="etc",c=a.y+a.height,C.style.setProperty("--defaultSickbayGraphTranslatePlus",`translate(${l}px, ${c}px)`),C.style.setProperty("--defaultSickbayGraphTranslateMinus",`translate(${-1*l}px, ${-1*c}px)`),A.style.setProperty("--defaultSickbayGraphTranslatePlus",`translate(${l}px, ${c}px)`),A.style.setProperty("--defaultSickbayGraphTranslateMinus",`translate(${-1*l}px, ${-1*c}px)`),e.sickbayContentDom.querySelectorAll("#eegGradientBox, #ecgGradientBox, #etcGradientBox").forEach((e=>{e.style.opacity=0,e.style.display="none"})),["ecg","eeg","etc"].forEach((t=>{ln[t]={},ln[t].start=e.sickbayContentDom.querySelector(`#${t}IndicatorStart`),ln[t].end=e.sickbayContentDom.querySelector(`#${t}IndicatorEnd`)})),Vo=e.svg1.querySelector("#gradientBloodFlow"),Wo=Vo.querySelectorAll("animate"),Xo.dataset.currentIndex=0;const v=Xo.querySelector("circle");Ct.push({name:"Heart",x:Number(v.getAttribute("cx")),y:Number(v.getAttribute("cy"))}),e.sickbayContentDom.querySelectorAll('[id^="ptBodyTargetPreset"').forEach((e=>{const t=f(e.id.split("_")[1]);"Heart"!=t&&Ct.push({name:t,x:Number(e.getAttribute("x")),y:Number(e.getAttribute("y"))}),e.remove()})),e.sickbayContentDom.querySelectorAll('text[id^="data"]').forEach((e=>{e.setAttribute("text-anchor","middle")})),wt=e.sickbayContentDom.querySelector("#dataBp1 tspan"),Et=e.sickbayContentDom.querySelector("#dataBp2s tspan"),xt=e.sickbayContentDom.querySelector("#dataBp2d tspan"),kt=e.sickbayContentDom.querySelector("#dataBp3s tspan"),Lt=e.sickbayContentDom.querySelector("#dataBp3d tspan"),Bt=e.sickbayContentDom.querySelector("#dataBarHeart tspan"),jt=e.sickbayContentDom.querySelector("#dataBarResp tspan"),Xt=e.sickbayContentDom.querySelector("#dataBarNeuro tspan"),Qt=e.sickbayContentDom.querySelector("#btnCoreTemp"),no=e.sickbayContentDom.querySelector("#btnGlucose"),co=e.sickbayContentDom.querySelector("#btnAbg"),go=e.sickbayContentDom.querySelector("#btnO2Sat"),vo=e.sickbayContentDom.querySelector("#btnTroponin"),Lo=e.sickbayContentDom.querySelector("#btnBnp"),Jt=e.sickbayContentDom.querySelector("#dataCoreTemp tspan"),io=e.sickbayContentDom.querySelector("#dataGlucose tspan"),uo=e.sickbayContentDom.querySelector("#dataAbg tspan"),fo=e.sickbayContentDom.querySelector("#dataO2Sat tspan"),To=e.sickbayContentDom.querySelector("#dataTroponin tspan"),Bo=e.sickbayContentDom.querySelector("#dataBnp tspan"),Jt.style.animationDuration=u(1.5,5).toFixed(1)+"s",io.style.animationDuration=u(1.5,5).toFixed(1)+"s",uo.style.animationDuration=u(1.5,5).toFixed(1)+"s",fo.style.animationDuration=u(1.5,5).toFixed(1)+"s",To.style.animationDuration=u(1.5,5).toFixed(1)+"s",Bo.style.animationDuration=u(1.5,5).toFixed(1)+"s",Ho=e.sickbayContentDom.querySelector("#nervousSystem"),_o=e.sickbayContentDom.querySelector("#circulatorySystem"),Go=e.sickbayContentDom.querySelector("#circulatorySystemVulcan"),Ho.style.display="none",_o.style.display="none",Go.style.display="none",_o.setAttribute("fill","url(#gradientBloodFlow_outward)"),Go.setAttribute("fill","url(#gradientBloodFlow_outward)"),No=e.sickbayContentDom.querySelector("#vsBarHeart"),jo=e.sickbayContentDom.querySelector("#vsBarResp"),$o=e.sickbayContentDom.querySelector("#vsBarNeuro"),fn(No,"bottom"),fn(jo,"bottom"),fn($o,"bottom"),e.sickbayContentDom.onpointerdown=function(e){switch(e.target.getAttribute("id")){case"hitarea_btnECG":qn("ecg");break;case"hitarea_btnEEG":qn("eeg");break;case"hitarea_btnETC":qn("etc");break;case"hitarea_btnNeuroScan":vn();break;case"hitarea_btnCircScan":Tn();break;case"hitarea_btnSickbayYtEnd":yt();break;case"hitarea_btnQuantumSignature":xn();break;case"hitarea_btnQuarantine":kn();break;case"hitarea_btnRnaAnalysis":Ln();break;case"hitarea_btnAudioSickbay":Y(),tr(e.target,"blink2");break;case"hitarea_sickbay":hn();break;case"hitarea_exitSickbay":pn()}},Po.onpointerdown=function(){Bn()},e.sickbayContentDom.querySelector('#sickbayFrame1 [id$="colorOverride"]').onpointerdown=function(){mn=!mn,mn?(document.documentElement.dataset.colorSickbay="",Oi("Sickbay with [aqua color scheme] is enabled from now on")):(delete document.documentElement.dataset.colorSickbay,Oi("[aqua color scheme] has been disabled for Sickbay from now on")),K("beepX1Down",0,0,0,.15)}}function fn(e,t="center"){let o,n,i=e.getBBox();"bottom"===t?(o=i.x+.5*i.width,n=i.y+i.height):(o=i.x+.5*i.width,n=i.y+.5*i.height),e.style.setProperty("--defaultTranslatePlus",`translate(${o}px, ${n}px)`),e.style.setProperty("--defaultTranslateMinus",`translate(${-1*o}px, ${-1*n}px)`)}function bn(){const e=lr();document.documentElement.dataset.sickbay="",mn&&(document.documentElement.dataset.colorSickbay=""),e.sickbayStatus=!0,e.jwstStatus&&nt();const t=e.sickbayContentDom.querySelectorAll('#sickbayFrame1 [id^="sickbayFrame1"]');t.forEach((e=>{e.classList.add("sickbayElementInit"),e.classList.remove("animationFadeIn")}));const o=e.sickbayContentDom.querySelector("#ptInfo");o.classList.add("sickbayElementInit"),o.classList.remove("animationFadeIn"),Po.classList.add("sickbayElementInit"),Po.classList.remove("animationFadeIn2"),Uo.forEach((e=>{e.classList.add("sickbayElementInit"),e.classList.remove("animationFadeIn")}));const n=e.sickbayContentDom.querySelector("#btnNeuroScan");n.classList.add("sickbayElementInit"),n.classList.remove("animationFadeIn");const i=e.sickbayContentDom.querySelector("#btnCircScan");i.classList.add("sickbayElementInit"),i.classList.remove("animationFadeIn");const r=e.sickbayContentDom.querySelector("#bpFrame");r.classList.add("sickbayElementInit"),r.classList.remove("animationFadeIn"),r.style.transform="translate(-200px,0)",r.style.transition="transform 0.8s ease-out";const s=e.sickbayContentDom.querySelector("#medicalMonitor");s.classList.add("sickbayElementInit"),s.classList.remove("animationFadeIn");const a=e.sickbayContentDom.querySelector("#medicalData");a.classList.add("sickbayElementInit"),a.classList.remove("animationFadeIn2");const l=e.sickbayContentDom.querySelector("#miscFrame");l.classList.add("sickbayElementInit"),l.classList.remove("animationFadeIn");const g=e.sickbayContentDom.querySelector("#vitalBars");g.style.opacity=.3,Ho.style.display="none",_o.style.display="none",Go.style.display="none",Qt.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),no.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),co.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),go.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),vo.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),Lo.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),Bn("noLog"),pe(),function(){const e=lr();let t=c(1,10);t==un&&(t=(un+3)%10+1);un=t;const o=Math.random();en="HUMAN",o<.23?en=p(["BAJORAN","HM•BAJORAN","TRILL","ORION","BOLIAN","RIGELIAN"]):o<.88&&(en=p(["Vulcan","HM•Vulcan","RM•Vulcan","Andorian","Ferengi","HM•Klingon","Klingon","Cardassian","Caitian","Tamarian"]));e.svg1.querySelectorAll('defs [id^="patientClipPath_"]').forEach((e=>{e.style.display=en.toLowerCase().includes(e.id.toLowerCase().split("_")[1])?null:"none"})),e.sickbayContentDom.querySelector("#ptId tspan").textContent=h(c(1,99),2)+"."+h(c(47,9999),4)+" / "+en.toUpperCase();const n=Math.random()<.5?p([p(["HEART ATTACK","HEART FLUTTER","ARTERIAL RUPTURE","BIOTEMPORAL FLUX","REVERSE AGING","NEUROLYTIC PATHOGEN","NAOPROBE VIRUS"]),`${p(["CELLULAR","DNA","RNA","SOMATIC"])} ${p(["ANOMALY","MUTATION","COLLAPSE"])}`,p(["HEAT EXHAUSTION","HEAT STROKE","HYPOTHERMIA","COMA","RADIATION EXPOSRUE","HAIR LOSS","HOT FLASH","TEMPORAL NARCOSIS","BENDII SYNDROME",`${p(["PLASMA","PHASER"])} BURN, ${c(1,3)}°`]),`${p(["CARDIOGENIC","HYPOVOLEMIC","ANAPHYLACTIC","SEPTIC","NEUROGENIC","VAHAR'AI","CYTOTOXIC"])} SHOCK`]):function(){const e=p(["L.","R."]);return p([p(["ALIEN WORM INFECTION","MORPHOGENIC VIRUS","PHAGE","ANDORIAN SHINGLES","NIGHT TERROR"]),p(["RESPIRATORY DISTRESS","ANAPHYLAXIS","HYPOTHERMIA","COMA","INTERNAL BLEEDING","AMNESIA","PA'NAR SYNDROME","IRUMODIC SYNDROME","URODELAN FLU","SONIC BURP"]),`${e} ${p(["PNEUMOTHORAX","HEMOTHORAX","HEMONEUMOTORAX","HEART FAILURE"])}`,`${e} ${p(["HUMERUS FRACTURE","ULNA FRACTURE","FEMUR FRACTURE","TIB-FIB FRACTURE","MANDIBULAR FX","PELVIC FRACTURE"])}`])}();e.sickbayContentDom.querySelector("#ptPriorityDx tspan").textContent=`${c(1,5)}• ${n}`,e.sickbayContentDom.querySelector("#ptAge tspan").textContent=c(21,69)+" Y • "+c(0,11)+" M • "+c(0,29)+" D"+(Math.random()<.67?"":p([" / AUG"," / DUP"," / XB"," / GEN"," / SP"," / ENH"," / MIR"," / MU"," / CHR"]));const i=.1*c(550,970),r=.1*c(1550,2020),s=i/Math.pow(.01*r,2);e.sickbayContentDom.querySelector("#ptBodyIndex tspan").textContent=`${i.toFixed(1)} KG • ${r.toFixed(1)} CM • ${s.toFixed(1)} BMI`,e.sickbayContentDom.querySelector("#ptNeuroDnaTag tspan").textContent=p(["A","B","C","D","E","F","G"])+p(["W","X","Z","Q","R","H"])+y(1)+" / "+y(4)+"•"+y(4)+"•"+y(4)+"•"+y(4),e.sickbayContentDom.querySelector("#medicalInsurance tspan").textContent=`MEDICAL.${c(120,980)} • TRAUMA.${c(120,980)}`}(),function(){At=c(94,152),vt=c(At-46,At-24),Tt=c(4,16),Dt=0,Nt=Math.random()>.4,Ft=u(84,Nt?100:170),Rt=Nt?u(45,72):u(Ft-40,Ft-20),It=u(Rt+4,Ft-4),Mt=Nt?.1*c(6,10):.1*c(2,10),qt=0,Dn(),Gt=Math.random()>.25,Gt?(Ut=20,Ot=10):Math.random()<.5?(Ut=39,Ot=20):(Ut=13,Ot=4);$t=u(Ot+1,Ut-1),Gt?(Ht=.1*c(0,2),_t=.1*c(8,10)):(Ht=.1*c(1,4),_t=.1*c(6,10));Pt=0,wn(),Yt=301,Wt=47,Vt=c(Wt,Yt),Zt=u(.3,1),zt=Math.random()<.67?u(0,Zt):u(Zt-.3,Zt-.1),En(),oo=u(35,40),to=oo-u(1.6,3),Kt=u(to+1,oo-1),eo=0,Math.random()<.67?(lo=123,ao=78):(lo=u(100,220),ao=lo-50);ro=u(ao,lo),so=0,ho=u(7.43,7.6),po=u(7.2,7.37),mo=u(po+.02,ho-.02),yo=0,Ao=Math.random()<.42?100:u(90,100),Co=Ao-4,bo=u(Co+2,Ao-1),So=0,ko=Math.random()<.25,xo=ko?u(3,9.8):u(.015,.039),Eo=ko?u(.3,.6*xo):0,Do=u(Eo,xo),wo=0,Mo=Math.random()<.25,Fo=Mo?u(700,900):u(60,125),Ro=Mo?u(450,550):u(6,30),Io=u(Ro,Fo),qo=0}(),dn=performance.now(),Ko=setInterval((()=>{cn=0,function(){const e=At+Dt,t=vt+Dt;Et.textContent=e,xt.textContent=t,kt.textContent=e-c(8,14),Lt.textContent=t-c(8,14),wt.textContent=`${e-c(15,23)} / ${t-c(15,23)}`,Dt+=c(-3,3),Math.abs(Dt)>Tt&&(Dt=Tt*Math.sign(Dt));Kt=d(Kt+eo,to,oo),setTimeout((()=>{Jt.textContent=Kt.toFixed(1);Qt.classList.toggle("alert",Kt<=36||Kt>=38)&&cn++}),107*m(10)),eo=u(-.067,.067),ro=d(ro+so,ao,lo),setTimeout((()=>{io.textContent=ro<100?ro.toFixed(1):ro.toFixed(0);no.classList.toggle("alert",ro<70||ro>=120)&&cn++}),107*m(10)),so=Math.random()<.5?u(-.6,.6):u(-1.3,1.3),mo=d(mo+yo,po,ho),setTimeout((()=>{uo.textContent=mo.toFixed(2);co.classList.toggle("alert",mo<7.354||mo>=7.455)&&cn++}),107*m(10)),yo=u(-.006,.006),bo=d(bo+So,Co,Ao),setTimeout((()=>{fo.textContent=100==bo?bo.toFixed(0):bo.toFixed(1);go.classList.toggle("alert",bo<95)&&cn++}),107*m(10)),So=Math.random()<.5?u(-.3,.3):u(-.6,.6),Do=d(Do+wo,Eo,xo),setTimeout((()=>{To.textContent=Do.toFixed(2);vo.classList.toggle("alert",Do>=.4)&&cn++}),107*m(10)),wo=ko?u(-.17,.17):u(-.005,.005),Io=d(Io+qo,Ro,Fo),setTimeout((()=>{Bo.textContent=Io<10?Io.toFixed(2):Io<100?Io.toFixed(1):Io.toFixed(0);Lo.classList.toggle("alert",Io>450)&&cn++}),107*m(10)),qo=Mo?u(-5,5):u(-2,2)}(),function(){It=d(It+qt,Rt,Ft),Math.random()<.3&&(Mt=Nt?.1*c(6,10):.1*c(2,10));setTimeout((()=>{const e=It<60||It>=120;e&&cn++,Dn(e)}),247*m(8)),qt=It>100?c(-6,6):c(-3,3),$t=d($t+Pt,Ot,Ut),Math.random()<.2&&(Ht=Gt?.1*c(0,2):.1*c(1,4));Math.random()<.2&&(_t=Gt?.1*c(8,10):.1*c(6,10));if(setTimeout((()=>{const e=$t<10||$t>24;e&&cn++,wn(e)}),247*m(8)),Pt=Gt?u(-1,1):u(-2.5,2.5),Math.random()<.67){Vt=c(Wt,Yt);const e=Vt<60;e&&cn++,Zt=u(.3,1),zt=Math.random()<.67&&Vt>150?u(0,Zt):u(Zt-.3,Zt-.1),setTimeout((()=>{En(e)}),247*m(8))}else{Vt<60&&cn++}}(),.001*(performance.now()-dn)>17&&setTimeout((()=>{cn>=4&&(Oi(`warning: ${cn} abnormal med data points detected`,"timePrefix"),dn=performance.now())}),2e3)}),2500),Cn(),clearTimeout(Zo),e.logDisplayDom.style.visibility="hidden",e.logDisplayDom.style.opacity=0,e.logPlaceholderDom=e.sickbayContentDom.querySelector("#log_placeholderSickbay"),Ni(),Zo=setTimeout((()=>{e.logDisplayDom.style.visibility=null,e.logDisplayDom.style.opacity=1}),600),Yo.style.opacity=0,ut();const f=e.sickbayContentDom.querySelector("#caduceus");f.classList.add("largeEmblem"),d3.select(e.svg1.querySelector("#homeClock")).transition().delay(350).duration(600).attr("transform","translate(675 1855) scale(1) translate(-675 -1815)"),Oi(`accessing Sickbay • Biobed ${un} info`,"timePrefix"),d3.select("#msdContainer svg #sickbayFrame1").transition().delay(300).duration(500).on("start",(function(){t.forEach((e=>{const t=parseInt(e.id.split("_")[1]);e.classList.remove("sickbayElementInit"),e.classList.add("animationFadeIn"),e.style.animationDelay=150*t+"ms"}))})).on("end",(function(){f.style.opacity=0,f.style.transition="opacity .4s",zo.textContent=`SICKBAY • BIOBED ${un}`,Yo.style.opacity=1,K("shortRandomBeep",0,0,0,.2),o.classList.remove("sickbayElementInit"),o.classList.add("animationFadeIn")})).transition().delay(400).duration(0).on("start",(function(){f.style.opacity=null,f.style.transition=null,f.classList.remove("largeEmblem"),K("warningHigh",0,0,0,.3);const t=e.homeFrameDom.querySelector("#homeTopBar"),o=zo.getBBox().x-Number(t.dataset.x)-20;d3.select(t).transition().duration(400).attr("width",o.toFixed(2))})).transition().delay(400).duration(200).on("start",(function(){Po.classList.remove("sickbayElementInit"),Po.classList.add("animationFadeIn2")})).on("end",(function(){tr(Po,"blink2"),Oo.setAttribute("opacity",1),K("powerUp",0,.35,0,.5,p([1.3,1.4,.85])),An(),n.classList.remove("sickbayElementInit"),n.classList.add("animationFadeIn"),n.style.animationDelay="700ms",i.classList.remove("sickbayElementInit"),i.classList.add("animationFadeIn"),i.style.animationDelay="700ms"})).transition().delay(800).duration(600).on("start",(function(){Oo.setAttribute("opacity",Oo.dataset.opacity),r.classList.remove("sickbayElementInit"),r.classList.add("animationFadeIn"),r.style.animationDuration="1.2s",r.style.transform=null})).on("end",(function(){K("beepX3Downer",0,0,0,.3),l.classList.remove("sickbayElementInit"),l.classList.add("animationFadeIn"),Xo.classList.add("blink2"),Math.random()<.25&&kn(!0,null,"mute"),Math.random()<.25&&Ln(!0,null,"mute")})).transition().delay(900).duration(300).on("start",(function(){dt("sickbay"),mt(),K("beepX2Upper",0,0,0,.6),s.classList.remove("sickbayElementInit"),s.classList.add("animationFadeIn"),Rn("mute")})).on("end",(function(){K("exitTask",0,0,0,.3),a.classList.remove("sickbayElementInit"),a.classList.add("animationFadeIn2"),g.style.opacity=1;const e=Math.random();e<.33?Tn(!0,"noLog"):e<.67&&vn(!0,"noLog")})).transition().delay(1e3).duration(3100).on("start",(function(){Oi(`${zo.textContent} medical diagnostic interface is ready`)})).on("end",(function(){Oi(Ui("sickbay"))}))}function Sn(){const e=lr();delete document.documentElement.dataset.sickbay,delete document.documentElement.dataset.colorSickbay,e.sickbayStatus=!1,d3.select("#msdContainer svg #sickbayFrame1").interrupt(),ye(),vn(!1,"noLog","mute"),Tn(!1,"noLog","mute"),clearTimeout(Qo),clearTimeout(Jo),Po.setAttribute("fill",Po.dataset.fill),clearInterval(Ko),d3.select(e.svg1.querySelector("#homeClock")).transition().delay(300).duration(500).attr("transform","translate(0 0) scale(1)"),xn(!1,"noLog","mute"),Ln(!1,"noLog","mute"),kn(!1,"noLog","mute"),qn("ecg",!1,"noLog","mute"),qn("eeg",!1,"noLog","mute"),qn("etc",!1,"noLog","mute"),Xo.removeAttribute("class"),dt("home"),mt();const t=e.homeFrameDom.querySelector("#homeTopBar");Yo.style.opacity=0,d3.select(t).transition().duration(400).attr("width",t.dataset.width).on("end",(function(){zo.textContent=zo.dataset.text})).transition().delay(400).duration(0).on("start",(function(){Yo.style.opacity=1})),clearTimeout(Zo),e.logPlaceholderDom=e.homeContentDom.querySelector("#log_placeholder"),Ni(),e.logDisplayDom.style.visibility=null,e.logDisplayDom.style.opacity=1;const o=e.sickbayContentDom.querySelector("#caduceus");o.style.opacity=null,o.style.transition=null,o.classList.remove("largeEmblem"),K("beepX2Downer",0,0,0,.2)}function Cn(){Qo=setTimeout((()=>{!function(e=null){Math.random()<.67&&(Oo.setAttribute("opacity",1),An(),Xo.classList.remove("blink2"),setTimeout((()=>{Oo.setAttribute("opacity",Oo.dataset.opacity),Bn(),Xo.classList.add("blink2")}),900));tn||on||(clearTimeout(Jo),Po.setAttribute("fill",`url(#gradient${c(0,3)}_${p(["topToBottom","bottomToTop"])})`),Po.classList.remove("animationFadeIn2"),Jo=setTimeout((()=>{Po.setAttribute("fill",Po.dataset.fill),Po.classList.add("animationFadeIn2")}),3e3));if("mute"===e)return;Math.random()<.4?K("shortRandomBeep",0,0,0,.15):K(`beepX${c(1,3)}${p(["Up","Upper"])}`,0,0,0,.25)}(),Cn()}),c(8e3,15e3))}function An(){Uo.forEach((e=>{e.classList.remove("animationFadeIn")})),setTimeout((()=>{const e=m(5);Uo.forEach((t=>{const o=parseInt(t.getAttribute("id").slice(-1));t.classList.remove("sickbayElementInit"),t.classList.add("animationFadeIn");let n=0;switch(e){case 1:n=80*o;break;case 2:n=80*(Uo.length-o-1);break;case 3:n=120*Math.abs(o-Math.round(.5*Uo.length)+1);break;case 4:n=120*(Math.floor(.5*Uo.length)-Math.abs(o-Math.round(.5*Uo.length)+1));break;default:o==Uo.length-1?n=250:o>0&&(n=500)}t.style.animationDelay=n+"ms"}))}),0)}function vn(e=null,t=null,o=null){if(tn===e)return;const n=lr();let i;i=!0===e||!1!==e&&!tn,tn=i,i?(Ho.setAttribute("fill",`url(#gradient${c(1,3)}_${p(["topToBottom","bottomToTop"])})`),Ho.style.display=null,Tn(!1),"mute"!==o&&K(p(["beepX3Upper","affirmative"]),0,0,0,.4),"noLog"!==t&&Oi("Nervous System visualization enabled")):(Ho.style.display="none","mute"!==o&&K("beepX2Downer",0,0,0,.3)),n.sickbayContentDom.classList.toggle("neuroScan",i)}function Tn(e=null,t=null,o=null){if(on===e)return;const n=lr();let i;i=!0===e||!1!==e&&!on,on=i,i?(en.toLowerCase().includes("vulcan")?(Go.style.display=null,Vo.setAttribute("cx","43%"),Vo.setAttribute("cy","31%")):(_o.style.display=null,Vo.setAttribute("cx","55%"),Vo.setAttribute("cy","25%")),vn(!1),"mute"!==o&&K(p(["beepX3Upper","affirmative"]),0,0,0,.4),"noLog"!==t&&Oi("Arterial Circulatory System visualization enabled")):(_o.style.display="none",Go.style.display="none","mute"!==o&&K("beepX1Downer",0,0,0,.3)),n.sickbayContentDom.classList.toggle("circScan",i)}function Dn(e=!1){const t=lr();Bt.textContent=Math.round(It),Bt.classList.toggle("alert",e),t.sickbayContentDom.style.setProperty("--heartRateRounded",5*Math.floor(It/5)),No.style.setProperty("--strengthMax",Mt),Wo.forEach((e=>{e.setAttribute("dur",(60/It).toFixed(2)+"s")}))}function wn(e=!1){const t=lr();jt.textContent=Math.round($t),jt.classList.toggle("alert",e),t.sickbayContentDom.style.setProperty("--respRateRounded",3*Math.floor($t/3)),jo.style.setProperty("--strengthMin",Ht),jo.style.setProperty("--strengthMax",_t)}function En(e=!1){const t=lr();Xt.textContent=Math.round(Vt),Xt.classList.toggle("alert",e),t.sickbayContentDom.style.setProperty("--neuroRateRounded",10*Math.floor(Vt/10)),$o.style.setProperty("--strengthMin",zt),$o.style.setProperty("--strengthMax",Zt)}function xn(e=null,t=null,o=null){const n=lr();let i;i="boolean"==typeof e?n.sickbayContentDom.classList.toggle("quantumSignature",e):n.sickbayContentDom.classList.toggle("quantumSignature"),i?(n.sickbayContentDom.querySelectorAll('[id^="quantumLine"]').forEach((e=>{e.style.animationDuration=`${u(9,21).toFixed(1)}s, ${u(7,17).toFixed(1)}s`,e.style.animationDirection=p(["normal","reverse","alternate","alternate-reverse"])})),"mute"!==o&&K("longTask",0,0,0,.6),"noLog"!==t&&Oi("begin continuous monitoring of quantum signature data")):("mute"!==o&&K("shortRandomBeep",0,0,0,.3),"noLog"!==t&&Oi("quantum signature data monitoring terminated"))}function kn(e=null,t=null,o=null){const n=lr();let i;i="boolean"==typeof e?n.sickbayContentDom.classList.toggle("quarantine",e):n.sickbayContentDom.classList.toggle("quarantine"),i?("mute"!==o&&(K("warningHigh",0,0,0,.5),K("warningLow",.35,0,0,.4),K("warningLong",.75,0,0,.6)),"noLog"!==t&&Oi("warning: patient quarantined • Biobed force field established")):("mute"!==o&&K("shortRandomBeep",0,0,0,.3),"noLog"!==t&&Oi("quarantine status rescinded"))}function Ln(e=null,t=null,o=null){const n=lr();let i;i="boolean"==typeof e?n.sickbayContentDom.classList.toggle("rnaAnalysis",e):n.sickbayContentDom.classList.toggle("rnaAnalysis"),i?(n.sickbayContentDom.querySelectorAll('[id^="rnaLineAni"]').forEach((e=>{e.style.animationDuration=`${u(6,12).toFixed(1)}s, ${u(3,10).toFixed(1)}s`,e.style.animationDirection=p(["normal","reverse","alternate","alternate-reverse"])})),"mute"!==o&&(K("executing",0,0,0,.6),K("processing",.65,0,0,.4,.8)),"noLog"!==t&&Oi(`RNA level ${c(1,5)} Comparative analysis in progress`)):("mute"!==o&&K("shortRandomBeep",0,0,0,.3),"noLog"!==t&&Oi("RNA analysis • paused"))}function Bn(e=null,t=null){let o=m(Ct.length);o.toString()==Xo.dataset.currentIndex&&(o=(o+4)%Ct.length),Xo.dataset.currentIndex=o,Xo.style.transform=`translate(${Ct[o].x}px, ${Ct[o].y}px) scale(${u(.65,1.4).toFixed(2)}) translate(${-1*Ct[0].x}px, ${-1*Ct[0].y}px)`;const n=Xo.querySelector('[id^="outer"]');let i="";Math.random()>.35&&(i=`${c(25,90)} ${c(6,20)} ${c(25,90)} ${c(6,20)}`),n.setAttribute("stroke-dasharray",i),n.setAttribute("stroke",p(["var(--primarySat)","var(--secondaryBright)"])),Xo.style.setProperty("--rndTimingFunction",p(["ease-in-out","ease-out","steps(4)","steps(3)"]));const r=p(["analyzing","scanning","probing","targeting","repairing"]),s=p(["continuous mode","intermittent mode",`level ${c(1,5)}`,`mode ${p(["A","B","C","D","X"])}`]);"noLog"!==e&&Oi(`${r} ${Ct[o].name} / ${s}`,"timePrefix"),"mute"!==t&&(K("warningLow",0,0,0,.2),K("notification",.3,0,0,.35))}function In(){let e;switch((tn||on)&&Math.random()<.67?(vn(!1),Tn(!1),e=c(2,5)):e=m(6),e){case 0:vn();break;case 1:Tn();break;case 2:xn();break;case 3:Ln();break;case 4:kn();break;default:Bn()}}function qn(e=null,t=null,o=null,n=null){if("eeg"!==e&&"ecg"!==e&&"etc"!==e)return;if(sn[e]===t)return;let i;i=!0===t||!1!==t&&!sn[e],i?(!function(e){const t=lr();sn[e]=!0,t.sickbayContentDom.classList.add(e);const o=t.svg1.querySelector(`#gradientAni_${e}0 animate`);o.addEventListener("beginEvent",Mn,!1),o.addEventListener("endEvent",Nn,!1),t.svg1.querySelectorAll(`#gradientAni_${e}0 animate`).forEach((e=>{e.beginElement()})),an[e]=!0,t.svg1.querySelector(`#gradientAni_${e}1`).style.display="none",clearTimeout(rn[e]);const n=t.sickbayContentDom.querySelector(`#${e}GradientBox`);n.style.opacity=1,n.style.display="block"}(e),"noLog"!==o&&Oi("ecg"==e?"displaying ecg / electrocardiogram • q3 sec":"eeg"==e?"displaying eeg / electroencephalogram • q3 sec":"displaying End-Tidal CO2 / capnogram • q6 sec"),"mute"!==n&&K(`beepX${c(1,3)}${p(["Up","Upper"])}`,0,0,0,.5)):(!function(e){const t=lr();sn[e]=!1,t.sickbayContentDom.classList.remove(e),clearTimeout(nn[e]),nn[e]=null;const o=t.svg1.querySelector(`#gradientAni_${e}0 animate`);o.removeEventListener("beginEvent",Mn,!1),o.removeEventListener("endEvent",Nn,!1);const n="etc"==e?12e3:6e3;t.svg1.querySelectorAll(`#gradientAni_${e}0 animate, #gradientAni_${e}1 animate`).forEach((e=>{e.endElementAt(n)}));const i=t.sickbayContentDom.querySelector(`#${e}GradientBox`);i.style.opacity=0,rn[e]=setTimeout((()=>{i.style.display="none"}),600)}(e),"mute"!==n&&K(`beepX${c(1,3)}${p(["Down","Downer"])}`,0,0,0,.3))}function Rn(e=null){const t=`1${sn.ecg?"1":"0"}${sn.eeg?"1":"0"}${sn.etc?"1":"0"}`,o=parseInt(t,2);let n=8+c(1,6);n==o&&(n++,15==n&&(n=9));const i=n.toString(2).split("");qn("ecg","1"==i[1],null,e),qn("eeg","1"==i[2],null,e),qn("etc","1"==i[3],null,e)}function Fn(e,t){const o=lr().svg1.querySelector(`#${t}`);if(o.style.setProperty("--x0",c(-1e3,0)),"ecg"==e){const e=Mt;o.style.setProperty("--scaleY",e.toFixed(2));const t=(170-It)/126*1.5+.5;o.style.setProperty("--scaleX",t.toFixed(2))}else if("eeg"==e){const e=d(1.8*(Zt-zt),.16,1);o.style.setProperty("--scaleY",e.toFixed(2));const t=2-(Vt-Wt)/(Yt-Wt)*1.5;o.style.setProperty("--scaleX",t.toFixed(2))}else{const e=_t-Ht;o.style.setProperty("--scaleY",e.toFixed(2));const t=(40-$t)/40*2+.5;o.style.setProperty("--scaleX",t.toFixed(2))}tr(ln[e].start,"blink1"),tr(ln[e].end,"blink1"),document.querySelectorAll(`#gradientAni_${t} animate`).forEach((e=>{e.beginElement()}))}function Mn(e){const t=lr(),o=e.target.parentNode.dataset.type;if(null!==nn[o])return;Fn(o,o+"0");const n="etc"==o?6e3:3e3;clearTimeout(nn[o]),nn[o]=setTimeout((()=>{an[o]&&(t.svg1.querySelector(`#gradientAni_${o}1`).style.display=null,an[o]=!1),Fn(o,o+"1"),nn[o]=null}),n)}function Nn(e){e.target.parentNode.querySelectorAll("animate").forEach((e=>{e.beginElement()}))}let jn=0,$n=null,Pn=null,On=null,Un=null,Hn=null,_n=!1;function Gn(e=null){document.documentElement.dataset.autoMode="standby",Ve=()=>{_e=setTimeout(We,3e4)},Ze=g((e=>{ze()}),Ye),Ue=!0,He=!1,Xe.forEach((function(e){document.addEventListener(e,Ze,!0)})),document.documentElement.style.setProperty("--idleDuration",28.5),ze(),Wn("STANDING BY"),null===e&&Oi("AUTO MODE ENABLED, waiting for idle","timePrefix")}function Xn(e=null){Ve=()=>{},clearTimeout(Ge),delete document.documentElement.dataset.idle,clearTimeout(_e),He=!1,Ue&&(Ue=!1,Xe.forEach((function(e){document.removeEventListener(e,Ze,!0)}))),_n&&Zn(),delete document.documentElement.dataset.autoMode,Wn("DISABLED"),null===e&&Oi("AUTO MODE is now disabled","timePrefix")}function Vn(){const e=lr();e.autoMode=!e.autoMode,e.autoMode?(Gn(),K("beepX3Upper",0,0,0,.6)):(Xn(),K("beepX2Downer",0,0,0,.4))}function Wn(e){null==Un&&function(){const e=lr();Un=e.homeFrameDom.querySelector('[id^="autoModeStatus"] tspan'),Hn=e.shipFrameDom.querySelector('#frameShipConfig [id^="autoModeStatus"] tspan')}(),Un.textContent=e,Hn.textContent=e}function Yn(){const e=lr();_n=!0,document.documentElement.dataset.autoMode="active",Wn("ACTIVE"),Oi("AUTO MODE: Prolonged Idling DETECTED","timePrefix"),Oi("AUTO MODE: UI Automation in progress"),K("beepX1Up",0,0,0,.25),$n=e.currentColorScheme,Pn=Bi(),On=qi(),jn=setTimeout((()=>{zn()}),1700)}function zn(){"visible"==document.visibilityState&&function(){const e=lr();if(e.userSessionSettings.autoModeRedAlert&&e.redAlertStatus&&Math.random()<.85)return void Wi(null,"NotUpdatingServer");e.userSessionSettings.autoModeBufferTime&&e.bufferTimeStatus&&Math.random()<.8&&Oe();if(!e.sickbayStatus&&Math.random()<.1)return void("home"==e.pageStatus?bt():"ship"==e.pageStatus&&ft());if(Math.random()<.2){e.userSessionSettings.autoModeColorScheme&&Math.random()<.45&&!e.sickbayStatus&&Di("noUserSessionUpdate","randomized");switch(m(e.userSessionSettings.autoModeRedAlert?5:3)){case 0:Ri();break;case 1:Ii();break;case 2:Ri(),Ii();break;default:Wi(null,"NotUpdatingServer")}}else if("home"==e.pageStatus)if(e.sickbayStatus)if(Math.random()<.15)pn();else{if("ytWindow"in document.documentElement.dataset&&Math.random()<.17)return void yt();switch(m(5)){case 1:case 2:In();break;case 3:case 4:Rn();break;default:hn()}}else{"ytMenu"in document.documentElement.dataset&&"ytWindow"in document.documentElement.dataset&&lt();const t=Math.random();if(t<.22)nt();else if(t<.45)yn();else if(t<.65)if(e.userSessionSettings.autoModeBufferTime)Oe();else{const e=Math.random();e<.3?nt():e<.6?yn():e<.8?lt():Yi()}else t<.7?setTimeout((()=>{lt()}),1300):t<.88?("ytMenu"in document.documentElement.dataset&&lt(),"ytWindow"in document.documentElement.dataset?yt():e.userSessionSettings.autoModeYtVideo&&e.sounds.audioMainSwitch&&"running"==e.sounds.audioCtx.state?at():lt()):Yi()}else if("ship"==e.pageStatus)if(Math.random()<.4)e.userSessionSettings.autoModeYtVideo&&"ytWindow"in document.documentElement.dataset&&Math.random()<.3?yt():_i();else if(e.shipZoomMode){const e="|"+document.documentElement.dataset.shipZoomObj+"|";Qn.includes(e)&&Math.random()<.2?de():oe()}else{const e=Math.random();if(e<.08)ne();else if(e<.12)de();else if(e<.2)Pe();else if(e<.45)oe();else if(e<.7)xe();else{const e=Math.random();e<.33?(qe(),Re()):(e<.67||(qe(),Re()),Me()),Math.random()<.15&&Pe()}}}();const e=c(12,30);jn=setTimeout((()=>{zn()}),1e3*e)}function Zn(){const e=lr();clearTimeout(jn),_n=!1,document.documentElement.dataset.autoMode="standby",Wn("STANDING BY"),e.userSessionSettings.autoModeRedAlert&&e.redAlertStatus&&Wi(null,"NotUpdatingServer"),e.userSessionSettings.autoModeBufferTime&&e.bufferTimeStatus&&Oe(),K("exitTask",.2,0,0,.4),null!==$n&&Di("noUserSessionUpdate",$n,"noLog","mute"),null!==Pn&&Ii(Pn,"noLog","mute"),null!==On&&Ri(On,"noLog","mute"),$n=null,Pn=null,On=null,Oi("UI Automation stopped • Style Config Restored","timePrefix"),Oi("Auto Mode: Standing by")}const Qn="|warpCoils|starboardNacelle|engineeringHull|warpCore|engineering|navigationalDeflector|";const Jn="ProjectRITOS",Kn={useLastVisitSettings:[!1,!0],autoMode:[!0,!1],autoModeColorScheme:[!0,!1],autoModeRedAlert:[!0,!1],autoModeBufferTime:[!0,!1],autoModeYtVideo:[!0,!1],shipName:["text",5,50],shipClass:["text",1,30],shipRegistry:["text",3,20],colorSchemeName:["text",1,50],bgHue:[0,360],bgLevel:[0,16],softVignette:[!0,!1],ldGlare:[!0,!1],audioEnabled:[!1,!0],audioFxLevel:[0,1],audioBgLevel:[0,1],clockType:["24hr","12hr/Am.Pm","12hr"]},ei={useLastVisitSettings:Kn.useLastVisitSettings[0],autoMode:Kn.autoMode[0],autoModeColorScheme:Kn.autoModeColorScheme[0],autoModeRedAlert:Kn.autoModeRedAlert[0],autoModeBufferTime:Kn.autoModeBufferTime[0],autoModeYtVideo:Kn.autoModeYtVideo[0],shipName:"U.S.S. Cerritos",shipClass:"California",shipRegistry:"NCC-75567",colorSchemeName:"Ritos Yellow",bgHue:Kn.bgHue[0],bgLevel:Kn.bgLevel[0],softVignette:Kn.softVignette[0],ldGlare:Kn.ldGlare[0],audioEnabled:Kn.audioEnabled[0],audioFxLevel:.47,audioBgLevel:.3,clockType:Kn.clockType[0]};function ti(e=null){const t=lr();Object.keys(t.userSessionSettings).forEach((o=>{switch(o){case"shipName":case"shipClass":case"shipRegistry":nr(o,t.userSessionSettings[o]);break;case"colorSchemeName":Ei(t.userSessionSettings[o]);break;case"bgHue":ki(Number(t.userSessionSettings[o]));break;case"bgLevel":Li(Number(t.userSessionSettings[o]));break;case"softVignette":Ii(t.userSessionSettings[o],"noLog","mute");break;case"ldGlare":e.includes("ldGlare")||Ri(t.userSessionSettings[o],"noLog","mute")}}))}function oi(e,t){const o=lr();switch(o.userSessionSettings[e]=t,e){case"shipName":""===t.trim()?nr(e,"U.S.S. CERRITOS"):nr(e,t);break;case"shipClass":""===t.trim()?nr(e,"CALIFORNIA"):nr(e,t);break;case"shipRegistry":""===t.trim()?nr(e,"NCC-75567"):nr(e,t);break;case"audioEnabled":if(t&&0==Z()){Q(.33*ei.audioFxLevel)}Y(t);break;case"audioFxLevel":Q(t);break;case"autoMode":o.userSessionSettings.autoMode=t,o.autoMode!=t&&(o.autoMode=t,o.autoMode?Gn():Xn());break;case"autoModeColorScheme":case"autoModeRedAlert":case"autoModeBufferTime":case"autoModeYtVideo":o.userSessionSettings[e]=t;break;case"usePreviousSettings":o.userSessionSettings.useLastVisitSettings=t,document.getElementById("localSettingsContent").classList.toggle("usePreviousSettings",o.userSessionSettings.useLastVisitSettings)}!0===o.userSessionSettings.useLastVisitSettings?"usePreviousSettings"==e?Object.keys(ei).forEach((e=>{ri(e,o.userSessionSettings[e])})):ri(e,t):"usePreviousSettings"==e&&function(){try{localStorage.removeItem(Jn)}catch(e){console.log("localStorage error"),console.log(e)}}()}function ni(e,t){const o=lr();e in o.userSessionSettings!=0&&(o.userSessionSettings[e]=t,!0===o.userSessionSettings.useLastVisitSettings&&ri(e,t))}function ii(){let e,t=!1;try{e=JSON.parse(localStorage.getItem(Jn)),null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(t=!0)}catch(e){}return t?(Object.keys(e).forEach((t=>{if("string"==typeof e[t]){const o=e[t].toLowerCase();"true"!=o&&"false"!=o||(e[t]="true"===o)}})),e):(e={},e)}function ri(e,t){let o=ii();o[e]=t;try{localStorage.setItem(Jn,JSON.stringify(o))}catch(e){console.log("localStorage error"),console.log(e)}}function si(e){if("preset"in e.target.dataset)return void function(e){let t,o,n;switch(e.toLowerCase()){case"merced":t="U.S.S. MERCED",o="CALIFORNIA",n="NCC-87075";break;case"oakland":t="U.S.S. OAKLAND",o="CALIFORNIA",n="NCC-75012";break;case"carlsbad":t="U.S.S. CARLSBAD",o="CALIFORNIA",n="NCC-73110";break;case"inglewood":t="U.S.S. INGLEWOOD",o="CALIFORNIA",n="NCC-90301";break;case"boaty":t="U.S.S. BOATY MCBOATFACE II",o="ENGLAND",n="NOC-02017";break;case"yamato":t="宇宙戦艦ヤマト",o="YAMATO",n="UNCF BBY-01";break;default:t="",o="",n=""}document.querySelector('#localSettings input[data-key="shipName"]').value=t,document.querySelector('#localSettings input[data-key="shipClass"]').value=o,document.querySelector('#localSettings input[data-key="shipRegistry"]').value=n,oi("shipName",t),oi("shipClass",o),oi("shipRegistry",n),K("beepX1Up",0,0,0,.25)}(e.target.dataset.preset);if(!("key"in e.target.dataset))return;let t=e.target.dataset.value;if("string"==typeof t){const e=t.toLowerCase();"true"!=e&&"false"!=e||(t="true"===e)}switch(e.target.dataset.key){case"usePreviousSettings":case"autoMode":case"audioEnabled":if(e.target.parentNode.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")})),e.target.classList.add("selected"),"boolean"!=typeof t)return;if("usePreviousSettings"==e.target.dataset.key)K(t?"beepX2Up":"beepX1Down"),oi("usePreviousSettings",t);else if("autoMode"==e.target.dataset.key)K(t?"beepX3Up":"beepX1Down"),oi("autoMode",t);else{if(t){if(0==Z()){const e=.33*ei.audioFxLevel;Q(e),li(document.getElementById("audioFxLevel"),Math.round(100*e))}K("shortRandomBeep",0,0,0,.6)}else tr(e.target,"blink2");oi("audioEnabled",t)}break;case"autoModeColorScheme":case"autoModeRedAlert":case"autoModeBufferTime":case"autoModeYtVideo":const o=e.target.classList.toggle("selected");K(o?"beepX2Upper":"beepX1Downer"),oi(e.target.dataset.key,o);break;case"audioFxLevel":const n=e.target.getBoundingClientRect(),i=e.clientX-n.left,r=n.width>0?Math.round(100*i/n.width):0;if(li(e.target,r),r>0){Y(!0);const e=document.getElementById("localSettingsContent");e.querySelector('div.btn[data-key="audioEnabled"][data-value="true"]').classList.add("selected"),e.querySelector('div.btn[data-key="audioEnabled"][data-value="false"]').classList.remove("selected"),K("beepX1Up",0,0,0,.8)}else{Y(!1);const e=document.getElementById("localSettingsContent");e.querySelector('div.btn[data-key="audioEnabled"][data-value="true"]').classList.remove("selected"),e.querySelector('div.btn[data-key="audioEnabled"][data-value="false"]').classList.add("selected")}oi("audioFxLevel",.01*r)}}function ai(e){"key"in e.target.dataset&&(""==e.target.value.trim()&&(e.target.value=""),"shipName"!=e.target.dataset.key&&"shipClass"!=e.target.dataset.key&&"shipRegistry"!=e.target.dataset.key||(oi(e.target.dataset.key,e.target.value),K(p(["beepX1Up","beepX1Upper","beepX1Down","beepX1Downer","beepX1Down","beepX1Downer"]),0,0,0,.01*c(5,35))))}function li(e,t){e.style.setProperty("--audioLevel",t+"%"),e.dataset.audioLevel=`${t}%`}function ci(){const e=document.getElementById("localSettings");clearTimeout(Number(e.dataset.timerId)),e.classList.contains("show")?(K(p(["beepX2Downer","beepX2Down"]),.25,0,0,.35),function(){const e=document.getElementById("localSettings");e.removeEventListener("pointerdown",si,!1),e.removeEventListener("input",ai,!1)}(),e.classList.remove("show"),e.dataset.timerId=setTimeout((()=>{e.style.display="none"}),650)):(K(p(["beepX1Up","beepX1Upper"]),0,0,0,.5),function(){const e=document.getElementById("localSettings");e.addEventListener("pointerdown",si,!1),e.addEventListener("input",ai,!1)}(),e.style.display="block",e.dataset.timerId=setTimeout((()=>{e.classList.add("show")}),50))}function di(){const e=lr();let t;return t=void 0!==e.serverTime?new Date(e.serverTime.getTime()+(performance.now()-e.performanceMarkerServer)):new Date,t}function ui(e,t=null,o="noRingClock"){const n=lr();if(null==e)return;if(n.currentDateCache=null,"none"==n.userSessionSettings.clockType)return clearInterval(n.clockIntervalTimer),n.clockIntervalTimer=null,document.documentElement.dataset.clock="off",void(e.textContent=y(6));if(null!=n.clockIntervalTimer)return;let i,r,s,a,l,d,m,h;delete document.documentElement.dataset.clock,"hasRingClock"==o&&(i=document.getElementById("ringHour1"),r=document.getElementById("ringHour2"),s=document.getElementById("ringMinute1"),a=document.getElementById("ringMinute2"),l=document.getElementById("ringMinute3"),d=document.getElementById("ringSecond"),m=document.getElementById("ringRandom"),h=document.getElementById("ringCenter")),n.clockIntervalTimer=setInterval((()=>{const y=di();let g=y.getHours(),f="";"24hr"!=n.userSessionSettings.clockType&&("12hr/Am.Pm"==n.userSessionSettings.clockType&&(f=g<12?"A":"P"),g%=12,0==g&&(g=12));const b=g<10?"0":"",S=y.getMinutes(),C=S<10?"0":"",A=y.getSeconds(),v=A<10?"0":"";if(e.textContent=b+g+":"+C+S+"."+v+A+f,null!==t){const e=y.toLocaleDateString();if(e!=n.currentDateCache){n.currentDateCache=e;const o={year:"numeric",month:"short",day:"numeric",weekday:"long"};let i=y.toLocaleDateString("en-US",o).replaceAll(",","").toUpperCase().split(" ");t.textContent=`${i[3]}.${i[1]}.${i[2]} • ${i[0]}`}}if("noRingClock"==o)return void(n.ringClockCenterDom=null);n.ringClockCenterDom=h,d.style.strokeDashoffset=935-(A+1)*(4084/60),s.style.strokeDashoffset=300-57.5*S,a.style.strokeDashoffset=1153-S*(3613/60),l.style.strokeDashoffset=500-S*(3544/60)-1772*S;const T=g%12+S/60;i.style.strokeDashoffset=354-T*(2495/12)+2495*S,A%15==0&&(r.classList.add("ticking"),setTimeout((()=>{r.classList.remove("ticking")}),1250)),Math.random()<.3&&(m.style.strokeDashoffset=c(-1438,1438),m.style.transitionDuration=u(.4,3)+"s",m.style.transitionTimingFunction=p(["ease","cubic-bezier(.8, 0, .2, 1)","ease-in","ease-out"])),58==A?(n.bufferTimeStatus||K("beepX1Down",0,0,0,.2),h.style.transitionDuration="0.6s",h.style.transitionTimingFunction="ease",d3.select(h).transition().delay(200).duration(0).attr("r",5).style("transition-timing-function","ease-out").transition().delay(650).duration(0).attr("r",472).style("transition-duration","0.8s").style("opacity",.3).style("transition-timing-function","ease-out").transition().delay(850).duration(0).attr("r",p([154,c(55,175)])).style("transition-duration","0.9s").style("transition-timing-function","ease-in-out").style("opacity",null)):A<57&&A>1?Math.random()<.2&&(h.setAttribute("r",p([154,c(55,175)])),h.style.transitionDuration=null,h.style.transitionDuration=u(.3,1.7)+"s",h.style.transitionTimingFunction=p(["ease","cubic-bezier(.8, 0, .2, 1)","ease-in","ease-out"])):59==A?n.bufferTimeStatus||K("beepX1Down",0,0,0,.3):0!=A||n.bufferTimeStatus||(0==S?(K("lowProfileTask",0,0,0,.3),K("exitTask",1.1,0,0,.5)):K(p(["affirmative","negative"]),0,0,0,.3))}),1e3)}function mi(){const e=lr();clearInterval(e.clockIntervalTimer),e.clockIntervalTimer=null}function yi(){const e=lr();null!==e.ringClockCenterDom&&(e.ringClockCenterDom.classList.remove("blink2"),setTimeout((()=>{e.ringClockCenterDom.classList.add("blink2")}),50))}function pi(e){const t=lr();let o;tr(e,"blink1"),o="24hr"==t.userSessionSettings.clockType?"12hr/Am.Pm":"12hr/Am.Pm"==t.userSessionSettings.clockType?"12hr":"24hr",function(e){const t=lr().shipFrameDom.querySelector("#shipClock");"24hr"==e?t.setAttribute("transform","translate(16 0)"):"12hr"==e?t.setAttribute("transform","translate(20 0)"):"12hr/Am.Pm"==e&&t.setAttribute("transform","translate(2 0)")}(o),ni("clockType",o),Oi(`Changing to ${o} clock type`),K("beepX2Downer",0,0,0,.25)}function hi(){if(!/iPad|iPhone|iPod/.test(navigator.platform)&&!Boolean(navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform))&&(document.fullscreenEnabled||document.webkitFullscreenEnabled)){const e=document.querySelector("#msdContainer > svg #frameHeader #btnFullscreen");e.classList.add("capable"),e.addEventListener("pointerdown",(e=>{gi(),e.stopPropagation()})),document.querySelector("#aboutIntroFullscreen > span:first-child").addEventListener("pointerdown",(e=>{gi(),e.stopPropagation()})),document.documentElement.dataset.fullscreenCapable=""}}function gi(){if(document.fullscreenElement)document.exitFullscreen().then((()=>{bi()})).catch((e=>{console.error(e)}));else if(document.webkitFullscreenElement)document.webkitExitFullscreen(),bi();else if(document.fullscreenEnabled)document.documentElement.requestFullscreen(),fi();else if(document.webkitFullscreenEnabled)document.documentElement.webkitRequestFullscreen(),fi();else{const e="Sorry. Fullscreen mode is not available on this device.";Oi(e),console.log(e)}}function fi(){document.documentElement.dataset.fullscreen="on",Si(!0),K("beepX3Upper",0,0,0,.8)}function bi(){delete document.documentElement.dataset.fullscreen,Si(!1),K("beepX2Downer",0,0,0,.8)}function Si(e){!0===e?Oi("Full screen mode is now enabled • Press <ESC> to Exit"):!1===e&&Oi("Exited Full screen mode <CTRL+SHIFT+F>")}function Ci(){const e=lr();e.serverApiConnection&&(e.clientIsReady=!0,console.log(`New client [uid=${e.serverApiData.clientUid}] has been initialized, handshaking with server...`),vi("fetchStatus",{clientUid:e.serverApiData.clientUid},(e=>{console.log("client: server response received...",e),"object"==typeof e&&processServerEvent("responseToFetchStatus",e)})))}function Ai(){const e=lr();e.serverApiData.alertStatus=e.redAlertStatus?"red":"normal",e.serverApiData.colorSchemeName=e.colorSchemeNames[e.currentColorScheme];const t=e.themeColors[e.currentColorScheme],o=/rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/.exec(t);return null!==o&&(e.serverApiData.themeColor.r=Number(o[1]),e.serverApiData.themeColor.g=Number(o[2]),e.serverApiData.themeColor.b=Number(o[3])),e.serverApiData}function vi(e,t,o){lr().serverApiConnection&&(console.log(`Preflight checked: Ready to send [${e}] event to server`,t,o),"function"==typeof window.updateServer&&window.updateServer(e,t,o))}function Ti(){const e=lr();e.svg1=document.querySelector("#msdContainer > svg"),e.svg1.setAttribute("id","svg1"),e.svg2=document.querySelector("#msdContainer2 > svg"),e.svg2.setAttribute("id","svg2"),e.configContentDom=e.svg1.querySelector("#contentConfig"),e.homeFrameDom=e.svg1.querySelector("#frameHome"),e.homeContentDom=e.svg1.querySelector("#contentHome"),e.sickbayContentDom=e.svg1.querySelector("#contentSickbay"),e.shipFrameDom=e.svg1.querySelector("#frameShip"),e.shipContentDom=e.svg1.querySelector("#contentShip"),e.logDisplayDom=document.getElementById("logDisplay"),e.remoteUi||(e.logPlaceholderDom=e.homeContentDom.querySelector("#log_placeholder")),document.querySelectorAll("#frameHome, #frameShip, #contentHome, #contentShip").forEach((e=>{e.style.visibility="hidden",e.style.opacity=0})),d3.selectAll("#msdContainer svg *, #ritosRemoteContainer svg *").each((function(e,t,o){switch(o[t].getAttribute("fill")){case"#763806":o[t].setAttribute("fill","var(--primaryDarker)");break;case"#875025":o[t].setAttribute("fill","var(--primaryDark)");break;case"#D34E03":o[t].setAttribute("fill","var(--primarySat)");break;case"#DF8313":o[t].setAttribute("fill","var(--primary)");break;case"#DA9A4D":o[t].setAttribute("fill","var(--primaryBright)");break;case"#FFC996":o[t].setAttribute("fill","var(--primaryBrighter)");break;case"#FFF5EB":o[t].setAttribute("fill","var(--primaryBrightest)");break;case"#FFD300":o[t].setAttribute("fill","var(--secondary)");break;case"#FFE359":o[t].setAttribute("fill","var(--secondaryBright)");break;case"#FFEC92":o[t].setAttribute("fill","var(--secondaryBrighter)");break;case"#FFF5C7":o[t].setAttribute("fill","var(--secondaryBrightest)");break;case"#171E22":o[t].setAttribute("fill","var(--bgColor)")}switch(o[t].getAttribute("stroke")){case"#763806":o[t].setAttribute("stroke","var(--primaryDarker)");break;case"#875025":o[t].setAttribute("stroke","var(--primaryDark)");break;case"#D34E03":o[t].setAttribute("stroke","var(--primarySat)");break;case"#DF8313":o[t].setAttribute("stroke","var(--primary)");break;case"#DA9A4D":o[t].setAttribute("stroke","var(--primaryBright)");break;case"#FFC996":o[t].setAttribute("stroke","var(--primaryBrighter)");break;case"#FFF5EB":o[t].setAttribute("stroke","var(--primaryBrightest)");break;case"#FFD300":o[t].setAttribute("stroke","var(--secondary)");break;case"#FFE359":o[t].setAttribute("stroke","var(--secondaryBright)");break;case"#FFEC92":o[t].setAttribute("stroke","var(--secondaryBrighter)");break;case"#FFF5C7":o[t].setAttribute("stroke","var(--secondaryBrightest)");break;case"#171E22":o[t].setAttribute("stroke","var(--bgColor)")}})),d3.select("#homeClock").attr("fill","url(#gradientClock)"),d3.select("#shipClock").attr("fill","url(#gradientClock)");const t=e.svg1.appendChild(document.querySelector("#svgAni > defs"));e.svg2.appendChild(document.querySelector("#svgAni2 > defs"));const o=document.createElementNS("http://www.w3.org/2000/svg","clipPath");o.setAttribute("id","contentHomeClipPathDef"),t.appendChild(o),o.appendChild(e.homeContentDom.querySelector("#contentHomeClipPath")),e.homeContentDom.setAttribute("clip-path","url(#contentHomeClipPathDef)");const n=document.createElementNS("http://www.w3.org/2000/svg","clipPath");n.setAttribute("id","contentShipClipPathDef"),t.appendChild(n),n.appendChild(e.shipContentDom.querySelector("#contentShipClipPath")),e.shipContentDom.setAttribute("clip-path","url(#contentShipClipPathDef)"),e.configContentDom.querySelector("#configBtns").onpointerdown=t=>{const o=t.target.getAttribute("id");if("string"==typeof o)if(0==o.indexOf("btn0"))Di();else if(0==o.indexOf("btn1a"))ki(),ni("bgHue",e.bgHue);else if(0==o.indexOf("btn1b"))Li(),ni("bgLevel",e.bgLevel);else if(0==o.indexOf("btn2")){ni("softVignette",Ii())}else if(0==o.indexOf("btn3")){ni("ldGlare",Ri())}};const i=e.configContentDom.getBBox(),r=i.x+.5*i.width,s=i.y+.5*i.height,a=e.shipFrameDom.querySelector("#logsConfig_placeholder").getBBox(),d=a.x+.5*a.width,m=a.y+.5*a.height,y=Math.min(a.width/i.width,a.height/i.height);e.configContentDom.setAttribute("transform-origin",`${r} ${s}`),e.configContentDom.dataset.shipTransform=`translate(${d-r} ${m-s}) scale(${y})`;let p=e.homeFrameDom.querySelector("#autoModeCountdownCircleHome"),g=p.getBBox(),f=g.x+.5*g.width,b=g.y+.5*g.height;p.style.transform=`translate(${f}px,${b}px) rotate(-90deg) translate(-${f}px,-${b}px)`,p=e.shipFrameDom.querySelector("#autoModeCountdownCircleShip"),g=p.getBBox(),f=g.x+.5*g.width,b=g.y+.5*g.height,p.style.transform=`translate(${f}px,${b}px) rotate(-90deg) translate(-${f}px,-${b}px)`;const S=e.homeFrameDom.querySelector("#frameTitleText"),C=S.querySelector("tspan"),A=S.getBBox();C.setAttribute("x",A.x+A.width),S.setAttribute("text-anchor","end"),C.dataset.text=C.textContent,e.homeFrameDom.querySelectorAll('[id^="homeBtn"]').forEach((e=>{e.style.opacity=0}));const v=e.homeFrameDom.querySelector("#topLeftCorner");v.dataset.fill=v.getAttribute("fill"),v.dataset.d=v.getAttribute("d");const T=e.homeFrameDom.querySelector("#homeTopBar");T.dataset.fill=T.getAttribute("fill"),T.dataset.x=T.getAttribute("x"),T.dataset.width=T.getAttribute("width"),T.setAttribute("width","1");const w=e.homeFrameDom.querySelector("#topRightBlock");w.dataset.fill=w.getAttribute("fill");const E=T.getBBox().x-w.getBBox().x;w.style.transition="none",w.style.transform=`translate(${E}px,0)`,e.homeFrameDom.querySelectorAll('[id^="tmpFrameHome1"]').forEach((e=>{e.style.visibility="hidden",e.style.opacity=0,e.dataset.x=e.getAttribute("x"),e.dataset.y=e.getAttribute("y"),e.dataset.width=e.getAttribute("width"),e.dataset.height=e.getAttribute("height")}));const x=e.homeContentDom.querySelector("#ringClock"),k=Ji(x),L=`translate(${k.x}px, ${k.y}px)`,B=`translate(-${k.x}px, -${k.y}px)`;x.style.transform=`${L} rotate(${l()*c(250,380)}deg) scale(0.7) ${B}`,x.style.setProperty("--defaultTranslatePlus",L),x.style.setProperty("--defaultTranslateMinus",B);const I=e.svg1.querySelector("#jwstImageGroup #jwstImage_placeholder").getBBox(),q=x.getBBox(),R=`${L} translate(${I.x-(q.x+.5*q.width)+105}px, ${I.y-(q.y+.5*q.height)+105}px) rotate(0deg) scale(0.25) ${B}`;x.style.setProperty("--jwstRingClockTransform",R),x.dataset.jwstRingClockTransform=R;const F=e.svg1.querySelector("#homeConfig"),M=F.getBBox(),N=e.svg1.querySelector("#homeWindow"),j=N.getBBox();N.dataset.x=j.x,N.style.opacity=0,F.dataset.x=M.x,F.dataset.y=M.y,F.style.opacity=0,st();const $=e.svg1.querySelector("#homeClock");$.dataset.currentSize="normal",$.setAttribute("transform-origin","0 0"),$.setAttribute("transform","translate(0 0) scale(1)"),gn();const P=e.shipFrameDom.querySelector("#shipMainTopLeftCorner");P.dataset.fill=P.getAttribute("fill"),P.dataset.d=P.getAttribute("d");const O=e.shipFrameDom.querySelector("#shipTopBar1a");O.dataset.fill=O.getAttribute("fill"),O.dataset.x=O.getAttribute("x"),O.dataset.width=O.getAttribute("width");const U=e.shipFrameDom.querySelector("#shipTopBar1c");U.dataset.fill=U.getAttribute("fill"),U.style=null;const H=e.shipFrameDom.querySelector("#shipFrame1a");H.dataset.x=H.getAttribute("x"),H.dataset.y=H.getAttribute("y"),H.dataset.width=H.getAttribute("width"),H.dataset.height=H.getAttribute("height");const _=e.shipFrameDom.querySelector("#shipFrame1b");_.dataset.y=_.getAttribute("y"),_.dataset.height=_.getAttribute("height"),e.shipContentDom.querySelector("#tardis").setAttribute("fill-opacity",.5),e.shipContentDom.querySelectorAll('[id^="deflectorBeamAni"]').forEach(((e,t)=>{e.style.animationDelay=.3*t+"s"})),e.shipContentDom.querySelectorAll('[id^="bussardGasAni"]').forEach(((e,t)=>{e.style.animationDuration=u(6,14).toFixed(1)+"s"})),e.remoteUi?(e.svgRemote.querySelector('[id^="buildVersion"]').setAttribute("text-anchor","end"),e.svgRemote.querySelector('[id^="buildVersion"] tspan').textContent=e.revisionDate):e.shipFrameDom.querySelector('[id^="buildVersion"] tspan').textContent=`BUILD • ${e.revisionDate}`,document.getElementById("aboutCurrentBuildVer").textContent=e.revisionDate,Ji(document.querySelector("#msdContainer svg #contentShip")),e.shipFrameDom.querySelector('#shipFrame1c [id^="btn1"]').onpointerdown=()=>{ne()},e.shipFrameDom.querySelector('#shipFrame1c [id^="btn2"]').onpointerdown=e=>{const t=e.target.getBoundingClientRect();if(0==t.width)return;const o=Math.round((e.clientX-t.left)/t.width*100);o<=37?re("hit_engineeringHull"):o>=41&&o<=66?re("hit_starboardNacelle"):o>=70&&re("hit_saucerModule")},e.shipFrameDom.querySelector('#shipFrame1c [id^="btn3"]').onpointerdown=()=>{oe()},e.shipFrameDom.querySelector('#frameShipMain [id^="btnMap"]').onpointerdown=()=>{ne()},e.shipFrameDom.querySelector('#shipMsdBtns [id^="btn1"]').onpointerdown=()=>{xe()},e.shipFrameDom.querySelector('#shipMsdBtns [id^="btn2"]').onpointerdown=()=>{Pe()},e.shipContentDom.querySelectorAll("#outlines > path").forEach((e=>{e.dataset.stroke=e.getAttribute("stroke"),e.dataset.strokeWidth=e.getAttribute("stroke-width")})),ke();const G=e.svg2.querySelector("#bufferTimeGroup1");G.querySelector("#bufferTimeRings1").style.strokeDasharray="0 2595";const X=G.querySelector("#bufferTimeNumber"),V=X.getBBox();X.dataset.fullWidth=V.width;const W=Zi(X);e.bufferTimeTextOrigin=Zi(X),X.setAttribute("transform",`translate(${W.x} ${W.y}) scale(1 0.85) translate(-${W.x} -${W.y})`);const z=X.querySelector("tspan");for(let t=0;t<=60;t++)z.textContent=h(t,2),e.bufferTimeTextWidthOffset[t]=Number((.5*(V.width-X.getBBox().width)).toFixed(2));const Z=e.svg2.querySelector("#ritosTop"),Q=Z.getBBox();Z.dataset.transformOriginX=(Q.x+.61*Q.width).toFixed(2),Z.dataset.transformOriginY=(Q.y+.5*Q.height).toFixed(2),Ji(Z),Z.querySelector('[id^="fieldOutline"]').removeAttribute("fill"),Z.onpointerdown=()=>{qe(),Re()};const J=e.svg2.querySelector("#ritosFront");J.querySelector("#miniWarpCore").style.display="none",J.onpointerdown=()=>{Me()};const K=document.querySelector("#redAlertSymbol");K.querySelector("path").setAttribute("fill","url(#gradientRedAlertSymbol)");const te=Ji(K),ie=`translate(${te.x}px, ${te.y}px)`,se=`translate(-${te.x}px, -${te.y}px)`;K.style.setProperty("--defaultTranslatePlus",ie),K.style.setProperty("--defaultTranslateMinus",se),delete document.documentElement.dataset.huggy;const ae=e.svg2.querySelector("#huggy");ae.onpointerdown=()=>{it(ae)},e.homeFrameDom.querySelector("#homeBtn0").onpointerdown=()=>{"transitioning"!==e.pageStatus&&bt()},document.getElementById("btnShipToHome").onpointerdown=()=>{"transitioning"!==e.pageStatus&&ft()},document.getElementById("homeBtn1").onpointerdown=()=>{"transitioning"!==e.pageStatus&&nt()},document.getElementById("homeBtn2").onpointerdown=()=>{"transitioning"!==e.pageStatus&&yn()},document.getElementById("homeBtn3").onpointerdown=()=>{"transitioning"!==e.pageStatus&&Oe()},document.getElementById("homeBtn4").onpointerdown=()=>{"transitioning"!==e.pageStatus&&Wi()},document.getElementById("homeBtn5").onpointerdown=()=>{Vn()},document.getElementById("homeBtn6").onpointerdown=()=>{Mi()},e.homeFrameDom.querySelector('text[id^="bufferTimeQuota"]').setAttribute("text-anchor","end"),e.homeFrameDom.querySelector('text[id^="autoModeStatus"]').setAttribute("text-anchor","end"),document.querySelectorAll("#aboutPage .aboutClose").forEach((e=>{e.onpointerdown=()=>{Mi()}})),document.querySelector("#aboutPage .btnSettings").onpointerdown=()=>{ci()},e.homeContentDom.querySelector('#homeConfig [id^="btnAudio"]').onpointerdown=function(){Y(),tr(this,"blink2")},e.homeContentDom.querySelector('#homeConfig [id^="btnReset"]').onpointerdown=()=>{xi()},e.homeContentDom.querySelector("#homeConfig #homeConfigTabBtn").onpointerdown=()=>{Yi()},e.shipFrameDom.querySelector("#frameShipConfig").onpointerdown=t=>{if(!t.target.hasAttribute("id"))return;const o=t.target.getAttribute("id");0==o.indexOf("btnLogs")?Hi("logs"):0==o.indexOf("btnConfigs")?Hi("configs"):0==o.indexOf("btnAudio")?(Y(),tr(t.target,"blink2")):0==o.indexOf("btnReset")?xi():0==o.indexOf("btnBuildVersion")?Mi():0==o.indexOf("btnRedAlert")?"transitioning"!==e.pageStatus&&Wi():0==o.indexOf("btnAutoMode")&&Vn()},e.homeContentDom.querySelector("#homeClock").onpointerdown=function(){pi(this)},e.shipFrameDom.querySelector("#shipClock").onpointerdown=function(){pi(this)},De(),e.shipContentDom.querySelector("#computerCoreLeft").setAttribute("fill","url(#gradient3_rightToLeft)"),e.shipContentDom.querySelector("#computerCoreRight").setAttribute("fill","url(#gradient3_leftToRight)"),e.shipContentDom.querySelector("#wc_matter").setAttribute("fill","url(#gradient1_topToBottom)"),e.shipContentDom.querySelector("#wc_antimatter").setAttribute("fill","url(#gradient1_bottomToTop)"),e.shipContentDom.querySelector("#nacelle1").setAttribute("fill","url(#gradient1_rightToLeft)"),e.shipContentDom.querySelector("#bussard1").setAttribute("fill","url(#gradient2_rightToLeft)"),e.shipContentDom.querySelectorAll("#bussard1 path").forEach((e=>{e.setAttribute("fill","url(#gradient2_rightToLeft)")})),e.shipContentDom.querySelector("#dish").setAttribute("fill","url(#gradient2_leftToRight)"),e.shipContentDom.querySelector("#cylinderMain").setAttribute("fill","url(#gradient3_topToBottom)"),e.shipContentDom.querySelector("#impulseEngine").setAttribute("fill","url(#gradient2_rightToLeft)"),ee(),je(),function(){const e=document.querySelector("#msdContainer #subTitle");e.dataset.defaultWidth=Number(e.getBBox().width.toFixed(2));const t=document.querySelector("#msdContainer #subTitleBar");t.dataset.defaultWidth=Number(t.getBBox().width.toFixed(2))}(),D(),he(),ye(),e.svg1.querySelector("#reference16x9").remove(),e.svg2.querySelector("#reference16x9").remove();const le=e.svg1.querySelector("#frameHeader #shipName");le.dataset.defaultWidth=le.getBBox().width;const ce=e.svg1.querySelector("#frameHeader #headerCenterBar");ce.dataset.defaultWidth=ce.getBBox().width,ce.dataset.defaultX=ce.getBBox().x;const de=e.svg1.querySelector("#frameHeader #shipRegistry");de.dataset.defaultWidth=de.getBBox().width,de.dataset.defaultX=de.getBBox().x,delete e.uiInitializing,Fi()}function Di(e=!0,t=null,o=null,n=null){const i=lr();if(i.redAlertStatus)return K("negative",0,0,0,.5),Oi("unable to comply • red alert in progress"),null;let r;if("mute"!==n&&K("shortRandomBeep",0,0,0,.3),"number"==typeof(s=t)&&isFinite(s)&&Math.floor(s)===s)r=t;else{let e=1;if("randomized"===t){e=c(1,i.colorSchemeNames.length-2);let t=(i.currentColorScheme+e)%(i.colorSchemeNames.length-1);i.colorSchemeRatings[t]<1&&(e=c(1,i.colorSchemeNames.length-2))}r=(i.currentColorScheme+e)%(i.colorSchemeNames.length-1)}var s;wi(r);const a=i.colorSchemeNames[r];return"noLog"!==o&&Oi(`color scheme <${a}> activated`),!0===e&&ni("colorSchemeName",a),vi("setStatus",Ai()),a}function wi(e=0){const t=lr();"Shipyard Blueprint"==t.colorSchemeNames[e]?document.documentElement.dataset.colorScheme="blueprint":"Shipyard Blueprint II"==t.colorSchemeNames[e]?document.documentElement.dataset.colorScheme="blueprint2":document.documentElement.dataset.colorScheme=e,t.currentColorScheme=e}function Ei(e=null){const t=lr().colorSchemeNames.indexOf(e);return-1!=t?(wi(t),!0):(console.log(`Error: Requested color scheme change was not performed. [${e}] is not a valid color scheme name.`),!1)}function xi(){const e=lr();K("beepX3Up",0,0,0,.5),K("powerUp",0,0,0,.5,1.3),document.documentElement.dataset.colorScheme=0,e.currentColorScheme=0,e.bgHue=0,e.bgLevel=0,e.bgPreBlackLevel=0,e.bgShowingBlack=!0,document.documentElement.style.setProperty("--bgColorHue",0),document.documentElement.style.setProperty("--bgColorLevel","0%"),delete document.documentElement.dataset.bgWithHue,delete document.documentElement.dataset.vignette,setTimeout((()=>{document.documentElement.dataset.vignette=""}),20),delete document.documentElement.dataset.ldGlare,setTimeout((()=>{document.documentElement.dataset.ldGlare=""}),20),e.redAlertStatus&&Wi(),Oi("LCARS STYLES RESET COMPLETE","timePrefix"),ni("colorSchemeName",e.colorSchemeNames[0]),ni("bgHue",e.bgHue),ni("bgLevel",e.bgLevel),ni("softVignette",!0),ni("ldGlare",!0),vi("setStatus",Ai())}function ki(e=null){const t=lr();if(null===e){if(t.colorSchemeNames[t.currentColorScheme].toLocaleLowerCase().includes("blueprint")||t.colorSchemeNames[t.currentColorScheme].toLocaleLowerCase().includes("beige"))return Oi("BG color cannot be changed with this color scheme"),void K("negative",0,0,0,.5);K("beepX1Up",0,0,0,.4)}else e<0&&e>360&&(e=0);let o=null===e?t.bgHue+20:e;o>360?t.bgShowingBlack?(t.bgShowingBlack=!1,o=20,t.bgHue=o,document.documentElement.dataset.bgWithHue="",t.bgLevel=t.bgPreBlackLevel,0==t.bgLevel&&(t.bgLevel=8),document.documentElement.style.setProperty("--bgColorLevel",`${t.bgLevel}%`)):(o=0,t.bgShowingBlack=!0,t.bgPreBlackLevel=t.bgLevel,t.bgLevel=0,document.documentElement.style.setProperty("--bgColorLevel","0%"),delete document.documentElement.dataset.bgWithHue):(t.bgShowingBlack=!1,t.bgHue=o,document.documentElement.dataset.bgWithHue="",0==t.bgLevel&&(t.bgLevel=8,document.documentElement.style.setProperty("--bgColorLevel",`${t.bgLevel}%`))),document.documentElement.style.setProperty("--bgColorHue",`${o}`),null===e&&Oi(`Background Hue set to ${o}`)}function Li(e=null){const t=lr();if(null===e){if(t.colorSchemeNames[t.currentColorScheme].toLocaleLowerCase().includes("blueprint")||t.colorSchemeNames[t.currentColorScheme].toLocaleLowerCase().includes("beige"))return Oi("bg level cannot be changed with this color scheme"),void K("negative",0,0,0,.5);K("beepX3Up",0,0,0,.4)}t.bgLevel=null===e?(t.bgLevel+4)%20:e%20,t.bgPreBlackLevel=t.bgLevel,document.documentElement.style.setProperty("--bgColorLevel",`${t.bgLevel}%`),null===e&&Oi(`Background Light Level set to ${t.bgLevel}%`)}function Bi(){return"vignette"in document.documentElement.dataset}function Ii(e=null,t=null,o=null){let n;return n=!0===e||!1!==e&&!Bi(),n?(document.documentElement.dataset.vignette="","noLog"!==t&&Oi("soft vignette mode on"),"mute"!==o&&K("longTaskLow",0,1.2,0,.3)):(delete document.documentElement.dataset.vignette,"noLog"!==t&&Oi("soft vignette mode off"),"mute"!==o&&K("beepX2Upper",0,0,0,.3)),n}function qi(){return"ldGlare"in document.documentElement.dataset}function Ri(e=null,t=null,o=null){let n;if(n=!0===e||!1!==e&&!qi(),n){"mute"!==o&&K("exitTask",0,0,0,.3);const e=document.querySelector("#glare div:first-child"),n=document.querySelector("#glare div:nth-child(2)"),i=Math.random();if(i<.33)e.style.width=null,e.style.left=null,n.style.width=null,n.style.left=null;else if(i<.67){let t=c(39,47),o=c(53,67)-t;e.style.left=`${t}%`,e.style.width=`${o}%`,t=c(69,76),o=c(82,92)-t,n.style.left=`${t}%`,n.style.width=`${o}%`}else{let t=c(39,47),o=c(53,60)-t;e.style.left=`${t}%`,e.style.width=`${o}%`,t=c(62,76),o=c(82,92)-t,n.style.left=`${t}%`,n.style.width=`${o}%`}document.documentElement.dataset.ldGlare="","noLog"!==t&&Oi("Lower Decks Screen Glare mode on")}else delete document.documentElement.dataset.ldGlare,"noLog"!==t&&Oi("Lower Decks Screen Glare mode off"),"mute"!==o&&K("warningLow",0,0,0,.3);return n}function Fi(){const e=lr();if(e.hasOwnProperty("uiInitializing"))return;const t=document.getElementById("msdContainer").getBoundingClientRect(),o=.15,n=document.getElementById("glare"),i=document.getElementById("vignette");if(e.remoteUi){const e=document.querySelector("#svgRitosRemote #ritosRemotePage").getBoundingClientRect();n.style.width=e.width+"px",n.style.height=.6*e.height+"px",n.style.top=e.top-.04*e.height+"px",n.style.left=e.left+"px";const t=document.getElementById("msdContainer2");t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.top=e.top+"px",t.style.left=e.left+"px"}else if(t.width/t.height>16/9){n.style.width=16*t.height/9+"px";const e=1.15*t.height;n.style.height=e+"px";const r=-e*o;n.style.top=r+"px",n.style.left=.5*(t.width-16*t.height/9)+"px",i.style.width=16*t.height/9+"px",i.style.height=t.height+"px",i.style.top=0,i.style.left=.5*(t.width-16*t.height/9)+"px"}else{n.style.width="100%";const e=9*t.width/16*1.15;n.style.height=e+"px";const r=-e*o;n.style.top=.5*(t.height-9*t.width/16)+r+"px",n.style.left=0,i.style.width="100%",i.style.height=9*t.width/16+"px",i.style.top=.5*(t.height-9*t.width/16)+"px",i.style.left=0}Ni();const r=e.svg1.querySelector("#msd").getBoundingClientRect(),s=e.svg1.querySelector("#msd").getBBox(),a=Number((r.width/s.width).toFixed(3));document.documentElement.style.setProperty("--svgScale",a),dt()}function Mi(e=null){const t=document.getElementById("aboutPage");void 0!==document.documentElement.dataset.about?(t.style.opacity=0,setTimeout((()=>{delete document.documentElement.dataset.about,t.style.display="none"}),400),"mute"!==e&&K(p(["beepX3Downer","beepX2Downer","beepX1Downer"]),0,0,0,.3)):(document.getElementById("updateLog").classList.remove("show"),document.documentElement.dataset.about="show",t.style.display=null,t.style.opacity=0,setTimeout((()=>{t.style.opacity=1}),50),t.querySelector("div").scrollTop=0,"mute"!==e&&(K("beepX2Downer",0,0,0,.4),K("warningLow",.15,0,0,.3)))}function Ni(){const e=lr();if(null==e.logPlaceholderDom)return;const t=e.logPlaceholderDom.getBoundingClientRect();e.logDisplayDom.style.top=t.y+"px",e.logDisplayDom.style.left=t.x+"px",e.logDisplayDom.style.width=t.width+"px",e.logDisplayDom.style.height=t.height+"px";const o="ship"==e.pageState?.045:.036;e.logDisplayDom.style.fontSize=t.width*o+"px"}function ji(){const e=lr();setInterval((()=>{performance.now()-e.mostRecentLogTime<6e3||Math.random()<.5||(Math.random()<.05?Oi(Ui()):($i(),Math.random()>.3||setTimeout((()=>{$i()}),550)))}),5573)}function $i(){const e=m(8);let i="",r=!1;if(0==e)i=`${y(3,5)} ${p(t)} • ${y(2,4)} ${p(o)}`;else if(1==e)i=`Task: ${p(n)} / ${y(2,7)}.${y(1,3)} ${y(2,4)}`;else if(2==e)i=`${p(["Ensign","Lt."])} ${y(4)}: ${p(n)} ${y(2,4)}`;else if(3==e)r=!0,i=`${p(o)} ${y(2,4)} - ${p(o)} ${y(2,4)}`;else if(4==e){const e=c(9,19);i=p([`Current Heading: Starbase 80 • for ${p(["crew exchange","ship-wide maintenance"])}`,"Drink H2O: Holodeck might be fake, dehydration is very real",`${p(["Apple","Blueberry","Raspberry"])} Pie Eating Contest in ${c(2,7)} days. Prize: A ${p(["brand new","slightly used"])} ${p(["Padd","T88"])}`,`Upcoming assignment: Holodeck ${c(1,4)} waste removal`,`carbon filter maintenance on deck ${c(1,13)} • section ${c(11,29)}`,`${p(["PLASMA LEAK","COOLANT LEAK","ELEVATED TEMP.","DECONTAMINATION"])} IN JEFFERIES TUBE ON DECK ${c(3,13)} JUNCTIONS ${e}-${e+3}`])}else if(5==e)i=p(["Sonic Showers Advisory: Always replicate a larger towel","When in doubt, always use a medical tricorder","Engineering Reporting: Maximum Warp Me•Who","The purpose of life is a life of purpose",`Reminder: Anomaly consolidation duty in ${c(2,12)} hours`,"Warning • Water leak on deck 11 below the Cetacean Ops",`Alert: Cosmic Koala has been spotted by ${p(["Ensign","Lt Junior"])} ${p(["Mitchell","Stark","Crichton","Targaryen"])}`]);else if(6==e){const e=c(2,7);i=p([`Turboshaft lubing required between deck ${e} & deck ${e+c(1,6)} S•${c(2,20)}`,`duty call: Post Anomaly cleanup on deck ${c(2,13)} section ${c(10,36)}`,`TRANSPORTER ROOM ${c(1,5)} ${p(["CURRENTLY IN USE","REPAIRMENT NEEDED","UNDER MAINTENANCE","HEISENBERG COMPENSATOR STATUS: UNCERTAIN"])}`,"Upper deckers rumor: Rubber Ducky room has vanished","Question of the week: Can a transporter transport a transporter?","Question from lower decks: Is holodeck Inception a thing?",`Space news: Okudagram version 2383 beta ${c(2,13)} testing underway`])}else{const e=m(5);i=0==e?p(["DILITHIUM CHAMBER CONTAINMENT LEVEL","ANTIMATTER GENERATOR EFFICIENCY","FUSION REACTOR OUTPUT","WARP COILS EFFICIENCY","PLASMA INJECTOR STATUS"])+": "+c(70,100)+"%":1==e?"TIME REMAINING ON LEVEL "+c(1,5)+" DIAGNOSTIC: ≈ "+c(0,5)+"HR "+c(2,59)+"MIN":2==e?"ANOMALY DETECTED INSIDE HOLODECK "+c(1,3)+" >> "+p(["BADGEY 2.0","SUPER KNICK KNACK","HOLO M.McMAHAN","A FUNCTIONAL TOILET","PROFESSOR MORIARTY","COWBOY DATAS","ENSIGN SESKA","SMART BARCLAY","DOCTOR CHAOTICA"]):3==e?"WARNING • "+p([`turbolift ${c(1,5)}`,`replicator A${y(2)}`])+" TEMPORARILY INOPERABLE":c(17,47)+" SUBSPACE FREQUENCIES "+p(["ESTABLISHED","DETECTED","MONITORED","LOGGED","ARE CURRENTLY OPEN"])}Oi(i,r?"timePrefix":null)}function Pi(){lr().logPinned=!1}function Oi(e=" ",t=null,o=null){const n=lr();n.mostRecentLogTime=performance.now();const i="timePrefix"===t?`${S(void 0,void 0,di())} • ${e}`:e,r=document.getElementById("logDisplay"),s=document.createElement("span");s.textContent=i.toUpperCase(),!0===o&&(n.logPinned=!0),!0!==o&&n.logPinned?r.insertBefore(s,r.firstChild.nextSibling):r.insertBefore(s,r.firstChild),n.logDisplayToConsole&&console.log(i),yi();const a=r.childElementCount;if(a>25)for(let e=0;e<a-10;e++)r.removeChild(r.lastElementChild)}function Ui(e=null){let t=e;return"map"!==t&&"sickbay"!=t&&"home"!=t&&(t=p(["map","sickbay","home"])),p("sickbay"==t?["Sickbay tip: hit the Sickbay title to load a different biobed info","Sickbay tip: hit the patient's body change target position",`Sickbay tip: ${p(["ecg","eeg"])} graph is on a 3-second cycle`,`Sickbay tip: ${p(["etco2","capnogram"])} graph is on a 6-second cycle`,"Sickbay tip: normal O2 Saturation should be above 95%","Sickbay tip: normal ph value of a human = 7.35 to 7.45","Sickbay tip: tachycardia = heart rate greater than 100","Sickbay tip: bradycardia = heart rate less than 60","Sickbay tip: hyperglycemia = blood glucose level greater than 120",`Sickbay tip: brachial bp tends to be higher than ${p(["carotid","femoral"])} bp`,"Sickbay tip: abnormal troponin t level when greater than 0.4","Sickbay tip: patient id contains patient's race info","Sickbay tip: quantum signature is unique to each universe","To override Sickbay's aqua blue color scheme, head to 'ABOUT / SETTINGS'"]:"ship"==t?["MAP tip: warp core can be ejected by hitting its ejection hatch","MAP tip: there is a toilet on deck 12","MAP tip: the Stargate holomovie is available in Holodeck 3","MAP tip: Peanut Hamper can be spotted nearby the 'Nite Forward'","MAP tip: the doctor's spacecraft is parked in the engineering hull section","MAP tip: the 'MAP' title text is clickable","MAP tip: hit the 'LCARS' button near the upper left corner to go back home","MAP tip: the tiny ship's animation lasts approximately 12 seconds",'MAP tip: the "OPS RND" button will zoom in/out of a random spot of the ship',"To change the ship's name & registry number, head to 'HOME / ABOUT / SETTINGS'"]:["tip: the group of rings is a functional clock!","tip: the cosmic koala is hiding in one of the 'JWST IMAGES'","tip: head to 'ABOUT / SETTINGS' to modify some additional user settings","tip: re-activate the red alert to alternate its effect sound clip","tip: to toggle fullscreen mode, hit the small button next to the ship's registry number","tip: hit the time clock to change its display format","tip: auto mode can be customized. head to 'ABOUT / SETTINGS'","tip: audio volume can be adjusted. head to 'ABOUT / SETTINGS'","tip: if enabled, auto mode script will start after 30 sec of page idling"])}function Hi(e="logs"){const t=lr(),o=p(["blink1","blink2"]);"logs"==e?(t.configContentDom.style.visibility="hidden",t.configContentDom.style.opacity=0,t.configContentDom.classList.remove("enabled"),t.shipFrameDom.querySelector("#frameShipConfig").classList.remove("configsEnabled"),t.logDisplayDom.style.visibility="visible",t.logDisplayDom.style.opacity=1,t.logDisplayDom.classList.add(o),setTimeout((()=>{t.logDisplayDom.classList.remove(o)}),600),K("beepX1Down",0,0,0,.5)):(t.logDisplayDom.style.visibility="hidden",t.logDisplayDom.style.opacity=0,t.configContentDom.style.visibility="visible",t.configContentDom.style.opacity=1,t.configContentDom.classList.add("enabled"),t.shipFrameDom.querySelector("#frameShipConfig").classList.add("configsEnabled"),t.configContentDom.classList.add(o),setTimeout((()=>{t.configContentDom.classList.remove(o)}),600),K("beepX2Up",0,0,0,.4))}function _i(){"visible"==lr().logDisplayDom.style.visibility?Hi("configs"):Hi("logs")}function Gi(){const e=lr();e.bubbleTextTimer=setInterval((()=>{e.homeContentDom.querySelectorAll('[id^="bubbleText1"]').forEach((t=>{Math.random()<.3&&t.setAttribute("stroke-dashoffset",c(-450,450)),Math.random()<.3&&t.setAttribute("stroke-dasharray",`${c(20,250)} ${c(20,120)} ${c(20,250)} ${c(20,120)} ${c(20,250)} ${c(20,120)}`),Math.random()<.3&&t.setAttribute("stroke",`var(--${p(e.allColorCssVarNames)})`),t.style.transitionDelay=c(-300,900)+"ms",Math.random()<.2?t.classList.add("blink2"):t.classList.remove("blink2"),t.style.opacity=u(.3,1)}))}),1700)}function Xi(){const e=lr();clearInterval(e.bubbleTextTimer),e.bubbleTextTimer=null}function Vi(){const e=lr();Oi("• A l e r t •"),e.redAlertTimer2=setTimeout((()=>{Oi("• • A  l  e  r  t • •"),e.redAlertTimer2=setTimeout((()=>{Oi("• • • T h i s  i s    R  e  d     A  l  e  r  t • • •")}),1500)}),1200)}function Wi(e,t="updatingServer"){const o=lr();if(o.redAlertStatus=!o.redAlertStatus,o.redAlertStatus?(document.documentElement.dataset.redAlert="",K("startRedAlert"),o.remoteUi?(o.svgRemote.querySelector("#btnAlertStatus").classList.add("redAlertBlink"),o.svgRemote.querySelector("#frame").classList.add("redAlertBlink"),o.svgRemote.querySelector("#grids").classList.add("redAlertBlink")):(o.svg1.getElementById("frameHeader").classList.add("redAlertBlink"),o.homeFrameDom.querySelector("#homeBtn4 > path").classList.add("redAlertBlink"),o.homeContentDom.querySelector("#homeClock").classList.add("redAlertBlink"),o.homeContentDom.querySelector("#homeDate").classList.add("redAlertBlink"),o.shipFrameDom.querySelectorAll("#subTitleBar, #subTitle, #shipFrame1d, #shipFrame1e, #shipClock, #btnRedAlert").forEach((e=>{e.classList.add("redAlertBlink")}))),o.svg2.getElementById("raBar").classList.add("redAlertBlink"),o.svg2.getElementById("raText").classList.add("redAlertBlink"),Oi("W a r n i n g","timePrefix"),o.redAlertTimer2=setTimeout((()=>{Vi()}),1e3),o.redAlertTimer=setInterval((()=>{Vi()}),8e3)):(delete document.documentElement.dataset.redAlert,K("stopRedAlert"),o.remoteUi?(o.svgRemote.querySelector("#btnAlertStatus").classList.remove("redAlertBlink"),o.svgRemote.querySelector("#frame").classList.remove("redAlertBlink"),o.svgRemote.querySelector("#grids").classList.remove("redAlertBlink")):(o.svg1.getElementById("frameHeader").classList.remove("redAlertBlink"),o.homeFrameDom.querySelector("#homeBtn4 > path").classList.remove("redAlertBlink"),o.homeContentDom.querySelector("#homeClock").classList.remove("redAlertBlink"),o.homeContentDom.querySelector("#homeDate").classList.remove("redAlertBlink"),o.shipFrameDom.querySelectorAll("#subTitleBar, #subTitle, #shipFrame1d, #shipFrame1e, #shipClock, #btnRedAlert").forEach((e=>{e.classList.remove("redAlertBlink")}))),o.svg2.getElementById("raBar").classList.remove("redAlertBlink"),o.svg2.getElementById("raText").classList.remove("redAlertBlink"),clearInterval(o.redAlertTimer),clearTimeout(o.redAlertTimer2),o.redAlertTimer=null,o.redAlertTimer2=null,Oi("Alert Status: Normal","timePrefix")),o.serverApiConnection&&"updatingServer"==t)try{vi("setStatus",Ai())}catch(e){}}function Yi(e=null){const t=lr(),o=t.svg1.querySelector("#homeConfig"),n=o.querySelector("#homeConfigTabBtn").getBBox(),i=o.getBBox(),r=t.svg1.querySelector("#homeWindow"),s=r.getBBox();let a;if("normal"==e&&(a="normal"),a="minimized"==e?"minimized":"homeConfigMinimized"in document.documentElement.dataset?"normal":"minimized",d3.selectAll([r,o]).interrupt(),"minimized"==a){K("longTaskLow",0,0,0,.3),document.documentElement.dataset.homeConfigMinimized="init",t.configContentDom.classList.add("minimizedHide");const e=s.height-(n.y-s.y)-n.height;d3.select(r).transition().duration(400).ease(d3.easeBackIn).attr("transform",`translate(${s.width} 0)`),d3.select(o).transition().delay(100).duration(900).ease(d3.easeBackOut.overshoot(1.1)).attr("transform",`translate(${i.width-n.width} 0)`).transition().delay(200).duration(900).ease(d3.easeCubicInOut).attr("transform",`translate(${i.width-n.width} ${e})`).on("end",(()=>{document.documentElement.dataset.homeConfigMinimized=""}))}else K("shortRandomBeep",0,0,0,.3),K("warningLow",.65,0,0,.5),K("beepX2Up",1.3,0,0,.3),document.documentElement.dataset.homeConfigMinimized="exit",d3.select(o).transition().duration(600).ease(d3.easeBackOut.overshoot(1.3)).attr("transform","translate(0 55)").transition().duration(600).ease(d3.easeCubicOut).attr("transform","translate(0 0)").on("end",(()=>{t.configContentDom.classList.remove("minimizedHide")})),r.style.opacity<0&&(r.style.opacity=0),d3.select(r).transition().duration(300).ease(d3.easeCubicOut).attr("transform","translate(0 0)").transition().delay(300).duration(0).on("end",(()=>{delete document.documentElement.dataset.homeConfigMinimized}))}function zi(e=null){const t=lr(),o=t.svg1.querySelector("#homeClock"),n=t.svg1.querySelector("#homeDate");let i;"normal"==e&&(i="normal"),i="minimized"==e||"normal"==o.dataset.currentSize?"minimized":"normal","minimized"==i?(o.dataset.currentSize="minimized",n.style.visibility="hidden",d3.select(o).transition().delay(1e3).duration(1e3).ease(d3.easeCubicOut).attr("transform","translate(675 1830) scale(0.7) translate(-675 -1815)").transition().delay(350).duration(800).ease(d3.easeCubicOut).attr("transform","translate(682 1955) scale(0.6) translate(-675 -1815)").on("end interrupt cancel",(()=>{n.style.visibility="hidden",o.dataset.currentSize="minimized"}))):(o.dataset.currentSize="normal",d3.select(o).transition().delay(1200).duration(1100).ease(d3.easeCubicInOut).attr("transform","translate(0 0) scale(1)").on("end interrupt cancel",(()=>{n.style.visibility="visible",o.dataset.currentSize="normal"})))}function Zi(e){const t=e.getBBox();return{x:t.x+.5*t.width,y:t.y+.5*t.height}}function Qi(e,t=null){let o;o=null!==t?t.getBBox():e.getBBox(),e.setAttribute("transform-origin",`${o.x+.5*o.width} ${o.y+.5*o.height}`)}function Ji(e,t=null){let o;o=null!==t?t.getBBox():e.getBBox();const n=o.x+.5*o.width,i=o.y+.5*o.height;return e.dataset.transformOriginX=n,e.dataset.transformOriginY=i,{x:n,y:i}}function Ki(e){return{x:Number(e.dataset.transformOriginX),y:Number(e.dataset.transformOriginY)}}function er(e){e.classList.remove("blink1","blink2","blink3")}function tr(e,t="random"){if(null==e)return void console.log("cannot blink - null node");"random"==t&&(t=p(["blink1","blink2","blink3"])),er(e),setTimeout((()=>{e.classList.add(t),setTimeout((()=>{er(e)}),700)}),50)}function or(){const e=Math.random();return e<.15?d3.easeBackInOut.overshoot(u(.5,3)):e<.3?d3.easeElasticInOut.amplitude(u(.9,1.5)).period(u(.2,.4)):e<.45?d3.easeBounceInOut:e<.6?d3.easeCubicIn:e<.75?d3.easeCubicOut:e<.9?d3.easeCubicInOut:d3.easeLinear}function nr(e=null,t=null){if("string"!=typeof e||"string"!=typeof t)return;if("shipName"!==e&&"shipClass"!==e&&"shipRegistry"!==e)return;const o=(i=t,"text"==Kn[n=e][0]&&"string"==typeof i?i.length>=Kn[n][1]&&i.length<=Kn[n][2]||`error: ${n} text can only have ${Kn[n][1]} to ${Kn[n][2]} characters`:`error: ${n} does not have a valid value`);var n,i;if(!0!==o)return void console.log(o);const r=lr(),s=r.svg1.querySelector("#frameHeader"),a=s.querySelector("#shipName"),l=s.querySelector("#shipRegistry"),c=s.querySelector("#headerCenterBar");if(r.userSessionSettings[e]=t,"shipName"===e){let e=r.userSessionSettings.shipClass.length>0?`${t}  /  ${r.userSessionSettings.shipClass} CLASS`:t;a.querySelector("tspan").textContent=e.toUpperCase()}else if("shipClass"===e){let e=t.length>0?`${r.userSessionSettings.shipName}  /  ${t} CLASS`:`${r.userSessionSettings.shipName}`;a.querySelector("tspan").textContent=e.toUpperCase()}else l.querySelector("tspan").textContent=t.toUpperCase();setTimeout((()=>{const t=a.getBBox().width,o=l.getBBox().width;"shipRegistry"===e&&l.setAttribute("transform",`translate(${parseFloat(l.dataset.defaultWidth)-o} 0)`),c.setAttribute("x",parseFloat(c.dataset.defaultX)+(t-parseFloat(a.dataset.defaultWidth))),c.setAttribute("width",parseFloat(c.dataset.defaultWidth)-(t-parseFloat(a.dataset.defaultWidth))+(parseFloat(l.dataset.defaultWidth)-o))}),100)}function ir(e="MASTER SYSTEM DISPLAY"){const t=document.querySelector("#msdContainer #subTitle");t.querySelector("tspan").textContent=e;const o=Number(t.getBBox().width.toFixed(2)),n=parseFloat(t.dataset.defaultWidth)-o;t.setAttribute("transform",`translate(${n} 0)`),d3.select(t).attr("opacity",0).attr("fill","var(--secondary)").transition().duration(800).attr("opacity",1).transition().delay(100).duration(0).on("end",(function(){tr(this,"blink2"),this.setAttribute("fill","var(--primaryBright)")}));const i=document.querySelector("#msdContainer #subTitleBar");d3.select("#msdContainer svg #subTitleBar").transition().ease(d3.easeCubicOut).duration(600).attr("width",parseFloat(i.dataset.defaultWidth)+n)}window.processServerEvent=function(e,t={}){const o=lr();if(!o.serverApiConnection)return;if(!o.clientIsReady)return void console.log("App is initializing. This client is not yet ready to process server event.");if("string"!=typeof e)return void console.log("error: server event name is not a valid type");console.log(`Processing server event [${e}] with data:`),console.log(t);const n=e.toLowerCase();if(n=="updateState".toLowerCase()||n=="responseToFetchStatus".toLowerCase()){if("object"!=typeof t)return void console.log("error: event data not found");if("colorSchemeName"in t){Ei(t.colorSchemeName)&&ni("colorSchemeName",t.colorSchemeName)}"alertStatus"in t&&("red"==t.alertStatus.toLowerCase()?o.redAlertStatus?console.log("Already in Red Alert. Alert status not changed."):(Wi(null,"NotUpdatingServer"),console.log("Switching to Red Alert")):"normal"==t.alertStatus.toLowerCase()?o.redAlertStatus?(Wi(null,"NotUpdatingServer"),console.log("Switching Off Red Alert")):console.log("Already in normal status. Alert status not changed."):console.log("requested alert status is currently not available")),"shipName"in t&&nr("shipName",t.shipName),"shipClass"in t&&nr("shipClass",t.shipClass),"shipRegistry"in t&&nr("shipRegistry",t.shipRegistry)}else if(n=="updateSensorData".toLowerCase()){if("object"!=typeof t)return;let e=null,o=null,n=null;Object.keys(t).forEach((i=>{"temperature"==i.toLowerCase()&&(e=Number(t[i])),"humidity"==i.toLowerCase()&&(o=Number(t[i])),"pressure"==i.toLowerCase()&&(n=Number(t[i]))}));let i="";"number"==typeof o&&(i=`Humidity: ${o.toFixed(1)}%`,"number"==typeof n&&(i+=",  ")),"number"==typeof n&&(i+=`Pressure: ${n.toFixed(1)} hPa`),i.length>0&&Oi(i),"number"==typeof e&&Oi(`Current temperature is ${e.toFixed(1)}°C`,"timePrefix")}else if(n=="remoteLogMsg".toLowerCase()){if("object"!=typeof t)return;let e="",o=!1,n=!1;Object.keys(t).forEach((i=>{switch(i.toLowerCase()){case"message":e=String(t[i]);break;case"showTimePrefix".toLowerCase():o=Boolean(t[i]);break;case"playSound".toLowerCase():n=Boolean(t[i])}})),e.trim().length>0&&(Oi(e,o?"timePrefix":null),n&&K(p(["affirmative","awaiting"]),0,0,0,.6))}};var rr;function sr(e){(e.ctrlKey||e.metaKey)&&e.shiftKey&&"KeyF"===e.code?gi():e.ctrlKey||e.metaKey||e.shiftKey||"KeyM"!==e.code||Y()}rr=a("ai42B").getBundleURL("b1Qpi")+"images/"+a("gTwGg").resolve("cPYTU");const ar={appInitAssetPreloaded:!1,userSessionSettings:function(){const e=ii();let t={...ei};return"useLastVisitSettings"in e==!1||!0!==e.useLastVisitSettings||(Object.keys(Kn).forEach((o=>{const n=Kn[o];if(o in e){const i=e[o];2==n.length&&"number"==typeof n[0]&&"number"==typeof n[1]?i>=n[0]&&i<=n[1]&&(t[o]=i):3==n.length&&"text"===n[0]&&"number"==typeof n[1]&&"number"==typeof n[2]?i.length>=n[1]&&i.length<=n[2]&&(t[o]=i):n.includes(i)&&(t[o]=i)}})),t.audioEnabled&&t.audioFxLevel<=0&&(t.audioEnabled=!1,t.audioFxLevel=ei.audioFxLevel)),t}(),primaryColorCssVarNames:["primary","primarySat","primaryDark","primaryDarker","primaryBright","primaryBrighter","primaryBrightest"],secondaryColorCssVarNames:["secondary","secondaryBright","secondaryBrighter","secondaryBrightest"],allColorCssVarNames:[],nonDarkColorCssVarNames:["primary","primarySat","primaryBright","primaryBrighter","primaryBrightest","secondary","secondaryBright","secondaryBrighter","secondaryBrightest"],colorSchemeNames:["Ritos Yellow","Sickbay Aqua","Picard Gray","Nemesis Cyan","Padd Blue","Titan PurpleHead","Vancouver Orange","Merced Green","Oakland Glory","Inglewood Violet","Carlsbad Nature","Prodigy Blast","Ketracel White","Disco Beige","Shipyard Blueprint","Shipyard Blueprint II","Red Alert"],themeColors:["rgb(255, 211, 0)","rgb(19, 183, 255)","rgb(255, 59, 5)","rgb(22, 155, 179)","rgb(255, 211, 0)","rgb(201, 191, 255)","rgb(252, 80, 11)","rgb(0, 242, 0)","rgb(36, 22, 255)","rgb(252, 34, 255)","rgb(201, 255, 114)","rgb(245, 138, 255)","rgb(222, 222, 222)","rgb(241, 220, 167)","rgb(0, 32, 127)","rgb(0, 32, 127)","rgb(255, 0, 0)"],colorSchemeRatings:[5,4,5,5,4,3,4,3,0,0,0,0,5,0,0,5,0],currentColorScheme:0,bgHue:0,bgLevel:0,bgPreBlackLevel:0,bgShowingBlack:!0,sickbayStatus:!1,jwstStatus:!1,jwstImg:null,sounds:null,videoBox:null,svgWidth:null,svgHeight:null,svg1:null,svg2:null,svgRemote:null,uiInitializing:!0,pageState:"init",pageStatus:"init",pageTimers:[],configContentDom:null,homeFrameDom:null,homeContentDom:null,sickbayContentDom:null,shipFrameDom:null,shipContentDom:null,ringClockCenterDom:null,shipRef:{shipD3:null,zoomInBoundaryBBox:null,zoomInBoundaryCX:null,zoomInBoundaryCY:null,ttA:null,ttB:null,specialZoomInBoundaryBBox:null,specialZoomInBoundaryCX:null,specialZoomInBoundaryCY:null,specialZoomIn_ttA:null,specialZoomIn_ttB:null},shipLabelsVisible:!1,shipLabelsHotArea:[],shipLabelGotHit:!1,shipZoomMode:!1,shipHitareaZoomToBBox:{},logDisplayDom:null,logPlaceholderDom:null,logPinned:!1,logDisplayToConsole:!1,bubbleTextTimer:null,redAlertStatus:!1,redAlertTimer:null,redAlertTimer2:null,bufferTimeStatus:!1,bufferTimeCountdown:60,bufferTimeTimer:null,bufferTimeTextOrigin:null,bufferTimeTextWidthOffset:[],ritosTopFieldTimer:null,ritosFrontShieldTimer:null,mostRecentLogTime:0,rubberDuckyPositions:[],ani:{},autoMode:!0,pageVisible:!0,remoteUi:!1,remoteUiSvgReady:null,currentDateCache:null,clockIntervalTimer:null,serverTime:void 0,isSafari:!1,revisionDate:document.getElementById("revisionDate").textContent,buildNumber:20230112.2,buildFile:"./static/build_info.json",buildCheckLastTime:0,clientIsReady:!1,serverApiData:null,serverApiConnection:!0,debugMode:!1};if(ar.serverApiData={projectRITOS:`${ar.buildNumber}`,clientUid:y(7),alertStatus:"normal",colorSchemeName:"Ritos Yellow",themeColor:{r:0,g:0,b:0}},ar.autoMode=ar.userSessionSettings.autoMode,ar.allColorCssVarNames=ar.primaryColorCssVarNames.concat(ar.secondaryColorCssVarNames),ar.isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&window.safari.pushNotification).toString(),ar.isSafari&&(document.documentElement.dataset.safari=""),ar.serverApiConnection){window.location.search.toLocaleLowerCase().indexOf("remote")>0&&(ar.remoteUi=!0,ar.remoteUiSvgReady=!1)}function lr(){return ar}document.body.style.backgroundColor="#000",function(){const e=lr(),t=document.getElementById("localSettingsContent");let o;o=e.userSessionSettings.useLastVisitSettings?"true":"false",t.querySelector(`div.btn[data-key="usePreviousSettings"][data-value="${o}"]`).classList.add("selected"),o=e.userSessionSettings.autoMode?"true":"false",t.querySelector(`div.btn[data-key="autoMode"][data-value="${o}"]`).classList.add("selected"),e.userSessionSettings.autoModeColorScheme&&t.querySelector('div.btn[data-key="autoModeColorScheme"]').classList.add("selected"),e.userSessionSettings.autoModeRedAlert&&t.querySelector('div.btn[data-key="autoModeRedAlert"]').classList.add("selected"),e.userSessionSettings.autoModeBufferTime&&t.querySelector('div.btn[data-key="autoModeBufferTime"]').classList.add("selected"),e.userSessionSettings.autoModeYtVideo&&t.querySelector('div.btn[data-key="autoModeYtVideo"]').classList.add("selected"),o=e.userSessionSettings.audioEnabled?"true":"false",t.querySelector(`div.btn[data-key="audioEnabled"][data-value="${o}"]`).classList.add("selected");const n=t.querySelector("#audioFxLevel"),i=Math.round(100*e.userSessionSettings.audioFxLevel);n.style.setProperty("--audioLevel",i+"%"),n.dataset.audioLevel=`${i}%`,t.querySelector('input[data-key="shipName"]').value=e.userSessionSettings.shipName.toUpperCase()==ei.shipName.toUpperCase()?"":e.userSessionSettings.shipName,t.querySelector('input[data-key="shipClass"]').value=e.userSessionSettings.shipClass.toUpperCase()==ei.shipClass.toUpperCase()?"":e.userSessionSettings.shipClass,t.querySelector('input[data-key="shipRegistry"]').value=e.userSessionSettings.shipRegistry.toUpperCase()==ei.shipRegistry.toUpperCase()?"":e.userSessionSettings.shipRegistry,t.classList.toggle("usePreviousSettings",e.userSessionSettings.useLastVisitSettings)}(),ar.setPageState=e=>{"home"!=e&&"ship"!=e&&"remote"!=e||(ar.pageState=e,document.documentElement.dataset.pageState=e)},ar.setDocumentCurrentPage=e=>{"home"!=e&&"ship"!=e&&"remote"!=e||(document.documentElement.dataset.currentPage=e)};const cr=async function(e=!1){const t=432e5;if(!e&&performance.now()-ar.buildCheckLastTime<t)return;ar.buildCheckLastTime=performance.now();const o=ar.buildFile+"?r2="+Math.random();let n,i={};try{const e=await fetch(o);i=await e.json()}catch(e){return void(ar.buildCheckLastTime-=3456e4)}try{if(n=parseInt(localStorage.getItem("cerritos_tmpReloadCounter")),isNaN(n)||n<0?n=0:n++,localStorage.setItem("cerritos_tmpReloadCounter",n),n>0)return void localStorage.removeItem("cerritos_tmpReloadCounter")}catch(e){return}if(i.buildNumber>ar.buildNumber)location.reload();else try{localStorage.removeItem("cerritos_tmpReloadCounter")}catch(e){return}};setInterval((()=>{cr()}),108e5),cr(!0),document.addEventListener("visibilitychange",(function(){document.hidden||cr()}),!1),function(){try{let e=parseFloat(localStorage.getItem("projectRitos_lastVisitVersion"));if(localStorage.setItem("projectRitos_lastVisitVersion",ar.buildNumber),isNaN(e))return;Math.floor(ar.buildNumber)-Math.floor(e)>=1&&document.getElementById("revisionDate").classList.add("highlight")}catch(e){return}}();const dr=g((e=>{Fi()}),60);function ur(e){return new Promise((t=>setTimeout(t,e)))}window.addEventListener("resize",(function(){dr()}));function mr(){ar.svg1.onpointerdown=e=>{"ship"!==ar.pageState||!ar.shipLabelsVisible||ar.shipZoomMode||ar.shipLabelGotHit||Le(Number(e.clientX.toFixed(0)),Number(e.clientY.toFixed(0)))}}const yr=async function(){ar.debugMode&&(console.log("%c !!! debugMode is on {obj exposed} !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ","color:#ff9999; background:#440000"),window.CRapp=ar),!0===ar.demo&&console.log("%c *** demo mode is on ***","color:#cc44ff; background:#110022"),ar.serverApiConnection&&console.log("%c >>>>>>> WebSocket API Connection is permitted <<<<<<< ","color:#ff9900; background:#442200"),Oi("System Initiating . . .","timePrefix"),await async function(){if(!0===ar.demo)return void(ar.serverTime=void 0);const e=ar.buildFile+"?r1="+Math.random();try{ar.performanceMarkerServer=performance.now();const t=await fetch(e,{method:"HEAD"});ar.performanceMarkerServer=(ar.performanceMarkerServer+performance.now())/2;const o=t.headers.get("date").split("GMT");ar.serverTime=new Date(o[0]+"GMT"),"invalid date"==ar.serverTime.toString().toLowerCase()&&(ar.serverTime=void 0,ar.performanceMarkerServer=void 0)}catch(e){return ar.serverTime=void 0,void(ar.performanceMarkerServer=void 0)}}(),await async function(){let e=document.documentElement;if(e.classList.contains("wf-active"))return!0;let t=5e3;e.classList.contains("wf-inactive")&&(t=3e3);for(let o=0;o<t/200&&(await ur(200),!e.classList.contains("wf-active"));o++);}(),ar.svgWidth=Number(document.querySelector("#msdContainer > svg").getAttribute("width")),ar.svgHeight=Number(document.querySelector("#msdContainer > svg").getAttribute("height")),ar.getPointerLocationOnSvg=(e,t)=>{const o=ar.svgWidth/ar.svgHeight,n=document.documentElement.clientWidth,i=document.documentElement.clientHeight;let r,s,a,l,c;return n/i>o?(r=i/ar.svgHeight,s=ar.svgWidth*r,a=i,l=.5*(n-s),c=0):(r=n/ar.svgWidth,s=n,a=ar.svgHeight*r,l=0,c=.5*(i-a)),{x:Number(((e-l)/r).toFixed(1)),y:Number(((t-c)/r).toFixed(1))}},Ti(),ti("ldGlare"),hi(),document.addEventListener("keydown",sr,!1),document.querySelector("#updateLog > h1").onpointerdown=function(){document.querySelector("#updateLog").classList.toggle("show"),tr(this),K("shortRandomBeep",0,0,0,.25)}},pr=function(){document.querySelector("#aboutIntroLine").classList.add("active"),setTimeout((()=>{"show"!==document.documentElement.dataset.about&&(Mi("mute"),setTimeout((()=>{document.body.style.backgroundColor=null,document.querySelector("#aboutPage #aboutIntro").remove(),document.querySelector("#aboutPage .aboutContent").style.display=null,ar.stopStartUpAudioContextListener(),ar.resumeAudioContext=null,ar.stopStartUpAudioContextListener=null,delete ar.resumeAudioContext,delete ar.stopStartUpAudioContextListener}),200)),document.querySelector("#msdContainer > svg #frameHeader").style.opacity=0,setTimeout((()=>{document.querySelector("#msdContainer").style.opacity=1,Oi("BUILD VERSION "+ar.revisionDate),ar.userSessionSettings.ldGlare&&Ri(!0,"noLog","mute"),setTimeout((()=>{K("powerUp"),document.querySelector("#msdContainer > svg #frameHeader").style.opacity=1}),500)}),600),setTimeout((()=>{ar.remoteUi?(St(),Oi("Loading LD REMOTE LCARS . . .","timePrefix")):(gt(),Oi("Loading LD LCARS . . .","timePrefix"))}),1800),ji(),Ci()}),3e3),ar.remoteUi||setTimeout((()=>{mr(),ar.autoMode&&Gn("noLog")}),6e3)};!function(){const e=lr();e.jwstImg={fileRef:[a("gdjxA"),a("cRw7W"),a("ashtd"),a("fShS2"),a("lyPys"),a("bOTFL"),a("kUZfR"),a("8MnPM"),a("ffGfb"),a("4FHTV"),a("lsNJd")],description:["NGC 3324 in Carina Nebula / credits: NASA•JWST•STScI","Southern Ring Nebula / credits: NASA•JWST•STScI","The Pillars of Creation • Eagle Nebula / credits: NASA•JWST•STScI","galaxy cluster SMACS 0723 / credits: NASA•JWST•STScI","Stephan’s Quintet / credits: NASA•JWST•STScI","Tarantula Nebula / credits: NASA•JWST•STScI","Cartwheel Galaxy / credits: NASA•JWST•STScI","galaxy pair VV 191 / credits: NASA•Hubble•JWST•STScI","The Pillars of Creation • MIRI Image / credits: NASA•JWST•STScI","L1527 & Protostar • NIRCam Image / credits: NASA•JWST•STScI","Dwarf Galaxy WLM • NIRCam Image / credits: NASA•JWST•STScI"],starRotation:[0,0,0,0,30,0,0,0,0,0,0],filePreloaded:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],preloadedIndexes:[],currentIndex:null,nextIndex:null,huggyIndex:5,soundTimer:null},e.jwstImg.nextIndex=m(e.jwstImg.fileRef.length),Je(e.jwstImg.nextIndex),e.jwstImg.nextImageReady=()=>Qe(e.jwstImg.nextIndex)}(),function(){const e=lr();e.sounds={audioCtx:new AudioContext,sfxMasterGainNode:null,sbgMasterGainNode:null,assetReady:!1,bgTimerId:null,soundFilesLoaded:0,clips:{},soundTrackBg:null,soundTrackFx:null,audioMainSwitch:e.userSessionSettings.audioEnabled,tempSettingsAudioSwitch:null,soundTrackBgMute:!1,soundTrackFxMute:!1,soundTrackBgVolume:.3,soundTrackFxVolume:e.userSessionSettings.audioFxLevel,redAlertTrackNode:null,redAlertTrackNames:[],redAlertTrackNameCurrentIndex:null},e.resumeAudioContext=()=>{"running"!=e.sounds.audioCtx.state&&(e.sounds.audioCtx.resume(),e.sounds.audioMainSwitch&&z())},document.body.addEventListener("pointerdown",e.resumeAudioContext,!1),document.querySelector("#aboutPage").addEventListener("pointerdown",e.resumeAudioContext,!1),e.stopStartUpAudioContextListener=()=>{document.body.removeEventListener("pointerdown",e.resumeAudioContext,!1),document.querySelector("#aboutPage").removeEventListener("pointerdown",e.resumeAudioContext,!1)},e.sounds.audioCtx.onstatechange=()=>{"running"==e.sounds.audioCtx.state&&e.userSessionSettings.audioEnabled&&1==e.sounds.masterGainNode.gain.value&&z()};const t={};let o=0;async function n(t){return await async function(t){const o=await fetch(t),n=await o.arrayBuffer();return await e.sounds.audioCtx.decodeAudioData(n)}(t)}t.c804=new URL(B),t.c805=new URL(I),t.c806=new URL(q),t.c807=new URL(R),t.c811=new URL(F),t.c812=new URL(M),t.c813=new URL(N),t.c815=new URL(j),t.c816=new URL($),t.c817a=new URL(P),t.c817b=new URL(O),t.c824=new URL(U),t.c826=new URL(H),t.c829=new URL(_),t.p001=new URL(G),t.p002=new URL(X),t.alert01=new URL(V),t.alert02=new URL(W),e.sounds.redAlertTrackNames.push("alert01"),e.sounds.redAlertTrackNames.push("alert02"),e.sounds.redAlertTrackNameCurrentIndex=m(e.sounds.redAlertTrackNames.length);for(const i in t)n(t[i].href).then((n=>{o++,e.sounds.assetReady=o==Object.keys(t).length,e.sounds.clips[i]=n}));e.sounds.masterGainNode=e.sounds.audioCtx.createGain(),e.sounds.masterGainNode.connect(e.sounds.audioCtx.destination),e.sounds.masterGainNode.gain.value=e.sounds.audioMainSwitch?1:0,e.sounds.sfxMasterGainNode=e.sounds.audioCtx.createGain(),e.sounds.sfxMasterGainNode.connect(e.sounds.masterGainNode),e.sounds.sfxMasterGainNode.gain.value=e.sounds.soundTrackFxVolume;const i=document.getElementById("aboutIntroAudio");i.style.opacity=1,i.querySelector("span:first-child").addEventListener("pointerdown",(e=>{Y(),e.stopPropagation()}))}(),ar.remoteUi&&function(){const e=lr(),t=new URL(rr);fetch(t).then((e=>e.text())).then((t=>{document.getElementById("msdContainer").insertAdjacentHTML("beforeend",t);const o=document.querySelector("#msdContainer > :last-child");o.setAttribute("id","svgRitosRemote"),o.querySelector("#refBgBox").remove(),document.documentElement.dataset.ritosRemote="",e.remoteUiSvgReady=!0,e.svgRemote=o,e.logPlaceholderDom=o.querySelector("#ritosRemoteLogBoxRef"),o.querySelector("#btnAlertStatus").onpointerdown=function(){Wi();this.querySelector('[id^="txtBig"] tspan:nth-child(2)').textContent=e.redAlertStatus?"RED":"NORMAL"},o.querySelector("#btnColorScheme").onpointerdown=function(){const e=Di();if(null==e)return;const t=e.toUpperCase().split(" ");this.querySelector('[id^="txtBig"] tspan:nth-child(1)').textContent=t.shift(),this.querySelector('[id^="txtBig"] tspan:nth-child(2)').textContent=t.join(" ")},o.querySelector("#btnAudio").onpointerdown=function(e){Y(),tr(e.target,"blink2")};const n=o.querySelector("#btnMiniShip"),i=o.querySelector("#miniShip"),r=document.querySelector("#msdContainer2 > svg #ritosTop"),s=document.querySelector("#msdContainer2 > svg #ritosFront");r.style.display="none",s.style.display="none",n.dataset.view="side",o.querySelector("#btnMiniShip").onpointerdown=function(e){K("shortRandomBeep",0,0,0,.4),"side"==e.target.dataset.view?(n.dataset.view="top",i.style.display="none",r.style.display=null):"top"==e.target.dataset.view?(n.dataset.view="front",r.style.display="none",s.style.display=null):(n.dataset.view="side",s.style.display="none",i.style.display=null)}}))}();let hr=setInterval((function(){ar.appInitAssetPreloaded=ar.jwstImg.nextImageReady()&&ar.sounds.assetReady&&!1!==ar.remoteUiSvgReady,"complete"===document.readyState&&ar.appInitAssetPreloaded&&(clearInterval(hr),delete ar.appInitAssetPreloaded,yr().then((()=>{pr()})))}),!0===ar.demo?3e3:800)}();