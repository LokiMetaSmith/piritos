function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}var t,o,n,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},a=r.parcelRequire960c;function l(){return 2*Math.floor(2*Math.random())-1}function c(e,t){return t<e&&([e,t]=[t,e]),Math.floor(Math.random()*(t-e+1))+e}function d(e,t=0,o=1){return Math.min(o,Math.max(e,t))}function u(e,t){return t<e&&([e,t]=[t,e]),Math.random()*(t-e)+e}function m(e=2){return Math.floor(Math.random()*e)}function y(e=1,t){null==t&&(t=e);const o=c(e,t);return c(Math.pow(10,o-1),Math.pow(10,o)-1)}function p(e){return Array.isArray(e)?0==e.length?"":e[m(e.length)]:""}function h(e,t,o=0){return(e+="").length>=t?e:new Array(t-e.length+1).join(o)+e}function g(e,t=1e3){let o,n=!1;const r=()=>{null==o?n=!1:(e(...o),o=null,setTimeout(r,t))};return(...i)=>{n?o=i:(e(...i),n=!0,setTimeout(r,t))}}function f(e){return e.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()})).replace(/([^\d])(\d)/g,"$1 $2")}function b(e,t,o){e.push(setTimeout(t,o))}function S(e="24hour",t="showSeconds",o=null){null===o&&(o=new Date);let n=o.getHours();"24hour"!==e&&(n%=12,0==n&&(n=12));let r="";return"showSeconds"===t&&(r=":"+h(o.getSeconds(),2)),h(n,2)+":"+h(o.getMinutes(),2)+r}null==a&&((a=function(e){if(e in i)return i[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return i[e]=o,t.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},r.parcelRequire960c=a),a.register("gC69E",(function(t,o){var n,r;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var i={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)i[t[o]]=e[t[o]]},r=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("2SJGw",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("iQImC"),import.meta.url).toString()})),a.register("9yuim",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("jnR18"),import.meta.url).toString()})),a.register("goIwB",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("i1II7"),import.meta.url).toString()})),a.register("kJ65z",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("gHM5V"),import.meta.url).toString()})),a.register("5QuxL",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("8vWiv"),import.meta.url).toString()})),a.register("cMAtB",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("5wKGe"),import.meta.url).toString()})),a.register("1FKaC",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("h3rC8"),import.meta.url).toString()})),a.register("jDFZu",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("1f2nB"),import.meta.url).toString()})),a.register("7c70B",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("co3hJ"),import.meta.url).toString()})),a.register("cxwFI",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("7cDHb"),import.meta.url).toString()})),a.register("9i5D7",(function(e,t){e.exports=new URL("images/"+a("gC69E").resolve("hhrPH"),import.meta.url).toString()})),a("gC69E").register(JSON.parse('{"1XQMH":"main.b083225b.js","GYgyQ":"c804.df34a5a3.mp3","jIIE4":"c805.fe04160f.mp3","euBSk":"c806.7471c895.mp3","aYIhI":"c807.7dbb1f94.mp3","165pf":"c811.193629bd.mp3","3fx4W":"c812.cec97ca8.mp3","dDASI":"c813.6adaed39.mp3","jSwqj":"c815.bf4e6816.mp3","dw4vA":"c816.983554c8.mp3","7ymAb":"c817a.0dc43017.mp3","88U70":"c817b.f15eeefd.mp3","aN2Mx":"c824.b5843ba5.mp3","h6QfU":"c826.c92c5ee6.mp3","2NEkI":"c829.ee19f85d.mp3","exiRJ":"powering_up.ebd58d74.mp3","i84wG":"powering_down.3cae8d9b.mp3","cphWt":"redalert1a.02b04c25.mp3","1yFaE":"redalert2a.a124b93c.mp3","iQImC":"jwst001.42fb05db.jpg","jnR18":"jwst002.645fdddf.jpg","i1II7":"jwst003.e80af99c.jpg","gHM5V":"jwst004.b6a031a4.jpg","8vWiv":"jwst005.6bf06e28.jpg","5wKGe":"jwst006.629ad489.jpg","h3rC8":"jwst007.75ad7f1c.jpg","1f2nB":"jwst008.01e9efe8.jpg","co3hJ":"jwst009.5877a861.jpg","7cDHb":"jwst010.b4c1e73f.jpg","hhrPH":"jwst011.96070044.jpg","8PZrU":"ritosRemotePage.840af751.svg"}'));t=["ALPHA","BETA","GAMMA","DELTA","EPSILON","ZETA","ETA","THETA","IOTA","KAPPA","LAMBDA","MU","NU","XI","OMICRON","PI","RHO","SIGMA","TAU","UPSILON","PHI","CHI","PSI","OMEGA"];o=["WF","WARP","POWER","FIELD","MAG F.","CCR","FACTOR","WARP FT","SHIELD","M/SEC","METERS","NANO SEC","SUBSPACE","RATIO","DILITHIUM","FUSION","PLASMA","K.PASCALS","K.HERTZ","EPS","HALFLIFE","INJECTOR","EJECTION","A.MATTER","CONV.","REACTION","RAMSCOOP","MFG/C","M/ARA","QCRD","WPS","CCF","IPS","PDT","PORT","NACELLE","WARP COILS","WARP CORE","WFC","ODN","PLASMA PTC","ENG.","MEASURE","LEVELS","FUEL LEVEL","EM LEVEL","EXHAUST","RESTORE","QUANTUM","UNLOCK","LOCKED","STORAGE","VENTING","CALIB.","SIF","IMPULSE","ENGINE"];n=["WARP FACTOR","POWER TRANSFER LEVEL","WARP FIELD ESTABLISHED","MAGNETIC FIELD STRENGTH","MAGNETIC FIELD GENERATOR","MAGNETIC CONSTRICTION SEGMENT","ELECTROMAGNETIC FIELD","MICROCOCHRANES MARGIN","SHIELD STRENGTH LEVEL","OPTICAL DATA NETWORK","REACTION RATIO","DILITHIUM RECRYSTALLIZATION","DILITHIUM CRYSTAL ARTICULATION","PRIMARY DEUTERIUM TANKAGE","DEUTERIUM SUPPLY","CONTINUUM DISTORTION FIELD","FUSION REACTION RATE","PLANCK TIME REACTION","POWER TRANSPORT CONDUIT","EPS DISTRIBUTION","PLASMA INJECTOR OFFLINE","PLASMA STREAM WARNING","PLASMA CONTAINMENT","ANTIMATTER CONTAINMENT","CONTAINMENT FIELD","WARP CORE EJECTION SYSTEM","ANTIMATTER GENERATOR","ANTIMATTER STORAGE POD","ANTIMATTER REACANT INJECTOR","MATTER REACANT INJECTOR","CONVERSION FACTOR","REACTION CHAMBER","BUSSARD RAMSCOOP","SUBSPACE FIELD GEOMETRY","SUBSPACE FIELD FOLDS","MATTER/ANTIMATER REACTION","QUANTUM CHARGE REVERSAL","IMPULSE PROPULSION SYSTEM","WARP ENGINE EFFICIENCY","WPS BREACH LEVEL","ELECTRO-PLASMA SYSTEM","STARBOARD NACELLE","PORT NACELLE ONLINE","WARP FIELD COILS","WARP CORE EJECTION","WARP CORE C/F","DILITHIUM DEGRADATION","STRUCTURAL INTEGRITY FIELD","RECRYSTALLIZATION REFINEMENT","REACTION CHAMBER","WARP DRIVE ONLINE","ENERGY FLUX"];const C=[],A={};function v(){for(let e=0;e<4;e++)C[e].d3node.interrupt()}function D(e="resetLocations"){"resetLocations"==e&&E();for(let e=0;e<4;e++)w(e,"systemStarted")}function T(){si();for(let e=0;e<4;e++)C[e]={d3node:d3.select(`#turbolift${e}`)};E()}function E(){for(let e=0;e<4;e++){const t=x();C[e].currentSection=t.section,C[e].currentX=t.x,C[e].currentY=t.y,C[e].d3node.attr("transform",`translate(${C[e].currentX}, ${C[e].currentY})`)}}function w(e,t=null){"systemStarted"!==t&&(C[e].currentSection=C[e].destSection,C[e].currentX=C[e].destX,C[e].currentY=C[e].destY);const o=x(C[e].currentX,C[e].currentY);C[e].destSection=o.section,C[e].destX=o.x,C[e].destY=o.y;const n=C[e].currentSection,r=C[e].destSection;C[e].junctions=[...A[`section${n}`][`toSection${r}`]],C[e].destReached=!1,C[e].prevJunction=null,C[e].nextJunction=null,L(e)}function x(e=0,t=0){let o,n,r,i=!0;for(;i;)o=p(A.sections),n=p(A[`section${o}`].doorX),r=p(A[`section${o}`].doorY),i=n==e&&r==t;return{section:o,x:n,y:r}}function k(e){C[e].destReached?C[e].d3node.transition().duration(600).attr("opacity",.5).transition().duration(600).attr("opacity",1).transition().delay(c(4e3,8e3)).duration(100).attr("opacity",0).transition().duration(100).attr("opacity",1).transition().duration(100).attr("opacity",0).transition().duration(100).attr("opacity",1).on("end",(()=>{w(e)})):L(e)}function L(e){const t=C[e].d3node.attr("transform");let o,n;if(0!=C[e].junctions.length?(C[e].prevJunction=C[e].nextJunction,C[e].nextJunction=C[e].junctions.shift(),o=A.junctions[C[e].nextJunction].x,n=A.junctions[C[e].nextJunction].y):(C[e].prevJunction=null,C[e].nextJunction=null,o=C[e].destX,n=C[e].destY,C[e].destReached=!0),"j7"!=C[e].prevJunction&&"j8"!=C[e].prevJunction||"j7"!=C[e].nextJunction&&"j8"!=C[e].nextJunction){let r=c(2500,5e3);"j8"!=C[e].prevJunction&&"j9"!=C[e].prevJunction||"j8"!=C[e].nextJunction&&"j9"!=C[e].nextJunction||(r=500),C[e].d3node.transition().delay(c(300,600)).ease(d3.easeCubicInOut).duration(r).attrTween("transform",(function(){return d3.interpolateString(t,`translate(${o},${n})`)})).on("end",(()=>{k(e)}))}else C[e].d3node.transition().delay(300).duration(150).attr("opacity",0).transition().duration(0).attr("transform",`translate(${o},${n})`).transition().duration(150).attr("opacity",1).on("end",(()=>{k(e)}))}A.sections=[1,2,3,4,5,6,7,8],A.section1={doorX:[2577,2790,2969],doorY:[133],toSection1:[],toSection2:["j1"],toSection3:["j1","j2"],toSection4:["j1","j2","j3"],toSection5:["j1","j2","j3","j4"],toSection6:["j1","j2","j3","j5"],toSection7:["j1","j2","j3","j5","j6","j7","j8","j9","j10"],toSection8:["j1","j2","j3","j5","j6","j7","j8","j9","j10","j11"]},A.section2={doorX:[2539],doorY:[14,34,54,74,94,114,134,154,174,194,214,233],toSection1:["j1"],toSection2:[],toSection3:["j2"],toSection4:["j2","j3"],toSection5:["j2","j3","j4"],toSection6:["j2","j3","j5"],toSection7:["j2","j3","j5","j6","j7","j8","j9","j10"],toSection8:["j2","j3","j5","j6","j7","j8","j9","j10","j11"]},A.section3={doorX:[2246,2350,2450,2577,2702],doorY:[233],toSection1:["j2","j1"],toSection2:["j2"],toSection3:[],toSection4:["j3"],toSection5:["j3","j4"],toSection6:["j3","j5"],toSection7:["j3","j5","j6","j7","j8","j9","j10"],toSection8:["j3","j5","j6","j7","j8","j9","j10","j11"]},A.section4={doorX:[2223],doorY:[54,74,94,114,134,154,174,194,214,233],toSection1:["j3","j2","j1"],toSection2:["j3","j2"],toSection3:["j3"],toSection4:[],toSection5:["j4"],toSection6:["j3","j5"],toSection7:["j3","j5","j6","j7","j8","j9","j10"],toSection8:["j3","j5","j6","j7","j8","j9","j10","j11"]},A.section5={doorX:[2223,2033,1858],doorY:[134],toSection1:["j4","j3","j2","j1"],toSection2:["j4","j3","j2"],toSection3:["j4","j3"],toSection4:["j4"],toSection5:[],toSection6:["j4","j3","j5"],toSection7:["j4","j3","j5","j6","j7","j8","j9","j10"],toSection8:["j4","j3","j5","j6","j7","j8","j9","j10","j11"]},A.section6={doorX:[906,1171,1446,1645,1843,1923],doorY:[616],toSection1:["j5","j3","j2","j1"],toSection2:["j5","j3","j2"],toSection3:["j5","j3"],toSection4:["j5","j3"],toSection5:["j5","j3","j4"],toSection6:[],toSection7:["j6","j7","j8","j9","j10"],toSection8:["j6","j7","j8","j9","j10","j11"]},A.section7={doorX:[963,1087,1126],doorY:[480],toSection1:["j10","j9","j8","j7","j6","j5","j3","j2","j1"],toSection2:["j10","j9","j8","j7","j6","j5","j3","j2"],toSection3:["j10","j9","j8","j7","j6","j5","j3"],toSection4:["j10","j9","j8","j7","j6","j5","j3"],toSection5:["j10","j9","j8","j7","j6","j5","j3","j4"],toSection6:["j10","j9","j8","j7","j6"],toSection7:[],toSection8:["j11"]},A.section8={doorX:[1126],doorY:[368,398,418,444,462],toSection1:["j11","j10","j9","j8","j7","j6","j5","j3","j2","j1"],toSection2:["j11","j10","j9","j8","j7","j6","j5","j3","j2"],toSection3:["j11","j10","j9","j8","j7","j6","j5","j3"],toSection4:["j11","j10","j9","j8","j7","j6","j5","j3"],toSection5:["j11","j10","j9","j8","j7","j6","j5","j3","j4"],toSection6:["j11","j10","j9","j8","j7","j6"],toSection7:["j11"],toSection8:[]},A.junctions={j1:{x:2539,y:134},j2:{x:2539,y:233},j3:{x:2223,y:233},j4:{x:2223,y:134},j5:{x:1895,y:616},j6:{x:889,y:616},j7:{x:889,y:675},j8:{x:889,y:544},j9:{x:889,y:538},j10:{x:936,y:480},j11:{x:1126,y:480}};var I;I=new URL("sounds/"+a("gC69E").resolve("GYgyQ"),import.meta.url).toString();var B;B=new URL("sounds/"+a("gC69E").resolve("jIIE4"),import.meta.url).toString();var q;q=new URL("sounds/"+a("gC69E").resolve("euBSk"),import.meta.url).toString();var R;R=new URL("sounds/"+a("gC69E").resolve("aYIhI"),import.meta.url).toString();var F;F=new URL("sounds/"+a("gC69E").resolve("165pf"),import.meta.url).toString();var M;M=new URL("sounds/"+a("gC69E").resolve("3fx4W"),import.meta.url).toString();var N;N=new URL("sounds/"+a("gC69E").resolve("dDASI"),import.meta.url).toString();var j;j=new URL("sounds/"+a("gC69E").resolve("jSwqj"),import.meta.url).toString();var $;$=new URL("sounds/"+a("gC69E").resolve("dw4vA"),import.meta.url).toString();var P;P=new URL("sounds/"+a("gC69E").resolve("7ymAb"),import.meta.url).toString();var O;O=new URL("sounds/"+a("gC69E").resolve("88U70"),import.meta.url).toString();var U;U=new URL("sounds/"+a("gC69E").resolve("aN2Mx"),import.meta.url).toString();var H;H=new URL("sounds/"+a("gC69E").resolve("h6QfU"),import.meta.url).toString();var _;_=new URL("sounds/"+a("gC69E").resolve("2NEkI"),import.meta.url).toString();var X;X=new URL("sounds/"+a("gC69E").resolve("exiRJ"),import.meta.url).toString();var G;G=new URL("sounds/"+a("gC69E").resolve("i84wG"),import.meta.url).toString();var V;V=new URL("sounds/"+a("gC69E").resolve("cphWt"),import.meta.url).toString();var W;function Y(e){const t=si();if("running"!=t.sounds.audioCtx.state)t.sounds.audioCtx.resume(),t.sounds.audioMainSwitch=!0;else{if(!0===e){if(t.sounds.audioMainSwitch)return}else if(!1===e&&!t.sounds.audioMainSwitch)return;t.sounds.audioMainSwitch=!t.sounds.audioMainSwitch}t.sounds.audioMainSwitch?(z(),"init"==document.documentElement.dataset.pageState?Q("shortRandomBeep",0,0,0,.65):Q(p(["beepX1Up","beepX1Upper","beepX1Down","beepX1Downer"]),0,0,0,.4),$r("Audio is now enabled")):(!function(){const e=si();delete document.documentElement.dataset.audio,e.sounds.masterGainNode.gain.value=0,e.userSessionSettings.audioEnabled=!1}(),$r("Audio has been disabled"))}function z(){const e=si();document.documentElement.dataset.audio="",e.sounds.masterGainNode.gain.value=1,e.userSessionSettings.audioEnabled=!0}function Z(){return si().sounds.sfxMasterGainNode.gain.value}function J(e){const t=si();t.sounds.sfxMasterGainNode.gain.value=e,t.userSessionSettings.audioFxLevel=e}function K(e,t=0,o=0,n,r=1,i=1){const s=si();"suspended"===s.sounds.audioCtx.state&&s.sounds.audioCtx.resume();const a=s.sounds.audioCtx.createBufferSource();a.buffer=e;const l=s.sounds.audioCtx.createGain();return a.connect(l),l.connect(s.sounds.sfxMasterGainNode),l.gain.value=r,a.playbackRate.value=i,a.start(s.sounds.audioCtx.currentTime+t,o,n),a}function Q(e,t=0,o=0,n,r=1,i=1){const s=si();if(0==n&&(n=void 0),"shortRandomBeep"==e){K(s.sounds.clips[p(["c811","c812","c813","c829"])],t,o,n,r,u(.93,1.1)*i)}else if("shortBeep"==e){const e=m(7);if(1==e){K(s.sounds.clips.c811,.015,.155,n,r,i)}else if(2==e){K(s.sounds.clips.c812,.015,.143,n,r,i)}else if(3==e){K(s.sounds.clips.c812,.063,.146,n,r,i)}else if(4==e){K(s.sounds.clips.c813,.172,0,n,r,i)}else if(5==e){K(s.sounds.clips.c824,0,.266,n,r,i)}else if(6==e){K(s.sounds.clips.c829,0,.172,n,r,i)}else{K(s.sounds.clips.c829,0,.115,n,r,i)}}else if("beepX1Up"==e){K(s.sounds.clips.c813,t,.08,.06,r,u(1.1,1.3))}else if("beepX1Upper"==e){K(s.sounds.clips.c813,t,.08,.06,r,u(1.2,1.5))}else if("beepX1Down"==e){K(s.sounds.clips.c813,t,.08,.06,r,u(.65,.93))}else if("beepX1Downer"==e){K(s.sounds.clips.c813,t,.08,.06,r,u(.5,.8))}else if("beepX2Up"==e){K(s.sounds.clips.c813,t,.08,.15,r,u(1.1,1.3))}else if("beepX2Upper"==e){K(s.sounds.clips.c813,t,.08,.15,r,u(1.2,1.5))}else if("beepX2Down"==e){K(s.sounds.clips.c813,t,.08,.15,r,u(.85,.93))}else if("beepX2Downer"==e){K(s.sounds.clips.c813,t,.08,.15,r,u(.5,.8))}else if("beepX3Up"==e)K(s.sounds.clips.c813,t,.08,.06,r,i*u(.95,1.1)),K(s.sounds.clips.c813,t+u(.09,.3),.08,.15,r*u(.7,1),i*u(1.1,1.3));else if("beepX3Upper"==e)K(s.sounds.clips.c813,t,.08,.06,r,i*u(1.1,1.3)),K(s.sounds.clips.c813,t+u(.09,.3),.08,.15,r*u(.7,1),i*u(1.2,1.5));else if("beepX3Down"==e)K(s.sounds.clips.c813,t,.08,.06,r,i*u(.93,1)),K(s.sounds.clips.c813,t+.15,.08,.15,.7*r,i*u(.85,.93));else if("beepX3Downer"==e)K(s.sounds.clips.c813,t,.08,.06,r,i*u(.85,.93)),K(s.sounds.clips.c813,t+.15,.08,.15,.7*r,i*u(.5,.8));else if("negative"==e){K(s.sounds.clips.c804,t,o,n,r,p([.9,1,u(.85,1)])*i)}else if("affirmative"==e){K(s.sounds.clips.c805,t,o,n,r,p([.93,1.2,u(.95,1)])*i)}else if("awaiting"==e){K(s.sounds.clips.c807,t,o,n,r,p([.93,1.2,u(.95,1)])*i)}else if("deployed"==e){K(s.sounds.clips.c816,t,o,n,r,p([.95,1,u(.9,1.2)])*i)}else if("executing"==e){K(s.sounds.clips.c817a,t,o,n,r,p([.93,1.2,u(.95,1)])*i)}else if("processing"==e){K(s.sounds.clips.c826,t,o,n,r,p([.93,1,u(.8,1.2)])*i)}else if("warningLow"==e){K(s.sounds.clips.c811,t,o,n,r,p([.75,.85])*i)}else if("warningHigh"==e){K(s.sounds.clips.c812,t,o,n,r,p([.75,.85])*i)}else if("warningLong"==e){K(s.sounds.clips.c817b,t,o,n,r,p([.88,.94,1])*i)}else if("notification"==e){K(s.sounds.clips[p(["c813","c829"])],t,o,n,r,p([.8,.85])*i)}else if("exitTask"==e){K(s.sounds.clips.c815,t,o,n,r,p([1,u(.95,1.1)])*i)}else if("lowProfileTask"==e){K(s.sounds.clips.c806,t,o,n,r,p([1,u(.95,1.1)])*i)}else if("longTask"==e){K(s.sounds.clips.c806,t,o,n,r,p([.93,1])*i)}else if("longTaskLow"==e){K(s.sounds.clips.c806,t,o,n,r,u(.78,.85)*i)}else if("powerUp"==e){K(s.sounds.clips.p001,t,o,n,r,i)}else if("powerDown"==e){K(s.sounds.clips.p002,t,o,n,r,i)}else if("startRedAlert"==e){null!=s.sounds.redAlertTrackNode&&Q("stopRedAlert"),Q("warningLong"),Q("executing",1);const e=s.sounds.clips[s.sounds.redAlertTrackNames[s.sounds.redAlertTrackNameCurrentIndex]];s.sounds.redAlertTrackNameCurrentIndex=(s.sounds.redAlertTrackNameCurrentIndex+1)%s.sounds.redAlertTrackNames.length,s.sounds.redAlertTrackNode=K(e,2.3,o,n,r,i),s.sounds.redAlertTrackNode.loop=!0,s.sounds.redAlertTrackNode.loopEnd=2.9}else if("stopRedAlert"==e)s.sounds.redAlertTrackNode.stop(),s.sounds.redAlertTrackNode=null,Q("exitTask",.25,0,0,.6,.9);else if(e in s.sounds.clips){K(s.sounds.clips[e],t,o,n,r,i)}}function ee(){const e=si();e.shipRef.shipD3=d3.select("#msdContainer svg #ship"),e.shipRef.zoomInBoundaryBBox=e.shipRef.shipD3.select("#zoomInBoundary").node().getBBox(),e.shipRef.zoomInBoundaryCX=e.shipRef.zoomInBoundaryBBox.x+.5*e.shipRef.zoomInBoundaryBBox.width,e.shipRef.zoomInBoundaryCY=e.shipRef.zoomInBoundaryBBox.y+.5*e.shipRef.zoomInBoundaryBBox.height,e.shipRef.ttA=`translate(${e.shipRef.zoomInBoundaryCX}px, ${e.shipRef.zoomInBoundaryCY}px)`,e.shipRef.ttB=`translate(-${e.shipRef.zoomInBoundaryCX}px, -${e.shipRef.zoomInBoundaryCY}px)`,Zr(e.shipRef.shipD3.node()),e.shipContentDom.querySelectorAll('#hitareas > *[id$="_zoomTo"]').forEach((t=>{e.shipHitareaZoomToBBox[t.getAttribute("id").replace("_zoomTo","")]=t.getBBox(),t.remove()})),e.shipContentDom.querySelector("#hitareas").onpointerdown=e=>{0==e.target.getAttribute("id").indexOf("hit_")&&!1===Be(e.target)&&ie(e.target)};const t=e.shipContentDom.querySelector("#wires");Zr(t),e.shipRef.specialZoomInBoundaryBBox=t.getBBox(),e.shipRef.specialZoomInBoundaryCX=t.dataset.transformOriginX,e.shipRef.specialZoomInBoundaryCY=t.dataset.transformOriginY,e.shipRef.specialZoomIn_ttA=`translate(${e.shipRef.specialZoomInBoundaryCX}px, ${e.shipRef.specialZoomInBoundaryCY}px)`,e.shipRef.specialZoomIn_ttB=`translate(-${e.shipRef.specialZoomInBoundaryCX}px, -${e.shipRef.specialZoomInBoundaryCY}px)`,e.shipContentDom.querySelector("#wcHatchHitspot").onpointerdown=function(){de()}}function te(e){return"hit_saucerModule"===e||"hit_starboardNacelle"===e||"hit_engineeringHull"===e}function oe(){const e=si().shipRef.shipD3.node().dataset.zoomObj;if(void 0!==e&&Math.random()<.2)return void ne();if(!te(e)&&Math.random()<.15)return void ie(p(["hit_engineeringHull","hit_starboardNacelle","hit_saucerModule"]));const t=document.querySelectorAll("#msdContainer svg #ship #hitareas > *");let o=m(t.length);t[o].getAttribute("id")==e&&(o=(o+1)%t.length);ie(t[o])}function ne(){const e=si(),t=e.shipRef.shipD3.node().dataset.zoomObj;if(void 0!==t){ie(te(t)?t:document.querySelector(`#msdContainer svg #ship #hitareas #${t}`))}else{Q("longTaskLow",0,0,0,.3),Math.random()<.5?Q("shortRandomBeep",.5,0,0,.25):Q(`beepX${c(1,3)}${p(["Down","Downer","Up","Upper"])}`,.5,0,0,.2);const t=document.querySelectorAll("#msdContainer svg #outlines > path"),o=p([0,1,2,4,6,10,16,20]),n=p([0,.3,.6,1,1,1,1]),r=p(e.nonDarkColorCssVarNames),i=document.querySelector("#msdContainer svg #contentShip"),s=`translate(${i.dataset.transformOriginX}px, ${i.dataset.transformOriginY}px)`,a=`translate(-${i.dataset.transformOriginX}px, -${i.dataset.transformOriginY}px)`;d3.select(i).transition().duration(600).ease(d3.easeCubicOut).style("transform",`${s} scale(1.037) ${a}`).on("end",(()=>{Qr(document.querySelector("#msdContainer svg #ship #outlines")),t.forEach((e=>{e.setAttribute("stroke-width",o),e.setAttribute("stroke-opacity",n),e.setAttribute("stroke",`var(--${r})`)}))})).transition().delay(500).ease(d3.easeCubicIn).duration(1200).style("transform",`${s} scale(1) ${a}`).on("end",(()=>{t.forEach((e=>{e.setAttribute("stroke-width",e.getAttribute("data-stroke-width")),e.setAttribute("stroke",e.getAttribute("data-stroke")),e.removeAttribute("stroke-opacity")}))}))}}function re(){const e=si(),t=e.shipRef.shipD3;t.interrupt(),t.style("transform",`${e.shipRef.ttA} scale(1) ${e.shipRef.ttB}`),t.node().dataset.zoomScale=1,delete t.node().dataset.zoomObj,delete document.documentElement.dataset.zooming,t.classed("zoomOut",!1),e.shipZoomMode=!1,delete document.documentElement.dataset.shipZoomMode,delete document.documentElement.dataset.shipZoomObj}function ie(e){const t=si(),o=t.shipRef.shipD3,n=te(e),r=n?e:e.getAttribute("id"),i=n?t.shipRef.specialZoomInBoundaryBBox:t.shipRef.zoomInBoundaryBBox,s=n?t.shipRef.specialZoomInBoundaryCX:t.shipRef.zoomInBoundaryCX,a=n?t.shipRef.specialZoomInBoundaryCY:t.shipRef.zoomInBoundaryCY,l=n?{ttA:t.shipRef.specialZoomIn_ttA,ttB:t.shipRef.specialZoomIn_ttB}:{ttA:t.shipRef.ttA,ttB:t.shipRef.ttB};let d;d=r in t.shipHitareaZoomToBBox?t.shipHitareaZoomToBBox[r]:e.getBBox();let u=1100;const m="zoomObj"in o.node().dataset?o.node().dataset.zoomObj:void 0,y=o.node().dataset.zoomScale??1,h=o.node().dataset.zoomTranslate??"0,0";if(me("forZooming"),delete document.documentElement.dataset.shipZoomObj,m==r)return o.node().dataset.zoomScale=1,delete o.node().dataset.zoomObj,document.documentElement.dataset.zooming="",Q(p(["beepX1Upper","beepX2Down","beepX3Downer"]),0,0,0,.3),o.style("transform",`${l.ttA} scale(1) translate(${h}) ${l.ttB}`).classed("zoomOut",!0).transition().delay(520).duration(1).on("start",(()=>{delete document.documentElement.dataset.zooming,o.style("transform",`${l.ttA} scale(1) ${l.ttB}`),Q(p(["exitTask","negative"]),.2,0,0,.25,.9)})).on("end cancel interrupt",(()=>{delete document.documentElement.dataset.zooming,o.classed("zoomOut",!1)})).transition().delay(1200).duration(0).on("start",(()=>{ue("forZooming"),"show"==o.node().dataset.showLabelsOnZoomOut&&Ee("faster"),t.shipZoomMode=!1,delete document.documentElement.dataset.shipZoomMode})),void oi();{o.node().dataset.zoomObj=r,null!=m?u=400:(o.node().dataset.showLabelsOnZoomOut="showing"==document.querySelector("#msdLabels").dataset.visible?"show":"no","delay"==o.node().dataset.labelsHideDelay?(o.node().dataset.labelsHideDelay=null,setTimeout((()=>{we("skipAnimation")}),1e3)):we("skipAnimation"));let e=f(r.replace(/[^_]*_(.*)/g,"$1")).toUpperCase();e=e.replace("MAIN STAGE","MAIN-STAGE"),e=e.replace("CAPTAINS YACHT","CAPTAIN’S YACHT"),e=e.replace("PTC EPS CONDUITS","PTC / EPS CONDUITS"),oi(e),o.interrupt(),t.shipZoomMode=!0,document.documentElement.dataset.shipZoomMode=""}const g=`${s-(d.x+.5*d.width)}px, ${a-(d.y+.5*d.height)}px`,b=Math.min(i.width/d.width,i.height/d.height);o.style("transform",`${l.ttA} scale(${y}) translate(${g}) ${l.ttB}`),o.node().dataset.zoomTranslate=g,Q(`beepX${c(1,3)}${p(["Down","Downer","Up","Upper"])}`,0,0,0,.45),Math.random()<.5&&null==m&&Q(`beepX${c(1,3)}${p(["Down","Downer","Up","Upper"])}`,.25,0,0,.15),o.transition().delay(u).duration(700).on("start",(()=>{if(document.documentElement.dataset.zooming="",o.style("transform",`${l.ttA} scale(${b}) translate(${g}) ${l.ttB}`),o.node().dataset.zoomScale=b,null==m){const e=Math.random();e<.5?Q(p(["processing","executing"]),0,.1,.4,.3,.8):e<.75?Q("longTask",0,.8,0,.3,1.2):Q("notification",0,0,0,.3)}})).on("end",(()=>{null!=m&&Q(`beepX${p(["1","1","2"])}${p(["Down","Downer","Up","Upper"])}`,0,0,0,.4)})).transition().delay(420).duration(0).on("start",(()=>{delete document.documentElement.dataset.zooming,document.documentElement.dataset.shipZoomObj=r.replace("hit_",""),ue("forZooming")}))}function se(e,t=0,o=1,n="short",r=!0){if(0==o)return;const i=si();let s=t;r||(s="short"==n?c(200,600):"number"==typeof n?Math.floor(u(.7*n,1.3*n)):c(800,1200)),e.transition("randomColor").delay(s).duration(1).attr("fill",`var(--${p(i.allColorCssVarNames)})`).on("end",(()=>{se(e,0,o>0?o-1:o,n,!1)}))}function ae(e){e.interrupt("randomColor")}function le(e,t=0,o=1,n="short",r=!0){if(0==o)return;let i=t;r?e.attr("opacity",1):i="short"==n?c(200,600):"number"==typeof n?Math.floor(u(.7*n,1.3*n)):c(2e3,3e3),e.transition("blinking").delay(i).duration(500).attr("opacity",0).on("cancel interrupt",(()=>{e.attr("opacity",1)})).transition("blinking").delay(250).duration(1e3).attr("opacity",1).on("cancel interrupt",(()=>{e.attr("opacity",1)})).on("end",(()=>{le(e,0,o>0?o-1:o,n,!1)}))}function ce(e){e.interrupt("blinking")}function de(){const e=si(),t=e.shipContentDom.querySelector("#warpCore");if("ejectionInProgress"in t.dataset)return void $r(p(["Warp Core Ejection in Progress already","Awaiting for a new warp core","Ejection system is currently offline","warp core status: ejected","Warp Core is not ready to be ejected again","seriously, the core is not ready","Move away from the warp core ejection hatch"]));t.dataset.ejectionInProgress="",$r("Warp Core Ejection in Progress","timePrefix");const o=t.querySelector("#wc_matter"),n=t.querySelector("#wc_antimatter"),r=e.shipContentDom.querySelector("#msdContainer svg #ship #wcHatchL"),i=e.shipContentDom.querySelector("#msdContainer svg #ship #wcHatchR"),s=d3.selectAll([r,i]),a=d3.select(e.svg2.querySelector("#miniWarpCore"));d3.select(t).style("opacity",3).transition().duration(500).on("start",(()=>{Q("warningLong",0,.4,0,.6),Qr(t,"blink3")})).on("end",(()=>{o.style.fill="var(--secondary)",n.style.fill="var(--secondary)",Q("notification",.25),s.transition().duration(600).attr("transform",((e,t)=>`translate(${30*(2*t-1)} 0)`))})).transition().delay(1e3).duration(3e3).attr("transform","translate(0 600)").style("opacity",0).on("start",(()=>{Q("negative",.2,0,0,1,.85),a.style("opacity",3).style("display",null).transition().duration(3e3).attr("transform","translate(0 145)").style("opacity",0),setTimeout((()=>{$r("Warp Core Ejected","timePrefix")}),1200)})).on("end",(()=>{t.setAttribute("transform","translate(0 250)")})).transition().delay(1e3).duration(6e3).ease(d3.easeCubicOut).on("start",(()=>{Q("awaiting",.3,0,0,.5,.75),a.attr("transform","translate(0 90)").transition().duration(6e3).ease(d3.easeCubicOut).attr("transform","translate(0 0)").style("opacity",3).on("end",(function(){this.style.display="none"})),setTimeout((()=>{Q("exitTask",0,0,0,.7),s.transition().delay(500).duration(1e3).ease(d3.easeCubicInOut).attr("transform","translate(0 0)").on("start",((e,t)=>{0==t&&Q("beepX2Downer",.4,0,0,.3)}))}),4500)})).attr("transform","translate(0 0)").style("opacity",2).on("end",(()=>{Q("powerUp",0,.3,0,.7)})).transition().delay(600).duration(250).on("start",(()=>{Qr(t,"blink1"),Q("beepX3Upper",0,0,0,.3)})).on("end",(function(){o.style.fill=null,n.style.fill=null})).transition().delay(500).duration(0).on("start",(()=>{$r(p(["Warp Core replaced","Warp Core Reinsertion Complete"]),"timePrefix"),delete t.dataset.ejectionInProgress}))}function ue(e=null){const t="forZooming"==e;delete document.documentElement.dataset.aniZooming,t||(D(),ge(),fe(),function(){const e=si(),t=e.shipContentDom.querySelector('[id^="shuttlecraft1Fly"]').querySelector("animateMotion");if(null===t)return void function(e=null){const t=si(),o=t.shipContentDom.querySelector('[id^="shuttlecraft1Fly"]'),n=t.shipContentDom.querySelector('[id^="shuttlecraft1Path"]'),r=document.createElementNS("http://www.w3.org/2000/svg","animateMotion");"startFlying"===e?r.setAttribute("dur","30s"):r.setAttribute("dur","0");r.setAttribute("begin",`-${c(0,30)}s`),r.setAttribute("repeatCount","indefinite"),r.setAttribute("path",n.getAttribute("d")),o.appendChild(r);const i=o.getBBox();o.style.transform=`translate(-${i.x+.5*i.width}px, -${i.y+.5*i.height}px)`,n.setAttribute("stroke","none"),o.dataset.init=""}("startFlying");t.setAttribute("dur","30s")}(),be("init")),Se(!0),function(){const e=d3.select("#msdContainer svg #plasmaStream"),t=d3.select("#msdContainer svg #cylinderFront");if(e.classed("active",!0),null==e.attr("data-init")){e.attr("data-init","");const o=e.node().getBBox();e.attr("transform-origin",`${o.x+.5*o.width} ${o.y+.5*o.height}`),e.selectAll("line").attr("stroke-dashoffset",(()=>c(-100,0))).style("animation-duration",(()=>u(3,6)+"s")),t.attr("opacity",.5)}const o=function(){e.attr("opacity",1).attr("visibility","visible").attr("transform","scale(.1 .2)").transition().duration(400).ease(d3.easeCubicOut).attr("transform","scale(1 1)").transition().delay(5e3).duration(1500).ease(d3.easeCubicIn).attr("transform","translate(-242) scale(6 .3)").on("start",(()=>{t.transition().delay(1200).duration(300).attr("opacity",1).on("cancel interrupt",(()=>{t.attr("opacity",1)})).transition().delay(c(800,1600)).duration(800).attr("opacity",.5).on("end",(()=>{o()}))})).on("end",(()=>{e.attr("transform",null),e.attr("opacity",0).style("visibility","visible")}))};o()}(),se(d3.select("#msdContainer svg #magFieldGen"),c(3500,7e3),-1,5e3),function(){const e=d3.select("#msdContainer svg #bussardProcessor");le(e,c(5e3,7e3),-1,5e3),se(e,c(3500,7e3),-1,13e3)}(),function(){const e=d3.select("#msdContainer svg #contentShip #internals");se(e.select("#shuttle1 path"),c(3500,7e3),-1,13e3),se(e.select("#bay2shuttle1 path"),c(5e3,11e3),-1,13e3),se(e.select("#bay2shuttle2 path"),c(2e3,5e3),-1,9e3),se(e.select("#torpedoLauncher"),c(2e3,5e3),-1,9e3),se(e.select("#bridge"),c(2e3,5e3),-1,9e3),se(e.select("#transporterBase"),c(2e3,5e3),-1,9e3),se(e.select("#transporterMid"),c(2e3,5e3),-1,9e3),le(e.select("#deuteriumTank1"),c(2e3,8e3),-1,11e3),le(e.select("#deuteriumTank2"),c(2e3,8e3),-1,11e3),le(e.select("#antimatterStorage"),c(4e3,5e3),-1,12e3),le(e.select("#tractorBeamMainForward"),c(2e3,8e3),-1,8e3),le(e.select("#tractorBeamMainAft"),c(2e3,8e3),-1,8e3),le(e.select("#tractorBeam2ndHull"),c(2e3,8e3),-1,8e3),le(e.select("#tardis"),c(2e3,8e3),-1,8e3)}(),pe()}function me(e=null){const t="forZooming"==e;t&&(document.documentElement.dataset.aniZooming=""),t||(v(),function(){const e=si().shipContentDom.querySelector("#holodeck"),t=Number(e.dataset.timerId);isNaN(t)||clearTimeout(t);d3.selectAll("#msdContainer svg #holodeck *").interrupt(),he()}(),function(){const e=si();d3.select(e.shipContentDom.querySelector("#transporterSubject1")).interrupt()}(),function(){const e=si().shipContentDom.querySelector('[id^="shuttlecraft1Fly"] animateMotion');null!==e&&e.setAttribute("dur","0")}(),function(){const e=d3.select("#msdContainer svg #shuttleOnLift"),t=d3.select("#msdContainer svg #shuttleLift"),o=Number(t.node().dataset.timerId);isNaN(o)||clearTimeout(o);delete t.node().dataset.timerId,e.interrupt(),t.interrupt()}()),Se(!1),function(){const e=d3.select("#msdContainer svg #plasmaStream"),t=d3.select("#msdContainer svg #cylinderFront");e.interrupt(),t.interrupt(),e.classed("active",!1)}(),ae(d3.select("#msdContainer svg #magFieldGen")),function(){const e=d3.select("#msdContainer svg #bussardProcessor");ce(e),ae(e)}(),function(){const e=d3.select("#msdContainer svg #contentShip #internals");ae(e.select("#shuttle1 path")),ae(e.select("#bay2shuttle1 path")),ae(e.select("#bay2shuttle2 path")),ae(e.select("#torpedoLauncher")),ae(e.select("#bridge")),ae(e.select("#transporterBase")),ae(e.select("#transporterMid")),ce(e.select("#deuteriumTank1")),ce(e.select("#deuteriumTank2")),ce(e.select("#antimatterStorage")),ce(e.select("#tractorBeamMainForward")),ce(e.select("#tractorBeamMainAft")),ce(e.select("#tractorBeam2ndHull")),ce(e.select("#tardis"))}(),ye()}function ye(){si().svg1.pauseAnimations()}function pe(){si().svg1.unpauseAnimations()}function he(){const e=si().shipContentDom.querySelector("#holodeck");e.querySelector("#holodeckArch").setAttribute("opacity",1),e.querySelector("#holodeckGrid").setAttribute("opacity",1),e.querySelector("#holoDino").setAttribute("opacity",0),e.querySelector("#holoParis").setAttribute("opacity",0),e.querySelector("#badgey").setAttribute("opacity",0),e.querySelector("#holoMovie").setAttribute("opacity",0),e.querySelector("#holoMovie #seqInit").style.transition="opacity 400ms",e.querySelectorAll('#holoMovie [id^="seq"]').forEach((e=>{e.setAttribute("opacity",0)}))}function ge(){const e=si().shipContentDom.querySelector("#holodeck"),t=d3.select(e);t.selectAll("*").interrupt();const o=t.select("#holodeckArch"),n=t.select("#holodeckGrid"),r=["holoDino","holoParis","badgey","holoMovie"];let i=m(r.length);parseInt(e.dataset.previousTitleIndex)==i&&(i=(i+1)%r.length),e.dataset.previousTitleIndex=i;const s=r[i],a=d3.select(`#msdContainer svg #${s}`),l="holoMovie"==s;o.transition().duration(910).attr("opacity",0).on("end",(function(){l&&(a.attr("opacity",1),e.querySelector("#seqInit").setAttribute("opacity",1)),n.transition().delay(310).duration(970).attr("opacity",0),a.transition().delay(0).duration(710).attr("opacity",1).on("start",(()=>{l&&a.selectAll("[id^=seq_]").style("transition",(()=>`opacity ${p([300,700])}ms ease ${100*c(0,30)}ms`)).attr("opacity",1)})).on("end",(function(){const t=l?3500:0;n.transition().delay(4e3+t).duration(900).attr("opacity",.6).on("end",(()=>{a.transition().delay(300).duration(650).attr("opacity",0).on("start",(()=>{l&&a.selectAll("[id^=seq]").attr("opacity",0)})).on("end",(()=>{o.transition().delay(270).duration(600).attr("opacity",1).on("end",(()=>{e.dataset.timerId=setTimeout((()=>{ge()}),u(5800,9500))}))}))}))}))}))}function fe(e=null){const t=si(),o=d3.select(t.shipContentDom.querySelector("#transporterAni1")),n=d3.select(t.shipContentDom.querySelector("#transporterSubject1")),r=d3.select(t.shipContentDom.querySelector("#transporterBeam1"));d3.selectAll("#msdContainer svg #transporterBeam1 line").style("stroke-dashoffset",(()=>u(-10,-45))).style("animation-duration",(()=>u(3.5,4.5)+"s"));const i=()=>{r.classed("beaming",!1),setTimeout((()=>{r.classed("beaming",!0)}),1)};r.attr("opacity",0),n.transition().delay(c(6e3,12e3)).duration(0).on("start",(()=>{i()})).transition().delay(2e3).duration(0).attr("opacity",0).transition().delay(c(6e3,12e3)).duration(0).on("start",(()=>{o.attr("transform",Math.random()<.5?null:"translate(15 0)"),i()})).transition().delay(1e3).duration(0).attr("opacity",1).on("end",(()=>{fe()}))}function be(e=null){const t=d3.select("#msdContainer svg #shuttleOnLift"),o=d3.select("#msdContainer svg #shuttleLift");"init"==e&&(t.attr("transform","translate(0 44)"),o.attr("transform","translate(0 44)"));const n=c(3e3,6e3),r=c(3e3,5e3);o.transition().delay(c(1e3,2e3)).duration(n).ease(d3.easeCubicInOut).attr("transform","translate(0 0)").on("start",(()=>{t.transition().duration(n).ease(d3.easeCubicInOut).attr("transform","translate(0 0)")})).transition().delay(c(200,500)).duration(c(1e3,4e3)).ease(d3.easeCubicInOut).attr("transform","translate(0 44)").transition().delay(c(2500,6e3)).duration(c(1e3,4e3)).ease(d3.easeCubicInOut).attr("transform","translate(0 0)").transition().delay(c(300,700)).duration(r).ease(d3.easeCubicInOut).attr("transform","translate(0 44)").on("start",(()=>{t.transition().duration(r).ease(d3.easeCubicInOut).attr("transform","translate(0 44)").on("end",(()=>{se(t.select("path"),400,4)}))})).on("end",(()=>{o.node().dataset.timerId=setTimeout((()=>{be()}),u(2500,6e3))}))}function Se(e){const t=document.getElementById("nacelleDisk"),o=document.getElementById("nacelleDiskMarker");t.classList.toggle("active",e),o.classList.toggle("active",e)}let Ce,Ae,ve;function De(){Ae.forEach((e=>{const t=e.querySelector("path"),o=e.querySelector('[id^="dot"]'),n=e.querySelector("text"),r=`var(--${p(["secondary","secondaryBright","secondaryBrighter","secondaryBrightest","primary","primarySat"])})`;t.setAttribute("stroke",r),o.setAttribute("stroke",r),n.setAttribute("fill",r)}))}function Te(){const e=si();Ce=e.shipContentDom.querySelector("#msdLabels"),Ae=Ce.querySelectorAll('[id^="label"]'),ve=Ae.length,Ae.forEach((e=>{const t=e.querySelector("path"),o=t.getTotalLength();t.setAttribute("stroke-dasharray",o),t.setAttribute("stroke-dashoffset",o),t.setAttribute("visibility","hidden"),t.dataset.length=o;const n=e.querySelector("text");n.setAttribute("visibility","hidden"),n.setAttribute("opacity",0);const r=e.querySelector('[id^="dot"]');r.setAttribute("opacity",0),r.setAttribute("visibility","hidden"),e.style.display="none"})),Ce.dataset.status="allHidden",De()}function Ee(e=null){const t=si();d3.selectAll("#msdLabels *").interrupt();const o=d3.select("#msdLabels");o.interrupt(),o.node().dataset.visible="showing",t.shipLabelsVisible=!1;const n="faster"===e?.4:1,r="faster"===e?.1:1,i=d3.selectAll('#msdLabels [id^="dot"]'),s=i.size();let a=Math.floor(.6*s),l=0;d3.selectAll("#msdLabels > g").style("display",null),"faster"!==e?(Q("beepX3Up",0,0,0,.4),o.transition().delay(400).duration(350).on("start",(()=>{Q("beepX3Downer",0,0,0,.4)})).on("end",(()=>{Q("processing",0,0,0,.25,.8)})).transition().delay(250).duration(0).on("start",(()=>{Q("longTaskLow",0,0,0,.2,.9)}))):(Q("beepX2Up",0,0,0,.4),Q("processing",.15,.3,0,.25,p([.8,.7,.6]))),i.attr("visibility","visible").transition().delay((()=>c(0,1500)*r)).duration(200*r).attr("opacity",1).transition().duration(100*r).attr("opacity",0).transition().duration(400*r).attr("opacity",1).on("end",(function(e,o){l++,l==a&&(document.documentElement.dataset.shipLabelsVisible="",d3.select(this).transition().delay(1e3*n).duration(0).on("start",(()=>{t.shipLabelsVisible=!0}))),d3.select(this.parentNode).select("path").attr("visibility","visible").transition().duration(c(800,2e3)*n).attr("stroke-dashoffset",0).ease(d3.easeCubicInOut).on("end",(function(){d3.select(this.parentNode).select("text").attr("visibility","visible").transition().duration(600*n).attr("opacity",1)}))}))}function we(e=null){const t=si();d3.selectAll("#msdLabels *").interrupt();const o=d3.select("#msdLabels");o.interrupt(),o.node().dataset.visible="hiding",t.shipLabelsVisible=!1;const n="skipAnimation"===e;let r=0;"skipAnimation"!==e&&(Q("beepX1Downer",0,0,0,.6),Q("warningLong",0,0,0,.3,.92)),d3.selectAll("#msdLabels text").transition().duration((()=>n?0:c(50,600))).attr("opacity",0).on("end",(function(){this.setAttribute("visibility","hidden");const e=d3.select(this.parentNode).select("path");e.transition().duration(n?0:u(600,1e3)).ease(d3.easeCubicInOut).attr("stroke-dashoffset",e.node().dataset.length).on("end",(function(){this.setAttribute("visibility","hidden"),d3.select(this.parentNode).select('[id^="dot"]').transition().duration(n?0:400).attr("opacity",0).on("end",(function(){this.setAttribute("visibility","hidden"),r++,r==ve&&(De(),d3.selectAll("#msdLabels > g").style("display","none"),delete document.documentElement.dataset.shipLabelsVisible)}))}))}))}function xe(){"showing"==document.querySelector("#msdLabels").dataset.visible?we():Ee()}function ke(){const e=si();document.querySelectorAll("#msdLabels > g").forEach((t=>{const o=t.querySelector('[id^="hot_"]');null!==o&&(e.shipLabelsHotArea.push({id:o.getAttribute("id"),rect:o.getBBox(),parentId:o.parentElement.getAttribute("id")}),o.remove())}))}function Le(e,t){const o=si(),n=o.getPointerLocationOnSvg(e,t);o.shipLabelsHotArea.every((e=>!(n.x>=e.rect.x&&n.x<=e.rect.x+e.rect.width&&n.y>=e.rect.y&&n.y<=e.rect.y+e.rect.height)||(Ie(e),!1)))}function Ie(e){const t=si();t.shipLabelGotHit=!0,setTimeout((()=>{t.shipLabelGotHit=!1}),2e3);const o=document.querySelector("#msdContainer svg #ship #msdLabels #"+e.parentId);document.querySelectorAll("#msdLabels > g").forEach((e=>{e!==o&&(e.style.display="none",e.querySelectorAll("path, circle, text").forEach((e=>{e.setAttribute("visibility","hidden")})))}));const n=e.id.replace("hot_","hit_"),r=document.querySelector("#msdContainer svg #ship #hitareas #"+n);null!==r&&(t.shipRef.shipD3.node().dataset.labelsHideDelay="delay",Q(p(["executing","beepX2Down","beepX3Downer","beepX2Upper"]),.3,0,0,.5),t.shipRef.shipD3.transition().delay(350).duration(800).on("start",(()=>{Qr(o,"blink2")})).on("end",(()=>{ie(r)})))}function Be(e){const t=si();if(t.shipZoomMode||!t.shipLabelsVisible)return!1;let o=null;const n=e.getAttribute("id").replace("hit_","hot_");let r=null;return t.shipLabelsHotArea.every((e=>e.id!=n||(o=t.shipContentDom.querySelector(`#msdLabels #${e.parentId}`),r=e,!1))),Ie(r),!0}function qe(){const e=si(),t=document.querySelector("#msdContainer2 > svg #ritosTop"),o=t.querySelector("#saucer");let n;n=p(e.allColorCssVarNames),o.querySelectorAll('[id^="escPod"]').forEach((e=>{e.setAttribute("fill",`var(--${n})`)})),o.querySelectorAll('g[id^="plate"] path, path[id^="plate"]').forEach((t=>{t.setAttribute("fill",`var(--${p(e.allColorCssVarNames)})`)})),Math.random()<.3?(o.querySelectorAll("path, circle").forEach((t=>{t.setAttribute("stroke",`var(--${p(e.allColorCssVarNames)})`)})),t.querySelectorAll("#secondary path, #secondary circle").forEach((t=>{t.setAttribute("stroke",`var(--${p(e.allColorCssVarNames)})`)}))):(n=p(e.allColorCssVarNames),o.querySelectorAll("path, circle").forEach((e=>{e.setAttribute("stroke",`var(--${n})`)})),n=Math.random()<.75?n:p(e.allColorCssVarNames),t.querySelectorAll("#secondary path, #secondary circle").forEach((e=>{e.setAttribute("stroke",`var(--${n})`)})))}function Re(e){const t=si(),o=document.querySelector("#msdContainer2 > svg #ritosTop"),n=o.querySelector('[id^="fieldOutline"]');let r;r=!0===e||!1!==e&&!(o.classList.contains("dottedField")||o.classList.contains("expandingField")),o.classList.remove("dottedField","expandingField"),n.style.animationDirection=null,n.style.animationTimingFunction=null;const i=Number(o.dataset.transformOriginX),s=Number(o.dataset.transformOriginY);if(r){Q(p(["deployed","negative"]),0,0,0,.3);const e=p(["dottedField","expandingField"]);o.classList.add(e);const r=Math.random();$r(r<.25?`initiating SIF Level ${p(["1","2","3","4","5","10"])} Diagnostic`:r<.5?"extended hull plating magnetic shielding activated":r<.75?"SIF monitoring on secondary hull plating":`structural integrity field at ${c(70,99)}%`),clearTimeout(t.ritosTopFieldTimer),t.ritosTopFieldTimer=setTimeout((()=>{Fe()}),13e3),n.setAttribute("stroke",`var(--${p(t.nonDarkColorCssVarNames)})`),n.setAttribute("stroke-width",c(10,35)),n.setAttribute("stroke-dasharray",`${c(20,50)} ${c(15,30)}`),n.style.animationDuration=c(3e3,7e3)+"ms","dottedField"==e?(n.style.animationDirection=p(["normal","reverse","alternate","alternate-reverse"]),n.setAttribute("transform",`translate(${i} ${s}) scale(${.01*c(95,115)}) translate(-${i} -${s})`)):n.removeAttribute("transform"),n.style.animationTimingFunction=p(["ease-in-out","ease-in","ease-out","linear","steps(10, end)","steps(20, end)","steps(40, end)"])}else Q("beepX1Downer",0,0,0,.3),Fe()}function Fe(){const e=si();clearTimeout(e.ritosTopFieldTimer),e.ritosTopFieldTimer=null,document.querySelector("#msdContainer2 > svg #ritosTop").classList.remove("dottedField","expandingField")}function Me(e){const t=si(),o=document.querySelector("#msdContainer2 > svg #ritosFront"),n=document.querySelector("#msdContainer2 > svg #bracketsWindow"),r=o.classList.toggle("rotateShield",e);if(document.documentElement.dataset.ritosFrontLarge="",r){Q(p(["warningLong","executing"]),0,0,0,.4),function(){const e=si();document.querySelector("#msdContainer2 > svg #bracketsWindow").querySelectorAll("*").forEach((t=>{t.hasAttribute("fill")&&t.setAttribute("fill",`var(--${p(e.allColorCssVarNames)})`),t.hasAttribute("stroke")&&t.setAttribute("stroke",`var(--${p(e.allColorCssVarNames)})`),t.getAttribute("id").includes("bar")&&(t.setAttribute("stroke-dasharray",`72 6 ${6*p([0,6])} ${6*c(1,12)} ${6*p([0,6])} ${6*c(6,12)}  ${6*p([0,6])} ${6*c(1,12)} ${6*p([0,6])} ${6*c(1,12)} ${6*p([0,6])} ${6*c(1,12)}`),t.style.animationDuration=p([23,37,47,173,187,191])+"s",t.style.animationTimingFunction=`steps(${p([c(10,30),c(350,500)])})`)}))}(),n.classList.add("activeAnimation");const e=Math.random();$r(e<.3?`Shield ${p(["Modulation","harmonic"])} set at ${c(200,400)}.${c(0,9)} MHz frequency`:e<.6?"Shield activated monitoring • space debris impact":`Shield strength at ${c(60,99)}% ${p(["","","","","and holding","and dropping!"])}`),clearTimeout(t.ritosFrontShieldTimer),t.ritosFrontShieldTimer=setTimeout((()=>{Ne()}),13e3);const o=p(t.allColorCssVarNames),r=Math.random()<.5?"none":`${c(20,50)} ${c(5,30)}`,i=c(1,6),s=Math.random()<.5;document.querySelectorAll('#msdContainer2 > svg #ritosFront [id^="arcRotate"]').forEach((e=>{e.setAttribute("stroke",`var(--${o})`),e.setAttribute("stroke-dasharray",r),e.style.animationDuration=i+"s";const t=e.getAttribute("id");let n;(t.includes("2")||t.includes("4"))&&(e.style.animationDelay=.5*i+"s"),n=t.includes("1")||t.includes("2")?s?"normal":"reverse":s?"reverse":"normal",e.style.animationDirection=n}));const a=document.querySelector("#msdContainer2 > svg #rotatingShieldBg1");let l=a.getAttribute("fill");l=l.replace("url(","").replace(")",""),document.querySelector(`#msdContainer2 > svg ${l} stop:nth-child(2)`).setAttribute("stop-color",`var(--${t.allColorCssVarNames})`),a.style.animationDuration=c(1e3,6e3)+"ms"}else Q("beepX3Downer",0,0,0,.3),n.classList.remove("activeAnimation"),Ne()}function Ne(){const e=si();clearTimeout(e.ritosFrontShieldTimer),e.ritosFrontShieldTimer=null,document.querySelector("#msdContainer2 > svg #ritosFront").classList.remove("rotateShield"),delete document.documentElement.dataset.ritosFrontLarge,document.querySelector("#msdContainer2 > svg #bracketsWindow").classList.remove("activeAnimation")}function je(){const e=si(),t=document.querySelector("#msdContainer svg #rubberDucky"),o=document.querySelector("#msdContainer svg #rubberDuckyTarget"),n=t.getBBox(),r=e.rubberDuckyPositions;r.push({x:n.x,y:n.y}),t.setAttribute("transform-origin",`${n.x+.5*n.width} ${n.y+.5*n.height}`),o.setAttribute("transform-origin",t.getAttribute("transform-origin")),o.setAttribute("opacity",0),t.setAttribute("transform","translate(0 0) scale(1 1) rotate(0)"),t.setAttribute("opacity",1),t.dataset.rdIndex=0,t.dataset.translate="0 0",t.dataset.hFlip=1,t.dataset.aniInProgress=!1,document.querySelectorAll("#msdContainer svg #rubberDuckyPositions > rect").forEach((e=>{r.push({x:Number(e.getAttribute("x")),y:Number(e.getAttribute("y"))})})),document.querySelector("#msdContainer svg #rubberDuckyPositions").remove(),document.querySelector("#msdContainer svg #rubberDucky_hotzone").onpointerdown=()=>{t.dataset.aniInProgress=!0;const e=t.dataset.translate??"0 0",o=Number(t.dataset.hFlip??1);Q(p(["warningLong","processing"]),0,0,0,.8,1.4),d3.select(t).transition().duration(400).ease(d3.easeQuadIn).attr("transform",`translate(${e}) scale(${8*o} 8) rotate(${l()*m(0)})`).on("end",(function(){this.setAttribute("opacity",.2),setTimeout((()=>{this.setAttribute("opacity",.7)}),150)})).transition().delay(300).on("start",(function(){Q("exitTask",0,0,0,.8,1.15)})).duration(300).ease(d3.easeQuadIn).attr("transform",`translate(${e}) scale(${.1*o} .1) rotate(${l()*m(100)})`).attr("opacity",0).on("end",(function(){$e()}))}}function $e(){const e=si().rubberDuckyPositions,t=document.querySelector("#msdContainer svg #rubberDucky"),o=Number(t.dataset.rdIndex??0);let n=m(e.length);n==o&&(n=(n+c(1,Math.round(.7*e.length)))%e.length),t.dataset.rdIndex=n;const r=e[n].x-e[0].x+" "+(e[n].y-e[0].y),i=l();t.dataset.translate=r,t.dataset.hFlip=i,t.setAttribute("transform",`translate(${r}) scale(${i} 1) rotate(0)`),d3.select(t).transition().delay(c(0,1e3)).duration(p([800,1200])).attr("opacity",1).on("end",(()=>{$r(p(["Rubber Ducky has been beamed to another location!","Rubber Ducky got transported to somewhere on the ship","Rubber Ducky activated the Site-to-site transport..."])),t.dataset.aniInProgress=!1}))}function Pe(){const e=document.querySelector("#msdContainer svg #rubberDucky");if("true"===e.dataset.aniInProgress)return;e.dataset.aniInProgress=!0;const t=document.querySelector("#msdContainer svg #rubberDuckyTarget"),o=e.dataset.translate??"0 0",n=Number(e.dataset.hFlip??1);Q(p(["warningHigh","deployed","affirmative"]),0,0,0,.6),d3.select(t).attr("transform",`translate(${o}) scale(3) rotate(0)`).attr("opacity",1).attr("visibility","visible").transition("blinking").delay(200).duration(0).attr("opacity",0).transition("blinking").delay(200).on("start",(()=>{t.setAttribute("opacity",.5),$r("Rubber Ducky located","timePrefix")})).duration(400).attr("transform",`translate(${o}) scale(2) rotate(90)`).attr("opacity",0).on("end",(()=>{t.setAttribute("visibility","hidden")})),d3.select(e).transition().delay(400).duration(700).attr("transform",`translate(${o}) scale(${7*n} 7) rotate(0)`).on("start",(()=>{Q("beepX2Upper",.4,0,0,.7)})).transition().delay(150).duration(1e3).attr("transform",`translate(${o}) scale(${n} 1) rotate(0)`).transition().duration(100).attr("opacity",0).on("start",(()=>{Q("notification",0,0,0,.7)})).on("end",(()=>{$e()}))}function Oe(e){const t=si();t.bufferTimeStatus=!t.bufferTimeStatus;const o=t.svg1.querySelector("#homeBtn3 #bufferTimeQuota tspan");if(t.bufferTimeStatus){Q("warningHigh",0,0,0,.6),document.documentElement.dataset.bufferTime="",o.textContent="WARNING / ZERO QUOTA",t.bufferTimeCountdown=60;const e=t.svg2.querySelector("#bufferTimeRings1"),n=t.svg2.querySelector("#bufferTimeNumber"),r=n.querySelector("tspan"),i=43.25;e.style.strokeDasharray="0 2595";const s=t.svg2.querySelector("#bufferTimeRings3"),a=t.svg2.querySelector("#bufferTimeRings4");s.style.strokeDashoffset=c(-6e3,6e3),a.style.strokeDashoffset=c(-6e3,6e3);const l=1;let d=l;const u=["warning","warning","warning","warning","hey!","super warning","final warning","To all crews","LD crew","Per the captain","special event","To beta-shifters","to all holonovel writers"],m=["","","","","","","","","","","","","","","","","","","","","","!"," !!","...!!!"," seriously",". shut up!",", m’kay",". absolutely zero.",", except for androids",", unless you’re Mike",", not even for captains"],y=e=>{n.setAttribute("transform",`translate(${t.bufferTimeTextOrigin.x} ${t.bufferTimeTextOrigin.y}) scale(1 0.85) translate(${-1*t.bufferTimeTextOrigin.x+t.bufferTimeTextWidthOffset[e]} -${t.bufferTimeTextOrigin.y})`)};r.textContent="60",y(60),t.bufferTimeTimer=setInterval((()=>{t.bufferTimeCountdown<-5&&(t.bufferTimeCountdown=60,d=l);let o=t.bufferTimeCountdown<0?0:t.bufferTimeCountdown;const n=h(o,2);y(o),r.textContent=n;const g=(60-o)*i;if(e.style.strokeDasharray=`${2595-g} ${g}`,e.style.strokeDashoffset=649-g,s.style.strokeDashoffset=1002-4009/60*o,a.style.strokeDashoffset=1221-4078/60*o,60==t.bufferTimeCountdown)d==l&&Q("executing");else if(t.bufferTimeCountdown>=16){const e=1-t.bufferTimeCountdown/60*.82;t.bufferTimeCountdown%10==0?Q("beepX3Upper",0,0,0,e):Q("beepX1Down",0,0,.08,Math.max(e,.6))}else{let e;t.bufferTimeCountdown>=6?(e="blink1",Q("beepX1Up")):t.bufferTimeCountdown>=1?(e="blink2",Q("beepX2Up")):(e="blink3",Q(p(["processing","warningHigh"]))),a.classList.add(e),t.bufferTimeCountdown<1&&(s.classList.add(e),s.style.strokeDashoffset=c(-6e3,6e3),a.style.strokeDashoffset=c(-6e3,6e3)),r.classList.add(e),setTimeout((()=>{r.removeAttribute("class"),s.removeAttribute("class"),a.removeAttribute("class")}),600)}o%10==0&&$r(`${p(u)} • No Buffer Time granted${p(m)}`,"timePrefix"),d>0?d--:--t.bufferTimeCountdown}),1e3)}else Q("exitTask"),delete document.documentElement.dataset.bufferTime,o.textContent="QUOTA • PERMITTED",clearInterval(t.bufferTimeTimer),t.bufferTimeTimer=null,$r("Buffer Time Quota Restored","timePrefix")}W=new URL("sounds/"+a("gC69E").resolve("1yFaE"),import.meta.url).toString();let Ue=!1,He=!1;let _e,Xe;const Ge=["pointerdown","pointermove","keypress","scroll","touchstart"];let Ve=()=>{};function We(){Wn(),He=!0}function Ye(e){He&&zn(),He=!1,clearTimeout(_e),delete document.documentElement.dataset.idle,clearTimeout(Xe),Xe=setTimeout((()=>{document.documentElement.dataset.idle=""}),3100),Ve()}let ze=null;function Ze(e=null){const t=si();return null!=e&&!0===t.jwstImg.filePreloaded[e]}function Je(e=null){const t=si();if(null==e)return!1;if(1==t.jwstImg.filePreloaded[e])return;const o=new Image;o.dataset.jwstImgIndex=e,o.addEventListener("load",Ke,!0),o.src=t.jwstImg.fileRef[e]}function Ke(e){const t=si(),o=parseInt(e.currentTarget.dataset.jwstImgIndex);t.jwstImg.filePreloaded[o]=!0,t.jwstImg.preloadedIndexes.push(o)}function Qe(){const e=si(),t=document.querySelector("#msdContainer2 > svg #target"),o=t.querySelector("#targetOuter"),n=t.querySelector("#targetInnerH"),r=t.querySelector("#targetInnerV"),i=document.querySelector("#msdContainer2 > svg #targetStar"),s=document.querySelector("#msdContainer2 > svg #targetLines"),a=s.querySelector("#targetLineH"),d=s.querySelector("#targetLineV"),y=document.querySelector("#msdContainer > svg #jwstImage_placeholder").getBBox(),g=t.getBBox().width,f=[.8*g,y.width-.8*g],b=[.8*g,y.height-.8*g],S=document.querySelector("#msdContainer svg #jwstImage_placeholder + image");zr(t),zr(i),zr(o),zr(n),zr(r),t.setAttribute("transform",`translate(${.5*y.width} ${.5*y.height})`);i.style.opacity=0,o.setAttribute("opacity",0),r.setAttribute("opacity",0),n.setAttribute("fill",`var(--${p(e.nonDarkColorCssVarNames)})`),s.setAttribute("opacity",0),a.setAttribute("opacity",0),d.setAttribute("opacity",0),t.style.opacity=0;const C=e.jwstImg.starRotation[e.jwstImg.currentIndex];let A,v,D=c(4,10);const T=()=>{A=c(f[0],f[1]),v=c(b[0],b[1]);const g=`${A} ${v}`,E=l()*m(4)*180,w=u(.2,1.4),x=Math.random()<.35,k=x?1:0;i.style.filter=Math.random()<.5?"drop-shadow(0 0 8px #fff) drop-shadow(0 0 32px #fff)":`drop-shadow(0 0 8px #fff) drop-shadow(0 0 32px #fff) brightness(0.6) sepia(1) saturate(${c(1,8)}) hue-rotate(${c(0,360)}deg)`,function(){const t=`var(--${p(e.nonDarkColorCssVarNames)})`;d.setAttribute("stroke",t),a.setAttribute("stroke",t);const o=`${c(6,40)} ${p([0,c(6,40)])}`;d.setAttribute("stroke-dasharray",o),a.setAttribute("stroke-dasharray",o);const n=Math.random()<.5?c(4,10):c(30,100);d.setAttribute("stroke-width",n),a.setAttribute("stroke-width",n);const r=.1*c(3,8);d.setAttribute("opacity",r),a.setAttribute("opacity",r),s.setAttribute("opacity",1);const i=c(100,1200),l=c(100,1200),m=Math.max(i,l);let h=0;i>l&&(h=Math.abs(i-l));d3.select(a).transition().duration(i).ease(ei()).attr("y1",y.y+v).attr("y2",y.y+v),d3.select(d).transition().duration(l).ease(ei()).on("start",(()=>{d3.select(s).transition().duration(m).attr("opacity",.5)})).attr("x1",y.x+A).attr("x2",y.x+A).transition().delay(150+h).duration(1500).on("start",(()=>{s.setAttribute("opacity",0)})).on("end",(()=>{const e=u(r,1);d.setAttribute("opacity",e),a.setAttribute("opacity",e)}))}();const L=c(0,2400),I=c(800,4e3),B=L+I-1600;e.jwstImg.soundTimer=setTimeout((()=>{Q(p(["executing","longTaskLow","beepX3Downer"]),0,0,0,.25)}),B),d3.select(t).transition().delay(L).duration(I).ease(ei()).attr("transform",`translate(${g}) rotate(0) scale(${u(.6,1.4)})`).style("opacity",.4).on("end",(()=>{Q("deployed",0,0,0,.25),t.style.opacity=1,Qr(t),s.setAttribute("opacity",1),Qr(s),d3.select(a).transition().delay(350).duration(150).attr("opacity",0),d3.select(d).transition().delay(350).duration(150).attr("opacity",0);const o=`var(--${p(e.nonDarkColorCssVarNames)})`;n.setAttribute("fill",o),x&&r.setAttribute("fill",o),d3.select(i).attr("transform",`translate(${g}) rotate(${C}) scale(${u(.6,1.4)})`).transition().delay(400).duration(700).on("start",(()=>{Qr(i)})).transition().duration(1e3).ease(ei()).style("opacity",u(.6,1.2)).transition().delay(c(900,3e3)).duration(c(800,3e3)).ease(ei()).style("opacity",0)})).transition().delay(1e3*k).duration(9e3*k).on("start",(()=>{x&&(o.setAttribute("opacity",1),Qr(o),r.setAttribute("transform","scale(0.1)"),d3.selectAll([r,n]).transition().delay(1200).duration(1200).ease(d3.easeBackInOut.overshoot(4)).attr("transform","scale(0.6)").attr("opacity","1").on("start",((e,t)=>{0==t&&Q(p(["warningHigh","warningLow"]),.75,0,0,.3)})).transition().delay(400).duration(1500).ease(d3.easeBackInOut.overshoot(4)).attr("transform",`scale(0.5) rotate(${l()*c(1,10)*90})`).on("end",(function(){this.setAttribute("transform","scale(0.5)")})).transition().delay(400).duration(1500).ease(d3.easeBackIn.overshoot(4)).attr("transform","scale(1)"),d3.select(o).attr("transform","scale(1)").transition().delay(400).duration(1500).ease(d3.easeBackInOut.overshoot(6)).attr("transform","scale(1.2)").attr("opacity","1").on("start",(()=>{Q(p(["affirmative","warningLow","deployed","exitTask","executing"]),.5,0,0,.4)})).transition().delay(1200).duration(1500).ease(d3.easeBackInOut.overshoot(6)).attr("transform",`scale(1.3) rotate(${l()*c(1,10)*90})`).on("start",(()=>{Q("processing",0,.2,0,.15,.9)})).on("end",(function(){this.setAttribute("transform","scale(1.3)"),Q("beepX2Upper",0,0,0,.5)})).transition().delay(400).duration(1500).ease(d3.easeBackInOut.overshoot(6)).on("start",(()=>{const t=S.getBBox();S.setAttribute("transform-origin",`${t.x+A} ${t.y+v}`),d3.select(S).transition().delay(950).duration(100*c(4,15)).ease(d3.easeBackOut).attr("transform",`scale(1.${h(c(5,17),2)})`),e.jwstImg.soundTimer=setTimeout((()=>{Q(p(["exitTask","affirmative","beepX3Upper","executing"]),0,0,0,.3)}),1100)})).attr("transform","scale(1)").on("end",(()=>{Qr(r),Qr(n),Qr(o),d3.select(i).interrupt().style("opacity",0).transition().duration(800).style("opacity",1),o.setAttribute("fill",`var(--${p(e.nonDarkColorCssVarNames)})`),d3.select(t).transition("rotate1").duration(100*c(6,12)).ease(ei()).attr("transform",`translate(${g}) rotate(${l()*(90*c(0,2)+45)}) scale(${u(.6,1.4)})`).on("start",(()=>{Q("processing",0,.4,0,.13)})).on("end",(()=>{Q("beepX2Downer",0,0,0,.25)}))})))})).transition().delay(c(50,600)).duration(100*c(6,20)).ease(ei()).on("start",(()=>{const e=Math.random();let t="";e<.15&&(t=`invert(${.1*c(7,10)})`),e<.3?t=`saturate(${.1*c(0,7)})`:e<.45?t=`saturate(${.1*c(11,20)}) brightness(${.1*c(11,20)})`:e<.6?t="blur(8px)":e<.75&&(t=`hur-rotate(${c(40,330)})`),S.style.filter=t,Q("shortBeep",0,0,0,.3)})).attr("transform",`translate(${g}) rotate(${E}) scale(${u(.2,1.4)})`).on("end",(()=>{x&&Qr(i)})).transition().duration(100*c(2,16)).ease(ei()).attr("transform",`translate(${g}) rotate(${Math.random()<.5?E:0}) scale(${w})`).on("start",(()=>{Q("exitTask",0,0,0,.2,.85)})).on("end",(()=>{x&&(o.setAttribute("fill",n.getAttribute("fill")),o.setAttribute("opacity",.7),d3.select(S).transition().delay(2e3).duration(100*c(12,25)).ease(d3.easeCubicInOut).attr("transform","scale(1)").on("start",(()=>{Q("negative",.3,0,0,.15,.9)})).on("end",(()=>{Q("beepX1Down",0,0,0,.3)})))})).transition().delay(c(2500,7e3)).duration(3700).on("start",(()=>{x&&(d3.selectAll([r,o]).transition().delay((()=>100*c(0,8))).duration((()=>100*c(4,10))).attr("opacity",0).on("start",(()=>{Q("shortBeep",0,0,0,.2)})),d3.select(i).transition().duration(1200).style("opacity",0))})).on("end",(()=>{D--,0==D&&delete document.documentElement.dataset.huggy,Q("beepX3Downer",0,0,0,.3),t.setAttribute("transform",`translate(${g}) rotate(0) scale(${w})`),0==D?(t.style.opacity=0,et("restart")):(Qr(t,"blink1"),T())}))};T()}function et(e=null){si();const t=document.querySelector("#msdContainer > svg #jwstImageGroup"),o=t.querySelector("mask"),n=o.querySelector("#jwstMaskRef"),r=t.querySelector("#jwstImage_placeholder + image");d3.select(n).interrupt().transition().duration(400).style("opacity",0).on("end cancel interrupt",(()=>{"restart"===e?tt():(null!=r&&r.remove(),o.querySelectorAll("rect").forEach((e=>{e.remove()})),n.style.opacity=0)}))}function tt(){const e=si();!function(){const e=si();let t=e.jwstImg.nextIndex;if(Ze(t))e.jwstImg.nextIndex=m(e.jwstImg.fileRef.length),e.jwstImg.nextIndex==t&&(e.jwstImg.nextIndex=(e.jwstImg.nextIndex+1)%e.jwstImg.fileRef.length),Je(e.jwstImg.nextIndex);else{let o=m(e.preloadedIndexes.length);o==e.jwstImg.currentIndex&&(o=(o+1)%e.preloadedIndexes.length),t=o}e.jwstImg.currentIndex=t;const o=document.querySelector("#msdContainer svg #jwstImage_placeholder + image");if(null==o){const o=document.querySelector("#msdContainer svg #jwstImage_placeholder"),r=o.getBBox();var n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS(null,"x",r.x),n.setAttributeNS(null,"y",r.y),n.setAttributeNS(null,"width",r.width),n.setAttributeNS(null,"height",r.height),n.setAttributeNS("http://www.w3.org/1999/xlink","href",e.jwstImg.fileRef[t]),o.parentNode.insertBefore(n,o.nextSibling)}else o.setAttributeNS("http://www.w3.org/1999/xlink","href",e.jwstImg.fileRef[t]);$r("loading image from NASA’s James Webb Space Telescope...")}();const t=document.querySelector("#msdContainer > svg #jwstImageGroup"),o=t.querySelector("mask"),n=o.querySelector("#jwstMaskRef");n.style.opacity=0;const r=t.querySelector("#jwstImage_placeholder").getBBox();let i=r.height,s=r.y;const a="http://www.w3.org/2000/svg",l=t.querySelector("#jwstImage_placeholder + image");o.querySelectorAll("rect").forEach((e=>{e.remove()})),l.style.filter="blur(32px)",l.style.transition="none",document.documentElement.dataset.jwst="";let d=!0;if(Math.random()<.5){const e=Math.random()<.5?()=>c(90,250):()=>c(10,70);for(;i>0;){let t=e();t>i?(t=i,i=0):i-=t;let n=document.createElementNS(a,"rect");n.setAttribute("x",r.x),n.setAttribute("y",s),n.setAttribute("width",r.width),n.setAttribute("height",t),n.setAttribute("fill","#fff"),n.setAttribute("rx",0),s+=t,o.appendChild(n),n.style.opacity=0}}else{d=Math.random()<.5;const e=r.width/7,t=r.height/4;for(let n=0;n<7;n++)for(let i=0;i<4;i++){let s=document.createElementNS(a,"rect");s.setAttribute("x",r.x+e*n),s.setAttribute("y",r.y+t*i),s.setAttribute("width",e),s.setAttribute("height",t),s.setAttribute("fill","#fff"),o.appendChild(s),s.style.opacity=0}}d3.select(t).transition().delay(200).duration(1750).on("start",(()=>{o.querySelectorAll("rect").forEach((e=>{e.style.transition=`opacity ${c(100,1e3)}ms ${p(["linear","ease","ease-in","ease-out"])} ${c(0,600)}ms`,e.style.opacity=d?1:.2*c(2,5)})),l.style.filter="none",l.style.transition="filter 1.4s ease 0.8s",e.jwstImg.soundTimer=setTimeout((()=>{Q("processing",0,0,0,p([.15,.3,.5]),p([1,.93,.85])),Q("processing",.37,0,0,p([.11,.17,.29]),p([1,.93,.85]))}),650)})).on("end",(()=>{o.querySelectorAll("rect").forEach((e=>{d&&(n.style.opacity=1,e.remove())})),$r(e.jwstImg.description[e.jwstImg.currentIndex],null,!0),e.jwstImg.currentIndex==e.jwstImg.huggyIndex&&(document.documentElement.dataset.huggy="")})).transition().delay(1e3).duration(0).on("start",(()=>{Qe()}))}function ot(){const e=si(),t=document.querySelector("#msdContainer > svg #jwstImageGroup").querySelector("mask"),o=t.querySelector("#jwstMaskRef"),n=document.querySelector("#msdContainer > svg #ringClock"),r=Jr(n),i=`translate(${r.x}px, ${r.y}px)`,s=`translate(-${r.x}px, -${r.y}px)`;if(delete document.documentElement.dataset.huggy,!0===e.jwstStatus)e.jwstStatus=!1,clearTimeout(e.jwstImg.soundTimer),e.jwstImg.soundTimer=null,Q("beepX3Downer"),Q("exitTask",.3),jr(),et(),Wr("normal"),Vr("normal"),n.classList.remove("jwst"),d3.select(n).transition().delay(250).duration(800).ease(d3.easeBackInOut).style("opacity",1).style("transform",`${i} rotate(0) scale(1) ${s}`).on("end cancel interrupt",(function(){this.style.transition=null,this.style.transform=`${i} rotate(0) scale(1) ${s}`})),delete document.documentElement.dataset.jwst,function(){si();const e=document.querySelector("#msdContainer > svg #jwstImageGroup"),t=e.querySelector("#jwstImage_placeholder + image"),o=document.querySelector("#msdContainer2 > svg #target"),n=o.querySelector("#targetOuter"),r=o.querySelector("#targetInnerH"),i=o.querySelector("#targetInnerV"),s=document.querySelector("#msdContainer2 > svg #targetStar"),a=document.querySelector("#msdContainer2 > svg #targetLines"),l=a.querySelector("#targetLineH"),c=a.querySelector("#targetLineV");d3.selectAll([e,t,s,o,r,i,n,a,l,c]).interrupt(),o.style.visibility="hidden",a.style.visibility="hidden",s.style.visibility="hidden"}(),t.querySelectorAll("rect").forEach((e=>{e.remove()}));else{e.jwstStatus=!0,Q("shortRandomBeep",0,0,0,.5),Q("executing",.15,0,0,.4),d3.select(o).interrupt(),o.style.opacity=0;const t=document.querySelector("#msdContainer2 > svg"),r=t.querySelector("#target"),i=t.querySelector("#targetLines"),s=t.querySelector("#targetStar");r.style.visibility="visible",r.style.opacity=0,i.style.visibility="visible",i.style.opacity=0,s.style.visibility="visible",s.style.opacity=0,Vr("minimized"),Wr("minimized");const a=n.dataset.jwstRingClockTransform;d3.select(n).style("transition","none").transition().delay(80).duration(600).ease(d3.easeBackInOut.overshoot(1.05)).style("opacity",.55).style("transform",a).on("end cancel interrupt",(function(){this.style.transition=null,this.classList.add("jwst")})),tt()}}function nt(e){zr(e),e.style.opacity=.35,e.setAttribute("fill","#fff"),Qr(e,"blink2");const t=String.fromCharCode(75),o=String.fromCharCode(97);d3.select(e).transition().delay(500).duration(1e3).ease(d3.easeCubicOut).on("start",(()=>{e.style.opacity=.8,$r("you’ve found the  "+t+" o "+o+" l "+o+" ! !  Con"+String.fromCharCode(103)+"rats ~")})).attr("transform","scale(2)").on("end",(()=>{$r("A l l   h a i l   t h e   g r e a t    "+t+" o "+o+" l "+o+"  ! ! ! ! !")})).transition().delay(800).duration(400).attr("transform","scale(1)").on("end",(()=>{e.style.opacity=null,e.setAttribute("fill","#666")}))}const rt=["N9Sxyvz4lW4","TepWfVIaWv8","X3tKtrqsSBg","Kxrj7PYJMQY","PLcKQG9ZuAQaTXcpM_C_i_9wXBra7tXRPF"];function it(){const e=si();e.videoBox={youTubeApiReady:!1,youTubePlayer:null,youTube_onPlayerReady:null,youTube_onPlayerStateChange:null,defaultVolume:10},e.homeContentDom.querySelector("#ytMenu #menuBg").style.fillOpacity=1,e.homeContentDom.querySelector("#ytMenu #menuBg").style.strokeWidth=0,e.homeContentDom.querySelector("#ytMenu #menuBg").style.filter="none";const t=document.getElementById("ytInput_placeholder"),o=t.getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");n.setAttribute("width",o.width),n.setAttribute("height",o.height),n.setAttribute("x",o.x),n.setAttribute("y",o.y),t.parentNode.insertBefore(n,t.nextSibling),t.style.display="none";const r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("id","ytTextInput"),r.setAttribute("placeholder","ENTER A YOUTUBE VIDEO/PLAYLIST ID HERE"),r.style.width=o.width+"px",r.style.height=o.height+"px",r.style.pointerEvents="auto",n.appendChild(r),r.addEventListener("keyup",(e=>{if("Enter"===e.key){let e=yt(r.value.trim());e.length>0&&lt(e)}})),e.homeContentDom.querySelector('[id^="btnS47Menu"]').onpointerdown=()=>{at()},e.homeContentDom.querySelector('[id^="btnS47End"]').onpointerdown=()=>{mt()},e.shipFrameDom.querySelector('#frameShipMain [id^="btnS47Close"]').onpointerdown=()=>{mt()},e.homeContentDom.querySelector('[id^="ytMenu"]').onpointerdown=e=>{const t=e.target.getAttribute("id");let o=null;t.includes("btnS47Yt6")?(o=yt(r.value.trim()),0==o.length&&(o=null)):t.includes("btnS47Yt1")?o=rt[0]:t.includes("btnS47Yt2")?o=rt[1]:t.includes("btnS47Yt3")?o=rt[2]:t.includes("btnS47Yt4")?o=rt[3]:t.includes("btnS47Yt5")&&(o=rt[4]),null!==o&&lt(o)};const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";const s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s),e.videoBox.youTube_onPlayerReady=t=>{const o=t.target;o.setVolume(e.videoBox.defaultVolume),o.setShuffle(!0),o.setLoop(!0),o.playVideo()},e.videoBox.youTube_onPlayerStateChange=e=>{},window.onYouTubeIframeAPIReady=()=>{e.videoBox.youTubeApiReady=!0}}function st(){lt(p(rt))}function at(e,t=null){si();let o;o=!0===e||!1!==e&&!("ytMenu"in document.documentElement.dataset),o?(document.documentElement.dataset.ytMenu="","mute"!==t&&Q("notification",0,0,0,.25)):(delete document.documentElement.dataset.ytMenu,"mute"!==t&&Q("beepX2Downer",0,0,0,.3))}function lt(e){const t=si();mt("mute"),$r("YouTube Channel Opened: Establishing connection...");const o=ct();if(t.videoBox.youTubeApiReady){const n=document.createElement("div");n.setAttribute("id","ytIframe2"),document.body.appendChild(n);const r={height:o.height,width:o.width,playerVars:{playsinline:1,loop:1,disablekb:1,rel:0},events:{onReady:t.videoBox.youTube_onPlayerReady,onStateChange:t.videoBox.youTube_onPlayerStateChange}};e.length<12?r.videoId=e:(r.playerVars.listType="playlist",r.playerVars.list=e),t.videoBox.youTubePlayer=new YT.Player("ytIframe2",r)}else{const t=document.createElement("iframe");e.length<12?t.setAttribute("src",`https://www.youtube.com/embed/${e}?autoplay=1&enablejsapi=1&origin=https://www.mewho.com&modestbranding=1&disablekb=1&playsinline=1&rel=0`):t.setAttribute("src",`https://www.youtube.com/embed/videoseries?list=${e}&autoplay=1&enablejsapi=1&origin=https://www.mewho.com&modestbranding=1&loop=1&disablekb=1&playsinline=1&rel=0`),t.setAttribute("id","ytIframe2"),t.setAttribute("frameborder","0"),t.setAttribute("width",o.width),t.setAttribute("height",o.height),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen",""),document.body.appendChild(t)}document.documentElement.dataset.ytWindow="",at(!1),Q("processing",.15,.3,0,.2)}function ct(e=null){const t=si();let o,n;n="ship"==e||"home"==e||"sickbay"==e?e:"sickbay"in document.documentElement.dataset?"sickbay":document.documentElement.dataset.pageState,o="ship"==n?t.shipFrameDom.querySelector("#yt_placeholderShipFixed"):"sickbay"==n?t.sickbayContentDom.querySelector("#yt_placeholderSickbay"):t.homeContentDom.querySelector("#yt_placeholder");const r=o.getBoundingClientRect();return document.documentElement.style.setProperty("--ytIframeTop",r.top+"px"),document.documentElement.style.setProperty("--ytIframeLeft",r.left+"px"),document.documentElement.style.setProperty("--ytIframeWidth",r.width+"px"),document.documentElement.style.setProperty("--ytIframeHeight",r.height+"px"),r}function dt(){const e=document.getElementById("ytIframe2");null!=e&&e.classList.add("hide")}function ut(){const e=document.getElementById("ytIframe2");null!=e&&e.classList.remove("hide")}function mt(e=null){const t=si();delete document.documentElement.dataset.ytWindow,t.videoBox.youTubePlayer=null;const o=document.getElementById("ytIframe2");null!==o&&o.remove(),at(!1,"mute"),"mute"!==e&&(Q("exitTask",0,0,0,.6),$r("YouTube Video Window Terminated As Requested"))}function yt(e){return void 0!==(e=e.split(/(vi\/|v%3D|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_\-]/i)[0]:e[0]}let pt=0;function ht(){const e=si();if("transitioning"==e.pageStatus)return;e.setPageState("home"),e.pageStatus="transitioning",dr(),cr(e.homeContentDom.querySelector("#homeClock tspan"),e.homeContentDom.querySelector("#homeDate tspan"),"hasRingClock"),e.logPlaceholderDom=e.homeContentDom.querySelector("#log_placeholder"),Fr(),e.logDisplayDom.style.opacity=1;const t=e.homeFrameDom.querySelector("#homeTopBar"),o=e.homeFrameDom.querySelector("#topRightBlock");e.homeContentDom.querySelector("#homeWindow").style.transform="translate(70px,0)",e.homeFrameDom.style.visibility="visible",e.homeFrameDom.style.opacity=1,e.homeContentDom.style.opacity=1,e.homeContentDom.style.visibility="visible",e.configContentDom.style.visibility="hidden",e.configContentDom.style.opacity=0,Hr();const n=e.homeContentDom.querySelector("#ringClock"),r=e.homeContentDom.querySelector("#homeWindow"),i=e.homeContentDom.querySelector("#homeConfig"),s=e.homeFrameDom.querySelector("#frameTitleText"),a=Jr(n),d=`translate(${a.x}px, ${a.y}px)`,u=`translate(-${a.x}px, -${a.y}px)`;Q("beepX2Downer",.15,0,0,.3),d3.select(e.homeFrameDom.querySelector("#topLeftCorner")).style("opacity",1).transition().delay(200).duration(200).on("start",(function(){this.style.animationDuration="0.7s",this.classList.add("blink2"),b(e.pageTimers,(()=>{this.classList.remove("blink2")}),500)})).on("end",(function(){o.style.transition=null,o.style.opacity=1,o.style.transform="translate(0,0)",Q("beepX1Down",.55)})).transition().delay(100).duration(700).on("start",(function(){t.style.opacity=1,t.setAttribute("width",t.dataset.width)})).on("end",(function(){Q("beepX2Up"),s.style.opacity=1,s.classList.add("blink2"),b(e.pageTimers,(()=>{s.classList.remove("blink2")}),600);const t=e.homeFrameDom.querySelectorAll('[id^="homeBtn"]');t.forEach((t=>{b(e.pageTimers,(()=>{t.style.transition=`opacity ${c(-100,1200)}ms ease ${c(0,200)}ms`,t.style.opacity=1}),c(0,600))})),b(e.pageTimers,(()=>{t.forEach((e=>{e.style.transition=null}))}),1800)})).transition().delay(400).duration(800).on("start",(function(){b(e.pageTimers,(()=>{Q("negative",0,0,0,.5),e.homeContentDom.querySelector("#homeDate").style.opacity=1}),500),e.homeContentDom.querySelector("#homeClock").style.opacity=1})).on("end",(function(){r.style.opacity=.3,r.style.transform=null,Q("longTaskLow"),e.setDocumentCurrentPage("home"),e.pageStatus="home"})).transition().delay(800).duration(800).on("start",(function(){i.style.opacity=.15,e.configContentDom.style.visibility="visible",e.configContentDom.style.opacity=.15})).on("end",(function(){n.style.opacity=.5,n.style.transform=`${d} rotate(${l()*c(15,50)}deg)  scale(0.5) ${u}`,Q("beepX3Downer",0,0,0,.5),b(e.pageTimers,(()=>{n.querySelectorAll('#ringSecond, [id^="ringMinute"]').forEach((e=>{e.style.strokeDashoffset=null})),n.classList.add("blink3"),n.style.opacity=1,b(e.pageTimers,(()=>{n.classList.remove("blink3")}),1e3)}),1e3),b(e.pageTimers,(()=>{Q("processing",0,0,0,.3),n.style.transform=`${d} rotate(0) scale(1.1) ${u}`,b(e.pageTimers,(()=>{n.style.transform=`${d} rotate(0) scale(1) ${u}`,Q("shortRandomBeep",.25,0,0,.3),Q("notification",1,0,0,.5)}),1e3)}),1500)})).transition().delay(850).duration(2e3).on("start",(function(){r.style.opacity=null})).on("end",(function(){i.style.opacity=null})).transition().delay(600).duration(600).on("start",(function(){e.configContentDom.style.opacity=1,e.configContentDom.classList.add("enabled"),$r("LD LCARS is ready","timePrefix")})).on("end",(function(){})).on("cancel interrupt",(()=>{n.style.transform=`${d} rotate(0) scale(1) ${u}`})).transition().delay(2300).duration(1).on("start",(function(){$r(Pr())})),e.shipContentDom.style.opacity=0,e.shipContentDom.style.visibility="hidden",e.shipFrameDom.style.opacity=0,e.shipFrameDom.style.visibility="hidden"}function gt(){const e=si();if("transitioning"==e.pageStatus)return;e.pageStatus="transitioning",e.pageTimers.forEach((e=>{clearTimeout(e)})),e.pageTimers=[],$r("switching to LD Main screen","timePrefix"),dr(),cr(e.homeContentDom.querySelector("#homeClock tspan"),e.homeContentDom.querySelector("#homeDate tspan"),"hasRingClock"),delete document.documentElement.dataset.tinyShips;const t=e.homeFrameDom.querySelector("#topLeftCorner");t.setAttribute("fill",t.dataset.fill),t.setAttribute("d",t.dataset.d);const o=e.homeFrameDom.querySelector("#homeTopBar");o.setAttribute("fill",o.dataset.fill),o.setAttribute("x",o.dataset.x),o.setAttribute("width",o.dataset.width);const n=e.homeFrameDom.querySelector("#topRightBlock");n.setAttribute("fill",n.dataset.fill),n.style.opacity=1,e.homeContentDom.querySelector("#homeClock").style.visibility="visible",e.homeContentDom.querySelector("#homeDate").style.visibility="visible",e.homeContentDom.querySelector("#homeConfig").style.opacity=0,e.homeContentDom.querySelector("#homeWindow").style.opacity=.4,e.configContentDom.removeAttribute("transform"),e.configContentDom.style.visibility="hidden",e.configContentDom.style.opacity=0,e.configContentDom.classList.remove("enabled"),e.homeContentDom.querySelector("#homeWindow").style.transform="translate(-250px,0)",dt(),Hr(),d3.select(e.shipFrameDom.querySelector("#shipMainTopLeftCorner")).transition("main").duration(400).on("start",(()=>{Q("warningLow",0,0,0,.6),e.shipContentDom.style.transitionDuration="0.3s",e.shipContentDom.style.opacity=0,b(e.pageTimers,(()=>{e.shipContentDom.style.transitionDuration=null}),350),e.shipFrameDom.querySelector("#shipMsdBtns").style.opacity=0})).on("end",(()=>{re(),me(),e.shipFrameDom.querySelector("#shipTopBar1c").style.opacity=0,e.shipFrameDom.querySelector("#shipFrame1e").style.opacity=0,e.shipFrameDom.querySelector("#shipClock").style.opacity=0,b(e.pageTimers,(()=>{e.shipFrameDom.querySelector("#shipTopBar1b").style.opacity=0,e.shipFrameDom.querySelector("#shipFrame1d").style.opacity=0,e.shipFrameDom.querySelector("#subTitle").style.opacity=0,b(e.pageTimers,(()=>{e.shipFrameDom.querySelector("#shipTitle").style.opacity=0,e.shipFrameDom.querySelector("#subTitleBar").style.opacity=0}),160)}),160),Q("negative",0,.2,0,.25,1.1)})).transition("main").delay(480).duration(600).on("start",(()=>{const t=d3.transition().duration(600).ease(d3.easeCubic);Q("executing",0,.4,0,.3),e.shipFrameDom.querySelector("#shipMainTopLeftCorner").setAttribute("fill",e.homeFrameDom.querySelector("#topLeftCorner").dataset.fill),d3.select(e.shipFrameDom.querySelector("#shipMainTopLeftCorner")).transition(t).attr("d",e.homeFrameDom.querySelector("#topLeftCorner").dataset.d);const o=e.homeFrameDom.querySelector("#homeBtn0").getBBox(),n=e.homeFrameDom.querySelector("#homeBtn2").getBBox();d3.select(e.shipFrameDom.querySelector("#shipFrame1a")).transition(t).attr("x",o.x).attr("y",o.y).attr("width",o.width).attr("height",n.y+n.height-o.y),d3.select(e.shipFrameDom.querySelector("#shipFrame1b")).transition(t).attr("y",e.shipFrameDom.querySelector("#shipFrame1c").getBBox().y).attr("height",0).on("end",(function(){this.style.opacity=0})),d3.select(e.shipFrameDom.querySelector("#shipFrame1c")).transition(t).style("opacity",0);const r=e.shipFrameDom.querySelector("#frameShipSub").getBBox().x-e.shipFrameDom.querySelector("#shipMainTopLeftCorner").getBBox().x;e.shipFrameDom.querySelector("#frameShipSub").style.transition=null,d3.select(e.shipFrameDom.querySelector("#frameShipSub")).transition(t).style("transform",`translate(${r}px,0)`).style("opacity",0),d3.select(e.shipFrameDom.querySelector("#shipTopBar1a")).transition(t).attr("x",e.homeFrameDom.querySelector("#homeTopBar").dataset.x).attr("width",e.homeFrameDom.querySelector("#homeTopBar").dataset.width)})).transition("main").delay(0).duration(300).on("start",(()=>{e.logDisplayDom.style.opacity=0,e.shipFrameDom.querySelector("#frameShipConfig").classList.add("blink2"),Q("exitTask",0,0,0,.4,1.2)})).on("end",(()=>{e.shipFrameDom.querySelector("#frameShipConfig").classList.remove("blink2")})).transition("main").delay(30).duration(200).on("start",(()=>{e.shipFrameDom.querySelector("#frameShipConfig").style.transform="translate(800px, 0)",e.shipFrameDom.querySelector("#frameShipConfig").style.opacity=0,e.setPageState("home"),e.logPlaceholderDom=e.homeContentDom.querySelector("#log_placeholder"),Fr(),e.logDisplayDom.style.opacity=1,e.logDisplayDom.style.visibility="visible"})).on("end",(()=>{if(e.homeContentDom.querySelector("#homeWindow").style.transform=null,e.homeContentDom.querySelector("#homeWindow").style.visibility="visible",e.homeContentDom.querySelector("#homeWindow").style.opacity=null,Q(p(["beepX2Upper","beepX1Up","beepX2Downer"]),.2,0,0,.7),e.homeFrameDom.style.visibility="visible",e.homeFrameDom.style.opacity=1,e.homeContentDom.style.opacity=1,e.homeContentDom.style.visibility="visible",b(e.pageTimers,(()=>{e.homeFrameDom.querySelectorAll('[id^="homeBtn"]').forEach((e=>{e.style.opacity=1}))}),300),0==pt){const t=e.homeFrameDom.querySelectorAll('[id^="homeBtn"]').length-1,o=e.homeFrameDom.querySelector(`[id^="homeBtn${t}"]`).getBBox(),n=e.homeFrameDom.querySelector('[id^="homeBtn0"]').getBBox().y;pt=o.y+o.height-n}d3.select(e.shipFrameDom.querySelector("#shipFrame1a")).transition().duration(400).attr("height",pt).style("opacity",0),e.homeContentDom.querySelector("#ringClock").style.opacity=1,e.homeContentDom.querySelector("#ringClock").style.visibility="visible",e.homeContentDom.querySelector("#homeConfig").style.visibility="visible",e.homeContentDom.querySelector("#homeConfig").style.opacity=.3,e.configContentDom.style.visibility="visible",e.configContentDom.style.opacity=.2})).transition("main").delay(300).duration(600).on("start",(()=>{e.homeFrameDom.querySelector("#frameTitleText").style.visibility="visible",e.homeFrameDom.querySelector("#frameTitleText").style.opacity=1,e.homeFrameDom.querySelector("#frameTitleText").classList.add("blink2"),e.homeContentDom.querySelector("#homeConfig").style.opacity=null,e.configContentDom.style.transitionDuration="0.6s",e.configContentDom.style.opacity=1,e.configContentDom.classList.add("enabled"),e.shipFrameDom.style.visibility="hidden",e.shipFrameDom.style.opacity=0,e.shipContentDom.style.opacity=0,e.shipContentDom.style.visibility="hidden",$r("LD Main screen loaded","timePrefix")})).on("end",(()=>{e.homeFrameDom.querySelector("#frameTitleText").classList.remove("blink2"),e.configContentDom.style.transitionDuration=null,ct("home"),ut(),re(),me(),e.pageStatus="home"})).transition("main").delay(2300).duration(0).on("start",(function(){$r(Pr("home"))})),e.setDocumentCurrentPage("home")}function ft(){const e=si();if("transitioning"==e.pageStatus)return;e.pageStatus="transitioning",d3.select(e.homeFrameDom.querySelector("#topLeftCorner")).interrupt(),e.pageTimers.forEach((e=>{clearTimeout(e)})),e.pageTimers=[],e.jwstStatus&&ot(),e.bufferTimeStatus&&Oe(),dr(),cr(document.querySelector("#msdContainer > svg #shipClock tspan"),null,"noRingClock");const t=e.homeContentDom.querySelector("#ringClock");d3.select(t).interrupt(),t.style.opacity=0,setTimeout((()=>{t.style.visibility="hidden"}),600),$r("Switching to USS Cerritos MAP","timePrefix");const o=e.shipFrameDom.querySelector("#shipMainTopLeftCorner");o.setAttribute("fill",o.dataset.fill),o.setAttribute("d",o.dataset.d);const n=e.shipFrameDom.querySelector("#shipTopBar1a");n.setAttribute("fill",n.dataset.fill),n.setAttribute("x",n.dataset.x),n.setAttribute("width",n.dataset.width),e.shipFrameDom.querySelector("#shipTitle").style.opacity=0,e.shipFrameDom.querySelector("#shipTopBar1b").style.opacity=null;const r=e.shipFrameDom.querySelector("#shipTopBar1c");r.setAttribute("fill",r.dataset.fill),r.style.opacity=null;const i=e.shipFrameDom.querySelector("#shipFrame1a");i.setAttribute("x",i.dataset.x),i.setAttribute("y",i.dataset.y),i.setAttribute("width",i.dataset.width),i.setAttribute("height",i.dataset.height),i.style=null;const s=e.shipFrameDom.querySelector("#shipFrame1b");s.setAttribute("y",s.dataset.y),s.setAttribute("height",s.dataset.height),s.style=null,e.shipFrameDom.querySelector("#shipFrame1c").style=null,e.shipFrameDom.querySelector("#subTitleBar").style.opacity=null,e.shipFrameDom.querySelector("#subTitle").style.opacity=null,e.shipFrameDom.querySelector("#shipFrame1d").style.opacity=null,e.shipFrameDom.querySelector("#shipClock").style.opacity=null,e.shipFrameDom.querySelector("#shipFrame1e").style.opacity=null,e.shipFrameDom.querySelector("#shipMsdBtns").style.opacity=0,e.homeFrameDom.querySelectorAll('[id^="tmpFrameHome1"]').forEach((e=>{e.style.visibility="hidden",e.style.opacity=0,e.setAttribute("x",e.dataset.x),e.setAttribute("y",e.dataset.y),e.setAttribute("width",e.dataset.width),e.setAttribute("height",e.dataset.height)}));const a=e.shipFrameDom.querySelector("#frameShipConfig");a.style.transform=null,a.style.opacity=null,a.classList.remove("configsEnabled"),_r(),dt(),e.homeFrameDom.querySelector("#frameTitleText").style.opacity=.4,Q("beepX2Downer",0,0,0,.8),d3.select(e.homeFrameDom.querySelector("#topLeftCorner")).transition("main").delay(600).duration(300).on("start",(()=>{e.homeContentDom.querySelector("#homeConfig").style.visibility="hidden",e.homeContentDom.querySelector("#homeWindow").style.visibility="hidden",e.configContentDom.style.visibility="hidden",e.configContentDom.style.opacity=0,e.configContentDom.classList.remove("enabled"),e.configContentDom.setAttribute("transform",e.configContentDom.dataset.shipTransform),Q("shortRandomBeep",0,0,0,.3)})).on("end",(()=>{e.homeContentDom.querySelector("#homeClock").style.visibility="hidden"})).transition("main").delay(150).duration(400).on("start",(()=>{e.homeContentDom.querySelector("#homeDate").style.visibility="hidden"})).on("end",(()=>{e.homeFrameDom.querySelectorAll('[id^="tmpFrameHome1"]').forEach((e=>{e.style.opacity=null,e.style.visibility="visible"})),e.homeFrameDom.querySelectorAll('[id^="homeBtn"]').forEach((e=>{e.style.opacity=0}))})).transition("main").delay(150).duration(400).on("start",(function(){this.setAttribute("fill",e.shipFrameDom.querySelector("#shipMainTopLeftCorner").dataset.fill),e.homeFrameDom.querySelector("#homeTopBar").setAttribute("fill",e.shipFrameDom.querySelector("#shipTopBar1a").dataset.fill),e.homeFrameDom.querySelector("#topRightBlock").setAttribute("fill",e.shipFrameDom.querySelector("#shipTopBar1c").dataset.fill),$r("loading MSD / Master System Display","timePrefix"),Q("affirmative",0,0,0,.3)})).transition("main").delay(200).duration(550).on("start",(function(){const t=d3.transition().duration(500).ease(d3.easeCubicOut);d3.select(this).transition(t).attr("d",e.shipFrameDom.querySelector("#shipMainTopLeftCorner").getAttribute("d"));const o=e.shipFrameDom.querySelector("#shipFrame1a").getBBox();d3.select(e.homeFrameDom.querySelector("#tmpFrameHome1a")).transition(t).attr("x",o.x).attr("y",o.y).attr("width",o.width).attr("height",o.height);const n=e.shipFrameDom.querySelector("#shipFrame1b").getBBox();d3.select(e.homeFrameDom.querySelector("#tmpFrameHome1b")).transition(t).attr("x",n.x).attr("y",n.y).attr("width",n.width).attr("height",n.height);const r=e.shipFrameDom.querySelector("#shipFrame1c").getBBox();d3.select(e.homeFrameDom.querySelector("#tmpFrameHome1c")).transition(t).attr("x",r.x).attr("y",r.y).attr("width",n.width).attr("height",n.width);const i=e.shipFrameDom.querySelector("#shipTopBar1a").getBBox(),s=e.shipFrameDom.querySelector("#shipTopBar1b").getBBox(),a=e.homeFrameDom.querySelector("#homeTopBar");a.style.transition="none",d3.select(a).transition(t).attr("x",i.x).attr("width",s.x+s.width-i.x),e.homeFrameDom.querySelector("#frameTitleText").style.visibility="hidden",e.homeFrameDom.querySelector("#topRightBlock").style.opacity=0,Q("warningHigh",0,0,0,.2)})).on("end",(()=>{e.logDisplayDom.style.opacity=0})).transition("main").delay(200).duration(400).on("start",(()=>{e.logDisplayDom.style.visibility="hidden",e.logPlaceholderDom=e.shipFrameDom.querySelector("#logsConfig_placeholder"),e.setPageState("ship"),e.homeContentDom.style.opacity=0,e.homeContentDom.style.visibility="hidden",e.homeFrameDom.style.opacity=0,e.homeFrameDom.style.visibility="hidden",e.shipFrameDom.querySelector("#frameShipMain").style.opacity=1,e.shipFrameDom.querySelector("#frameShipConfig").style.opacity=0,e.shipFrameDom.querySelector("#frameShipSub").style.opacity=0,e.shipFrameDom.querySelector("#frameShipSub").style.transform="translate(-100px, 0)",e.shipContentDom.style.opacity=0,e.shipContentDom.style.visibility="visible",e.shipFrameDom.style.opacity=1,e.shipFrameDom.style.visibility="visible",e.shipFrameDom.querySelector("#subTitle").classList.add("blink2"),setTimeout((()=>{e.shipFrameDom.querySelector("#subTitle").classList.remove("blink2")}),800),Q("beepX3Down",0,0,0,.3)})).on("end",(()=>{e.shipFrameDom.querySelector("#frameShipSub").style.transition="opacity 1s ease-in, transform 0.8s ease-out",e.shipFrameDom.querySelector("#frameShipSub").style.opacity=1,e.shipFrameDom.querySelector("#frameShipSub").style.transform=null,e.shipFrameDom.querySelector("#shipTitle").style.opacity=null,e.shipFrameDom.querySelector("#shipTitle").classList.add("blink1"),Fr(),e.shipFrameDom.querySelector("#frameShipConfig").style.opacity=1,e.logDisplayDom.style.opacity=1,e.logDisplayDom.style.visibility="visible",e.logDisplayDom.style.opacity=1,$r("USS Cerritos MSD loading complete","timePrefix"),Q("exitTask",.2,0,0,.4)})).transition("main").delay(600).duration(1e3).on("start",(()=>{Q("powerUp",0,.35,0,.5,p([1.3,1.4,.85])),e.shipContentDom.style.opacity=1,e.shipFrameDom.querySelector("#shipTitle").classList.remove("blink1"),ue(),ct("ship"),ut()})).on("end",(()=>{e.shipFrameDom.querySelector("#shipMsdBtns").style.opacity=1,Q("shortRandomBeep",0,0,0,.3),Q("beepX2Up",.4,0,0,.1),Q("beepX3Downer",.8,0,0,.2),e.homeFrameDom.querySelectorAll('[id^="tmpFrameHome1"]').forEach((e=>{e.style.visibility="hidden"})),e.homeContentDom.style.visibility="hidden",e.homeFrameDom.style.visibility="hidden",document.documentElement.dataset.tinyShips="",qe(),e.pageStatus="ship"})).transition("main").delay(2300).duration(0).on("start",(function(){$r(Pr("map"))})),e.setDocumentCurrentPage("ship")}function bt(){const e=si();e.setPageState("remote"),e.setDocumentCurrentPage("remote"),e.pageStatus="remote"}const St=[];let Ct,At,vt,Dt,Tt,Et,wt,xt,kt,Lt,It,Bt,qt,Rt,Ft,Mt,Nt,jt,$t,Pt,Ot,Ut,Ht,_t,Xt,Gt,Vt,Wt,Yt,zt,Zt,Jt,Kt,Qt,eo,to,oo,no,ro,io,so,ao,lo,co,uo,mo,yo,po,ho,go,fo,bo,So,Co,Ao,vo,Do,To,Eo,wo,xo,ko,Lo,Io,Bo,qo,Ro,Fo,Mo,No,jo,$o,Po,Oo,Uo,Ho,_o,Xo,Go,Vo,Wo,Yo,zo=0,Zo=0,Jo=0,Ko=0,Qo="",en=!1,tn=!1;const on={ecg:null,eeg:null,etc:null},nn={ecg:null,eeg:null,etc:null},rn={ecg:!1,eeg:!1,etc:!1},sn={ecg:!0,eeg:!0,etc:!0},an={};let ln=0,cn=0,dn=0,un=!0;function mn(e=null){let t;t=!0===e||!1!==e&&!("sickbay"in document.documentElement.dataset),t?fn():yn()}function yn(){bn(),$r("Exited from Sickbay","timePrefix")}function pn(){bn(),fn()}function hn(){const e=si();Wo=e.homeFrameDom.querySelector("#frameTitleText"),Yo=Wo.querySelector("tspan"),$o=e.sickbayContentDom.querySelector("#patient"),$o.dataset.fill=$o.getAttribute("fill"),Po=e.sickbayContentDom.querySelector("#ptScan"),Po.dataset.opacity=Po.getAttribute("opacity"),Po.style.transition="all 0.4s",Oo=Po.querySelectorAll('[id^="ptScan"]'),Xo=e.sickbayContentDom.querySelector("#ptBodyTarget");const t=e.sickbayContentDom.querySelector("#caduceus"),o=t.getBBox();t.style.setProperty("--cx",`${o.x+.5*o.width}px`),t.style.setProperty("--cy",`${o.y+.5*o.height}px`);const n=e.svg1.querySelector("defs"),r=document.createElementNS("http://www.w3.org/2000/svg","clipPath");r.setAttribute("id","patientClipPathDef"),n.appendChild(r),r.appendChild(e.sickbayContentDom.querySelector("#patientClipPath")),$o.setAttribute("clip-path","url(#patientClipPathDef)"),e.sickbayContentDom.querySelectorAll('[id^="quantumLine"').forEach((e=>{e.setAttribute("clip-path","url(#patientClipPathDef)")})),e.sickbayContentDom.querySelectorAll('[id^="patientClipPath_"]').forEach((e=>{r.appendChild(e)}));const i=e.sickbayContentDom.querySelector("#ecg0"),s=e.sickbayContentDom.querySelector("#ecg1");let a=i.getBBox(),l=a.x,c=a.y+.5*a.height;n.style.setProperty("--defaultSickbayGraphTranslatePlus",`translate(${l}px, ${c}px)`),n.style.setProperty("--defaultSickbayGraphTranslateMinus",`translate(${-1*l}px, ${-1*c}px)`);const d=document.createElementNS("http://www.w3.org/2000/svg","clipPath");d.setAttribute("id","ecg0ClipPathDef"),n.appendChild(d),d.appendChild(i),e.sickbayContentDom.querySelector("#ecg0gradientBox").setAttribute("clip-path","url(#ecg0ClipPathDef)"),e.sickbayContentDom.querySelector("#ecg0gradientBox").setAttribute("fill","url(#gradientAni_ecg0)");const m=document.createElementNS("http://www.w3.org/2000/svg","clipPath");m.setAttribute("id","ecg1ClipPathDef"),n.appendChild(m),m.appendChild(s),e.sickbayContentDom.querySelector("#ecg1gradientBox").setAttribute("clip-path","url(#ecg1ClipPathDef)"),e.sickbayContentDom.querySelector("#ecg1gradientBox").setAttribute("fill","url(#gradientAni_ecg1)"),e.svg1.querySelector("#gradientAni_ecg0").dataset.type="ecg";const y=e.sickbayContentDom.querySelector("#eeg0"),p=e.sickbayContentDom.querySelector("#eeg1"),h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");h.setAttribute("id","eeg0ClipPathDef"),n.appendChild(h),h.appendChild(y),e.sickbayContentDom.querySelector("#eeg0gradientBox").setAttribute("clip-path","url(#eeg0ClipPathDef)"),e.sickbayContentDom.querySelector("#eeg0gradientBox").setAttribute("fill","url(#gradientAni_eeg0)");const g=document.createElementNS("http://www.w3.org/2000/svg","clipPath");g.setAttribute("id","eeg1ClipPathDef"),n.appendChild(g),g.appendChild(p),e.sickbayContentDom.querySelector("#eeg1gradientBox").setAttribute("clip-path","url(#eeg1ClipPathDef)"),e.sickbayContentDom.querySelector("#eeg1gradientBox").setAttribute("fill","url(#gradientAni_eeg1)"),e.svg1.querySelector("#gradientAni_eeg0").dataset.type="eeg";const b=e.sickbayContentDom.querySelector("#etc0"),S=e.sickbayContentDom.querySelector("#etc1"),C=document.createElementNS("http://www.w3.org/2000/svg","clipPath");C.setAttribute("id","etc0ClipPathDef"),n.appendChild(C),C.appendChild(b),e.sickbayContentDom.querySelector("#etc0gradientBox").setAttribute("clip-path","url(#etc0ClipPathDef)"),e.sickbayContentDom.querySelector("#etc0gradientBox").setAttribute("fill","url(#gradientAni_etc0)");const A=document.createElementNS("http://www.w3.org/2000/svg","clipPath");A.setAttribute("id","etc1ClipPathDef"),n.appendChild(A),A.appendChild(S),e.sickbayContentDom.querySelector("#etc1gradientBox").setAttribute("clip-path","url(#etc1ClipPathDef)"),e.sickbayContentDom.querySelector("#etc1gradientBox").setAttribute("fill","url(#gradientAni_etc1)"),e.svg1.querySelector("#gradientAni_etc0").dataset.type="etc",c=a.y+a.height,C.style.setProperty("--defaultSickbayGraphTranslatePlus",`translate(${l}px, ${c}px)`),C.style.setProperty("--defaultSickbayGraphTranslateMinus",`translate(${-1*l}px, ${-1*c}px)`),A.style.setProperty("--defaultSickbayGraphTranslatePlus",`translate(${l}px, ${c}px)`),A.style.setProperty("--defaultSickbayGraphTranslateMinus",`translate(${-1*l}px, ${-1*c}px)`),e.sickbayContentDom.querySelectorAll("#eegGradientBox, #ecgGradientBox, #etcGradientBox").forEach((e=>{e.style.opacity=0,e.style.display="none"})),["ecg","eeg","etc"].forEach((t=>{an[t]={},an[t].start=e.sickbayContentDom.querySelector(`#${t}IndicatorStart`),an[t].end=e.sickbayContentDom.querySelector(`#${t}IndicatorEnd`)})),Go=e.svg1.querySelector("#gradientBloodFlow"),Vo=Go.querySelectorAll("animate"),Xo.dataset.currentIndex=0;const v=Xo.querySelector("circle");St.push({name:"Heart",x:Number(v.getAttribute("cx")),y:Number(v.getAttribute("cy"))}),e.sickbayContentDom.querySelectorAll('[id^="ptBodyTargetPreset"').forEach((e=>{const t=f(e.id.split("_")[1]);"Heart"!=t&&St.push({name:t,x:Number(e.getAttribute("x")),y:Number(e.getAttribute("y"))}),e.remove()})),e.sickbayContentDom.querySelectorAll('text[id^="data"]').forEach((e=>{e.setAttribute("text-anchor","middle")})),Tt=e.sickbayContentDom.querySelector("#dataBp1 tspan"),Et=e.sickbayContentDom.querySelector("#dataBp2s tspan"),wt=e.sickbayContentDom.querySelector("#dataBp2d tspan"),xt=e.sickbayContentDom.querySelector("#dataBp3s tspan"),kt=e.sickbayContentDom.querySelector("#dataBp3d tspan"),Lt=e.sickbayContentDom.querySelector("#dataBarHeart tspan"),Nt=e.sickbayContentDom.querySelector("#dataBarResp tspan"),Xt=e.sickbayContentDom.querySelector("#dataBarNeuro tspan"),Zt=e.sickbayContentDom.querySelector("#btnCoreTemp"),oo=e.sickbayContentDom.querySelector("#btnGlucose"),lo=e.sickbayContentDom.querySelector("#btnAbg"),ho=e.sickbayContentDom.querySelector("#btnO2Sat"),Ao=e.sickbayContentDom.querySelector("#btnTroponin"),ko=e.sickbayContentDom.querySelector("#btnBnp"),Jt=e.sickbayContentDom.querySelector("#dataCoreTemp tspan"),no=e.sickbayContentDom.querySelector("#dataGlucose tspan"),co=e.sickbayContentDom.querySelector("#dataAbg tspan"),go=e.sickbayContentDom.querySelector("#dataO2Sat tspan"),vo=e.sickbayContentDom.querySelector("#dataTroponin tspan"),Lo=e.sickbayContentDom.querySelector("#dataBnp tspan"),Jt.style.animationDuration=u(1.5,5).toFixed(1)+"s",no.style.animationDuration=u(1.5,5).toFixed(1)+"s",co.style.animationDuration=u(1.5,5).toFixed(1)+"s",go.style.animationDuration=u(1.5,5).toFixed(1)+"s",vo.style.animationDuration=u(1.5,5).toFixed(1)+"s",Lo.style.animationDuration=u(1.5,5).toFixed(1)+"s",Uo=e.sickbayContentDom.querySelector("#nervousSystem"),Ho=e.sickbayContentDom.querySelector("#circulatorySystem"),_o=e.sickbayContentDom.querySelector("#circulatorySystemVulcan"),Uo.style.display="none",Ho.style.display="none",_o.style.display="none",Ho.setAttribute("fill","url(#gradientBloodFlow_outward)"),_o.setAttribute("fill","url(#gradientBloodFlow_outward)"),Mo=e.sickbayContentDom.querySelector("#vsBarHeart"),No=e.sickbayContentDom.querySelector("#vsBarResp"),jo=e.sickbayContentDom.querySelector("#vsBarNeuro"),gn(Mo,"bottom"),gn(No,"bottom"),gn(jo,"bottom"),e.sickbayContentDom.onpointerdown=function(e){switch(e.target.getAttribute("id")){case"hitarea_btnECG":Bn("ecg");break;case"hitarea_btnEEG":Bn("eeg");break;case"hitarea_btnETC":Bn("etc");break;case"hitarea_btnNeuroScan":An();break;case"hitarea_btnCircScan":vn();break;case"hitarea_btnSickbayYtEnd":mt();break;case"hitarea_btnQuantumSignature":wn();break;case"hitarea_btnQuarantine":xn();break;case"hitarea_btnRnaAnalysis":kn();break;case"hitarea_btnAudioSickbay":Y(),Qr(e.target,"blink2");break;case"hitarea_sickbay":pn();break;case"hitarea_exitSickbay":yn()}},$o.onpointerdown=function(){Ln()},e.sickbayContentDom.querySelector('#sickbayFrame1 [id$="colorOverride"]').onpointerdown=function(){un=!un,un?(document.documentElement.dataset.colorSickbay="",$r("Sickbay with [aqua color scheme] is enabled from now on")):(delete document.documentElement.dataset.colorSickbay,$r("[aqua color scheme] has been disabled for Sickbay from now on")),Q("beepX1Down",0,0,0,.15)}}function gn(e,t="center"){let o,n,r=e.getBBox();"bottom"===t?(o=r.x+.5*r.width,n=r.y+r.height):(o=r.x+.5*r.width,n=r.y+.5*r.height),e.style.setProperty("--defaultTranslatePlus",`translate(${o}px, ${n}px)`),e.style.setProperty("--defaultTranslateMinus",`translate(${-1*o}px, ${-1*n}px)`)}function fn(){const e=si();document.documentElement.dataset.sickbay="",un&&(document.documentElement.dataset.colorSickbay=""),e.sickbayStatus=!0,e.jwstStatus&&ot();const t=e.sickbayContentDom.querySelectorAll('#sickbayFrame1 [id^="sickbayFrame1"]');t.forEach((e=>{e.classList.add("sickbayElementInit"),e.classList.remove("animationFadeIn")}));const o=e.sickbayContentDom.querySelector("#ptInfo");o.classList.add("sickbayElementInit"),o.classList.remove("animationFadeIn"),$o.classList.add("sickbayElementInit"),$o.classList.remove("animationFadeIn2"),Oo.forEach((e=>{e.classList.add("sickbayElementInit"),e.classList.remove("animationFadeIn")}));const n=e.sickbayContentDom.querySelector("#btnNeuroScan");n.classList.add("sickbayElementInit"),n.classList.remove("animationFadeIn");const r=e.sickbayContentDom.querySelector("#btnCircScan");r.classList.add("sickbayElementInit"),r.classList.remove("animationFadeIn");const i=e.sickbayContentDom.querySelector("#bpFrame");i.classList.add("sickbayElementInit"),i.classList.remove("animationFadeIn"),i.style.transform="translate(-200px,0)",i.style.transition="transform 0.8s ease-out";const s=e.sickbayContentDom.querySelector("#medicalMonitor");s.classList.add("sickbayElementInit"),s.classList.remove("animationFadeIn");const a=e.sickbayContentDom.querySelector("#medicalData");a.classList.add("sickbayElementInit"),a.classList.remove("animationFadeIn2");const l=e.sickbayContentDom.querySelector("#miscFrame");l.classList.add("sickbayElementInit"),l.classList.remove("animationFadeIn");const g=e.sickbayContentDom.querySelector("#vitalBars");g.style.opacity=.3,Uo.style.display="none",Ho.style.display="none",_o.style.display="none",Zt.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),oo.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),lo.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),ho.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),Ao.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),ko.style.setProperty("--alertColor",`hsl(0 ${c(65,100)}% ${c(30,70)}%)`),Ln("noLog"),pe(),function(){const e=si();let t=c(1,10);t==dn&&(t=(dn+3)%10+1);dn=t;const o=Math.random();Qo="HUMAN",o<.23?Qo=p(["BAJORAN","HM•BAJORAN","TRILL","ORION","BOLIAN","RIGELIAN"]):o<.88&&(Qo=p(["Vulcan","HM•Vulcan","RM•Vulcan","Andorian","Ferengi","HM•Klingon","Klingon","Cardassian","Caitian","Tamarian"]));e.svg1.querySelectorAll('defs [id^="patientClipPath_"]').forEach((e=>{e.style.display=Qo.toLowerCase().includes(e.id.toLowerCase().split("_")[1])?null:"none"})),e.sickbayContentDom.querySelector("#ptId tspan").textContent=h(c(1,99),2)+"."+h(c(47,9999),4)+" / "+Qo.toUpperCase();const n=Math.random()<.5?p([p(["HEART ATTACK","HEART FLUTTER","ARTERIAL RUPTURE","BIOTEMPORAL FLUX","REVERSE AGING","NEUROLYTIC PATHOGEN","NAOPROBE VIRUS"]),`${p(["CELLULAR","DNA","RNA","SOMATIC"])} ${p(["ANOMALY","MUTATION","COLLAPSE"])}`,p(["HEAT EXHAUSTION","HEAT STROKE","HYPOTHERMIA","COMA","RADIATION EXPOSRUE","HAIR LOSS","HOT FLASH","TEMPORAL NARCOSIS","BENDII SYNDROME",`${p(["PLASMA","PHASER"])} BURN, ${c(1,3)}°`]),`${p(["CARDIOGENIC","HYPOVOLEMIC","ANAPHYLACTIC","SEPTIC","NEUROGENIC","VAHAR'AI","CYTOTOXIC"])} SHOCK`]):function(){const e=p(["L.","R."]);return p([p(["ALIEN WORM INFECTION","MORPHOGENIC VIRUS","PHAGE","ANDORIAN SHINGLES","NIGHT TERROR"]),p(["RESPIRATORY DISTRESS","ANAPHYLAXIS","HYPOTHERMIA","COMA","INTERNAL BLEEDING","AMNESIA","PA'NAR SYNDROME","IRUMODIC SYNDROME","URODELAN FLU","SONIC BURP"]),`${e} ${p(["PNEUMOTHORAX","HEMOTHORAX","HEMONEUMOTORAX","HEART FAILURE"])}`,`${e} ${p(["HUMERUS FRACTURE","ULNA FRACTURE","FEMUR FRACTURE","TIB-FIB FRACTURE","MANDIBULAR FX","PELVIC FRACTURE"])}`])}();e.sickbayContentDom.querySelector("#ptPriorityDx tspan").textContent=`${c(1,5)}• ${n}`,e.sickbayContentDom.querySelector("#ptAge tspan").textContent=c(21,69)+" Y • "+c(0,11)+" M • "+c(0,29)+" D"+(Math.random()<.67?"":p([" / AUG"," / DUP"," / XB"," / GEN"," / SP"," / ENH"," / MIR"," / MU"," / CHR"]));const r=.1*c(550,970),i=.1*c(1550,2020),s=r/Math.pow(.01*i,2);e.sickbayContentDom.querySelector("#ptBodyIndex tspan").textContent=`${r.toFixed(1)} KG • ${i.toFixed(1)} CM • ${s.toFixed(1)} BMI`,e.sickbayContentDom.querySelector("#ptNeuroDnaTag tspan").textContent=p(["A","B","C","D","E","F","G"])+p(["W","X","Z","Q","R","H"])+y(1)+" / "+y(4)+"•"+y(4)+"•"+y(4)+"•"+y(4),e.sickbayContentDom.querySelector("#medicalInsurance tspan").textContent=`MEDICAL.${c(120,980)} • TRAUMA.${c(120,980)}`}(),function(){Ct=c(94,152),At=c(Ct-46,Ct-24),vt=c(4,16),Dt=0,Mt=Math.random()>.4,Rt=u(84,Mt?100:170),qt=Mt?u(45,72):u(Rt-40,Rt-20),It=u(qt+4,Rt-4),Ft=Mt?.1*c(6,10):.1*c(2,10),Bt=0,Dn(),_t=Math.random()>.25,_t?(Ot=20,Pt=10):Math.random()<.5?(Ot=39,Pt=20):(Ot=13,Pt=4);jt=u(Pt+1,Ot-1),_t?(Ut=.1*c(0,2),Ht=.1*c(8,10)):(Ut=.1*c(1,4),Ht=.1*c(6,10));$t=0,Tn(),Wt=301,Vt=47,Gt=c(Vt,Wt),zt=u(.3,1),Yt=Math.random()<.67?u(0,zt):u(zt-.3,zt-.1),En(),to=u(35,40),eo=to-u(1.6,3),Kt=u(eo+1,to-1),Qt=0,Math.random()<.67?(ao=123,so=78):(ao=u(100,220),so=ao-50);ro=u(so,ao),io=0,po=u(7.43,7.6),yo=u(7.2,7.37),uo=u(yo+.02,po-.02),mo=0,Co=Math.random()<.42?100:u(90,100),So=Co-4,fo=u(So+2,Co-1),bo=0,xo=Math.random()<.25,wo=xo?u(3,9.8):u(.015,.039),Eo=xo?u(.3,.6*wo):0,Do=u(Eo,wo),To=0,Fo=Math.random()<.25,Ro=Fo?u(700,900):u(60,125),qo=Fo?u(450,550):u(6,30),Io=u(qo,Ro),Bo=0}(),cn=performance.now(),Ko=setInterval((()=>{ln=0,function(){const e=Ct+Dt,t=At+Dt;Et.textContent=e,wt.textContent=t,xt.textContent=e-c(8,14),kt.textContent=t-c(8,14),Tt.textContent=`${e-c(15,23)} / ${t-c(15,23)}`,Dt+=c(-3,3),Math.abs(Dt)>vt&&(Dt=vt*Math.sign(Dt));Kt=d(Kt+Qt,eo,to),setTimeout((()=>{Jt.textContent=Kt.toFixed(1);Zt.classList.toggle("alert",Kt<=36||Kt>=38)&&ln++}),107*m(10)),Qt=u(-.067,.067),ro=d(ro+io,so,ao),setTimeout((()=>{no.textContent=ro<100?ro.toFixed(1):ro.toFixed(0);oo.classList.toggle("alert",ro<70||ro>=120)&&ln++}),107*m(10)),io=Math.random()<.5?u(-.6,.6):u(-1.3,1.3),uo=d(uo+mo,yo,po),setTimeout((()=>{co.textContent=uo.toFixed(2);lo.classList.toggle("alert",uo<7.354||uo>=7.455)&&ln++}),107*m(10)),mo=u(-.006,.006),fo=d(fo+bo,So,Co),setTimeout((()=>{go.textContent=100==fo?fo.toFixed(0):fo.toFixed(1);ho.classList.toggle("alert",fo<95)&&ln++}),107*m(10)),bo=Math.random()<.5?u(-.3,.3):u(-.6,.6),Do=d(Do+To,Eo,wo),setTimeout((()=>{vo.textContent=Do.toFixed(2);Ao.classList.toggle("alert",Do>=.4)&&ln++}),107*m(10)),To=xo?u(-.17,.17):u(-.005,.005),Io=d(Io+Bo,qo,Ro),setTimeout((()=>{Lo.textContent=Io<10?Io.toFixed(2):Io<100?Io.toFixed(1):Io.toFixed(0);ko.classList.toggle("alert",Io>450)&&ln++}),107*m(10)),Bo=Fo?u(-5,5):u(-2,2)}(),function(){It=d(It+Bt,qt,Rt),Math.random()<.3&&(Ft=Mt?.1*c(6,10):.1*c(2,10));setTimeout((()=>{const e=It<60||It>=120;e&&ln++,Dn(e)}),247*m(8)),Bt=It>100?c(-6,6):c(-3,3),jt=d(jt+$t,Pt,Ot),Math.random()<.2&&(Ut=_t?.1*c(0,2):.1*c(1,4));Math.random()<.2&&(Ht=_t?.1*c(8,10):.1*c(6,10));if(setTimeout((()=>{const e=jt<10||jt>24;e&&ln++,Tn(e)}),247*m(8)),$t=_t?u(-1,1):u(-2.5,2.5),Math.random()<.67){Gt=c(Vt,Wt);const e=Gt<60;e&&ln++,zt=u(.3,1),Yt=Math.random()<.67&&Gt>150?u(0,zt):u(zt-.3,zt-.1),setTimeout((()=>{En(e)}),247*m(8))}else{Gt<60&&ln++}}(),.001*(performance.now()-cn)>17&&setTimeout((()=>{ln>=4&&($r(`warning: ${ln} abnormal med data points detected`,"timePrefix"),cn=performance.now())}),2e3)}),2500),Sn(),clearTimeout(zo),e.logDisplayDom.style.visibility="hidden",e.logDisplayDom.style.opacity=0,e.logPlaceholderDom=e.sickbayContentDom.querySelector("#log_placeholderSickbay"),Fr(),zo=setTimeout((()=>{e.logDisplayDom.style.visibility=null,e.logDisplayDom.style.opacity=1}),600),Wo.style.opacity=0,dt();const f=e.sickbayContentDom.querySelector("#caduceus");f.classList.add("largeEmblem"),d3.select(e.svg1.querySelector("#homeClock")).transition().delay(350).duration(600).attr("transform","translate(675 1855) scale(1) translate(-675 -1815)"),$r(`accessing Sickbay • Biobed ${dn} info`,"timePrefix"),d3.select("#msdContainer svg #sickbayFrame1").transition().delay(300).duration(500).on("start",(function(){t.forEach((e=>{const t=parseInt(e.id.split("_")[1]);e.classList.remove("sickbayElementInit"),e.classList.add("animationFadeIn"),e.style.animationDelay=150*t+"ms"}))})).on("end",(function(){f.style.opacity=0,f.style.transition="opacity .4s",Yo.textContent=`SICKBAY • BIOBED ${dn}`,Wo.style.opacity=1,Q("shortRandomBeep",0,0,0,.2),o.classList.remove("sickbayElementInit"),o.classList.add("animationFadeIn")})).transition().delay(400).duration(0).on("start",(function(){f.style.opacity=null,f.style.transition=null,f.classList.remove("largeEmblem"),Q("warningHigh",0,0,0,.3);const t=e.homeFrameDom.querySelector("#homeTopBar"),o=Yo.getBBox().x-Number(t.dataset.x)-20;d3.select(t).transition().duration(400).attr("width",o.toFixed(2))})).transition().delay(400).duration(200).on("start",(function(){$o.classList.remove("sickbayElementInit"),$o.classList.add("animationFadeIn2")})).on("end",(function(){Qr($o,"blink2"),Po.setAttribute("opacity",1),Q("powerUp",0,.35,0,.5,p([1.3,1.4,.85])),Cn(),n.classList.remove("sickbayElementInit"),n.classList.add("animationFadeIn"),n.style.animationDelay="700ms",r.classList.remove("sickbayElementInit"),r.classList.add("animationFadeIn"),r.style.animationDelay="700ms"})).transition().delay(800).duration(600).on("start",(function(){Po.setAttribute("opacity",Po.dataset.opacity),i.classList.remove("sickbayElementInit"),i.classList.add("animationFadeIn"),i.style.animationDuration="1.2s",i.style.transform=null})).on("end",(function(){Q("beepX3Downer",0,0,0,.3),l.classList.remove("sickbayElementInit"),l.classList.add("animationFadeIn"),Xo.classList.add("blink2"),Math.random()<.25&&xn(!0,null,"mute"),Math.random()<.25&&kn(!0,null,"mute")})).transition().delay(900).duration(300).on("start",(function(){ct("sickbay"),ut(),Q("beepX2Upper",0,0,0,.6),s.classList.remove("sickbayElementInit"),s.classList.add("animationFadeIn"),qn("mute")})).on("end",(function(){Q("exitTask",0,0,0,.3),a.classList.remove("sickbayElementInit"),a.classList.add("animationFadeIn2"),g.style.opacity=1;const e=Math.random();e<.33?vn(!0,"noLog"):e<.67&&An(!0,"noLog")})).transition().delay(1e3).duration(3100).on("start",(function(){$r(`${Yo.textContent} medical diagnostic interface is ready`)})).on("end",(function(){$r(Pr("sickbay"))}))}function bn(){const e=si();delete document.documentElement.dataset.sickbay,delete document.documentElement.dataset.colorSickbay,e.sickbayStatus=!1,d3.select("#msdContainer svg #sickbayFrame1").interrupt(),ye(),An(!1,"noLog","mute"),vn(!1,"noLog","mute"),clearTimeout(Zo),clearTimeout(Jo),$o.setAttribute("fill",$o.dataset.fill),clearInterval(Ko),d3.select(e.svg1.querySelector("#homeClock")).transition().delay(300).duration(500).attr("transform","translate(0 0) scale(1)"),wn(!1,"noLog","mute"),kn(!1,"noLog","mute"),xn(!1,"noLog","mute"),Bn("ecg",!1,"noLog","mute"),Bn("eeg",!1,"noLog","mute"),Bn("etc",!1,"noLog","mute"),Xo.removeAttribute("class"),ct("home"),ut();const t=e.homeFrameDom.querySelector("#homeTopBar");Wo.style.opacity=0,d3.select(t).transition().duration(400).attr("width",t.dataset.width).on("end",(function(){Yo.textContent=Yo.dataset.text})).transition().delay(400).duration(0).on("start",(function(){Wo.style.opacity=1})),clearTimeout(zo),e.logPlaceholderDom=e.homeContentDom.querySelector("#log_placeholder"),Fr(),e.logDisplayDom.style.visibility=null,e.logDisplayDom.style.opacity=1;const o=e.sickbayContentDom.querySelector("#caduceus");o.style.opacity=null,o.style.transition=null,o.classList.remove("largeEmblem"),Q("beepX2Downer",0,0,0,.2)}function Sn(){Zo=setTimeout((()=>{!function(e=null){Math.random()<.67&&(Po.setAttribute("opacity",1),Cn(),Xo.classList.remove("blink2"),setTimeout((()=>{Po.setAttribute("opacity",Po.dataset.opacity),Ln(),Xo.classList.add("blink2")}),900));en||tn||(clearTimeout(Jo),$o.setAttribute("fill",`url(#gradient${c(0,3)}_${p(["topToBottom","bottomToTop"])})`),$o.classList.remove("animationFadeIn2"),Jo=setTimeout((()=>{$o.setAttribute("fill",$o.dataset.fill),$o.classList.add("animationFadeIn2")}),3e3));if("mute"===e)return;Math.random()<.4?Q("shortRandomBeep",0,0,0,.15):Q(`beepX${c(1,3)}${p(["Up","Upper"])}`,0,0,0,.25)}(),Sn()}),c(8e3,15e3))}function Cn(){Oo.forEach((e=>{e.classList.remove("animationFadeIn")})),setTimeout((()=>{const e=m(5);Oo.forEach((t=>{const o=parseInt(t.getAttribute("id").slice(-1));t.classList.remove("sickbayElementInit"),t.classList.add("animationFadeIn");let n=0;switch(e){case 1:n=80*o;break;case 2:n=80*(Oo.length-o-1);break;case 3:n=120*Math.abs(o-Math.round(.5*Oo.length)+1);break;case 4:n=120*(Math.floor(.5*Oo.length)-Math.abs(o-Math.round(.5*Oo.length)+1));break;default:o==Oo.length-1?n=250:o>0&&(n=500)}t.style.animationDelay=n+"ms"}))}),0)}function An(e=null,t=null,o=null){if(en===e)return;const n=si();let r;r=!0===e||!1!==e&&!en,en=r,r?(Uo.setAttribute("fill",`url(#gradient${c(1,3)}_${p(["topToBottom","bottomToTop"])})`),Uo.style.display=null,vn(!1),"mute"!==o&&Q(p(["beepX3Upper","affirmative"]),0,0,0,.4),"noLog"!==t&&$r("Nervous System visualization enabled")):(Uo.style.display="none","mute"!==o&&Q("beepX2Downer",0,0,0,.3)),n.sickbayContentDom.classList.toggle("neuroScan",r)}function vn(e=null,t=null,o=null){if(tn===e)return;const n=si();let r;r=!0===e||!1!==e&&!tn,tn=r,r?(Qo.toLowerCase().includes("vulcan")?(_o.style.display=null,Go.setAttribute("cx","43%"),Go.setAttribute("cy","31%")):(Ho.style.display=null,Go.setAttribute("cx","55%"),Go.setAttribute("cy","25%")),An(!1),"mute"!==o&&Q(p(["beepX3Upper","affirmative"]),0,0,0,.4),"noLog"!==t&&$r("Arterial Circulatory System visualization enabled")):(Ho.style.display="none",_o.style.display="none","mute"!==o&&Q("beepX1Downer",0,0,0,.3)),n.sickbayContentDom.classList.toggle("circScan",r)}function Dn(e=!1){const t=si();Lt.textContent=Math.round(It),Lt.classList.toggle("alert",e),t.sickbayContentDom.style.setProperty("--heartRateRounded",5*Math.floor(It/5)),Mo.style.setProperty("--strengthMax",Ft),Vo.forEach((e=>{e.setAttribute("dur",(60/It).toFixed(2)+"s")}))}function Tn(e=!1){const t=si();Nt.textContent=Math.round(jt),Nt.classList.toggle("alert",e),t.sickbayContentDom.style.setProperty("--respRateRounded",3*Math.floor(jt/3)),No.style.setProperty("--strengthMin",Ut),No.style.setProperty("--strengthMax",Ht)}function En(e=!1){const t=si();Xt.textContent=Math.round(Gt),Xt.classList.toggle("alert",e),t.sickbayContentDom.style.setProperty("--neuroRateRounded",10*Math.floor(Gt/10)),jo.style.setProperty("--strengthMin",Yt),jo.style.setProperty("--strengthMax",zt)}function wn(e=null,t=null,o=null){const n=si();let r;r="boolean"==typeof e?n.sickbayContentDom.classList.toggle("quantumSignature",e):n.sickbayContentDom.classList.toggle("quantumSignature"),r?(n.sickbayContentDom.querySelectorAll('[id^="quantumLine"]').forEach((e=>{e.style.animationDuration=`${u(9,21).toFixed(1)}s, ${u(7,17).toFixed(1)}s`,e.style.animationDirection=p(["normal","reverse","alternate","alternate-reverse"])})),"mute"!==o&&Q("longTask",0,0,0,.6),"noLog"!==t&&$r("begin continuous monitoring of quantum signature data")):("mute"!==o&&Q("shortRandomBeep",0,0,0,.3),"noLog"!==t&&$r("quantum signature data monitoring terminated"))}function xn(e=null,t=null,o=null){const n=si();let r;r="boolean"==typeof e?n.sickbayContentDom.classList.toggle("quarantine",e):n.sickbayContentDom.classList.toggle("quarantine"),r?("mute"!==o&&(Q("warningHigh",0,0,0,.5),Q("warningLow",.35,0,0,.4),Q("warningLong",.75,0,0,.6)),"noLog"!==t&&$r("warning: patient quarantined • Biobed force field established")):("mute"!==o&&Q("shortRandomBeep",0,0,0,.3),"noLog"!==t&&$r("quarantine status rescinded"))}function kn(e=null,t=null,o=null){const n=si();let r;r="boolean"==typeof e?n.sickbayContentDom.classList.toggle("rnaAnalysis",e):n.sickbayContentDom.classList.toggle("rnaAnalysis"),r?(n.sickbayContentDom.querySelectorAll('[id^="rnaLineAni"]').forEach((e=>{e.style.animationDuration=`${u(6,12).toFixed(1)}s, ${u(3,10).toFixed(1)}s`,e.style.animationDirection=p(["normal","reverse","alternate","alternate-reverse"])})),"mute"!==o&&(Q("executing",0,0,0,.6),Q("processing",.65,0,0,.4,.8)),"noLog"!==t&&$r(`RNA level ${c(1,5)} Comparative analysis in progress`)):("mute"!==o&&Q("shortRandomBeep",0,0,0,.3),"noLog"!==t&&$r("RNA analysis • paused"))}function Ln(e=null,t=null){let o=m(St.length);o.toString()==Xo.dataset.currentIndex&&(o=(o+4)%St.length),Xo.dataset.currentIndex=o,Xo.style.transform=`translate(${St[o].x}px, ${St[o].y}px) scale(${u(.65,1.4).toFixed(2)}) translate(${-1*St[0].x}px, ${-1*St[0].y}px)`;const n=Xo.querySelector('[id^="outer"]');let r="";Math.random()>.35&&(r=`${c(25,90)} ${c(6,20)} ${c(25,90)} ${c(6,20)}`),n.setAttribute("stroke-dasharray",r),n.setAttribute("stroke",p(["var(--primarySat)","var(--secondaryBright)"])),Xo.style.setProperty("--rndTimingFunction",p(["ease-in-out","ease-out","steps(4)","steps(3)"]));const i=p(["analyzing","scanning","probing","targeting","repairing"]),s=p(["continuous mode","intermittent mode",`level ${c(1,5)}`,`mode ${p(["A","B","C","D","X"])}`]);"noLog"!==e&&$r(`${i} ${St[o].name} / ${s}`,"timePrefix"),"mute"!==t&&(Q("warningLow",0,0,0,.2),Q("notification",.3,0,0,.35))}function In(){let e;switch((en||tn)&&Math.random()<.67?(An(!1),vn(!1),e=c(2,5)):e=m(6),e){case 0:An();break;case 1:vn();break;case 2:wn();break;case 3:kn();break;case 4:xn();break;default:Ln()}}function Bn(e=null,t=null,o=null,n=null){if("eeg"!==e&&"ecg"!==e&&"etc"!==e)return;if(rn[e]===t)return;let r;r=!0===t||!1!==t&&!rn[e],r?(!function(e){const t=si();rn[e]=!0,t.sickbayContentDom.classList.add(e);const o=t.svg1.querySelector(`#gradientAni_${e}0 animate`);o.addEventListener("beginEvent",Fn,!1),o.addEventListener("endEvent",Mn,!1),t.svg1.querySelectorAll(`#gradientAni_${e}0 animate`).forEach((e=>{e.beginElement()})),sn[e]=!0,t.svg1.querySelector(`#gradientAni_${e}1`).style.display="none",clearTimeout(nn[e]);const n=t.sickbayContentDom.querySelector(`#${e}GradientBox`);n.style.opacity=1,n.style.display="block"}(e),"noLog"!==o&&$r("ecg"==e?"displaying ecg / electrocardiogram • q3 sec":"eeg"==e?"displaying eeg / electroencephalogram • q3 sec":"displaying End-Tidal CO2 / capnogram • q6 sec"),"mute"!==n&&Q(`beepX${c(1,3)}${p(["Up","Upper"])}`,0,0,0,.5)):(!function(e){const t=si();rn[e]=!1,t.sickbayContentDom.classList.remove(e),clearTimeout(on[e]),on[e]=null;const o=t.svg1.querySelector(`#gradientAni_${e}0 animate`);o.removeEventListener("beginEvent",Fn,!1),o.removeEventListener("endEvent",Mn,!1);const n="etc"==e?12e3:6e3;t.svg1.querySelectorAll(`#gradientAni_${e}0 animate, #gradientAni_${e}1 animate`).forEach((e=>{e.endElementAt(n)}));const r=t.sickbayContentDom.querySelector(`#${e}GradientBox`);r.style.opacity=0,nn[e]=setTimeout((()=>{r.style.display="none"}),600)}(e),"mute"!==n&&Q(`beepX${c(1,3)}${p(["Down","Downer"])}`,0,0,0,.3))}function qn(e=null){const t=`1${rn.ecg?"1":"0"}${rn.eeg?"1":"0"}${rn.etc?"1":"0"}`,o=parseInt(t,2);let n=8+c(1,6);n==o&&(n++,15==n&&(n=9));const r=n.toString(2).split("");Bn("ecg","1"==r[1],null,e),Bn("eeg","1"==r[2],null,e),Bn("etc","1"==r[3],null,e)}function Rn(e,t){const o=si().svg1.querySelector(`#${t}`);if(o.style.setProperty("--x0",c(-1e3,0)),"ecg"==e){const e=Ft;o.style.setProperty("--scaleY",e.toFixed(2));const t=(170-It)/126*1.5+.5;o.style.setProperty("--scaleX",t.toFixed(2))}else if("eeg"==e){const e=d(1.8*(zt-Yt),.16,1);o.style.setProperty("--scaleY",e.toFixed(2));const t=2-(Gt-Vt)/(Wt-Vt)*1.5;o.style.setProperty("--scaleX",t.toFixed(2))}else{const e=Ht-Ut;o.style.setProperty("--scaleY",e.toFixed(2));const t=(40-jt)/40*2+.5;o.style.setProperty("--scaleX",t.toFixed(2))}Qr(an[e].start,"blink1"),Qr(an[e].end,"blink1"),document.querySelectorAll(`#gradientAni_${t} animate`).forEach((e=>{e.beginElement()}))}function Fn(e){const t=si(),o=e.target.parentNode.dataset.type;if(null!==on[o])return;Rn(o,o+"0");const n="etc"==o?6e3:3e3;clearTimeout(on[o]),on[o]=setTimeout((()=>{sn[o]&&(t.svg1.querySelector(`#gradientAni_${o}1`).style.display=null,sn[o]=!1),Rn(o,o+"1"),on[o]=null}),n)}function Mn(e){e.target.parentNode.querySelectorAll("animate").forEach((e=>{e.beginElement()}))}let Nn=0,jn=null,$n=null,Pn=null,On=null,Un=null,Hn=!1;function _n(e=null){document.documentElement.dataset.autoMode="standby",Ve=()=>{_e=setTimeout(We,3e4)},ze=g((e=>{Ye()}),3e3),Ue=!0,He=!1,Ge.forEach((function(e){document.addEventListener(e,ze,!0)})),document.documentElement.style.setProperty("--idleDuration",28.5),Ye(),Vn("STANDING BY"),null===e&&$r("AUTO MODE ENABLED, waiting for idle","timePrefix")}function Xn(e=null){Ve=()=>{},clearTimeout(Xe),delete document.documentElement.dataset.idle,clearTimeout(_e),He=!1,Ue&&(Ue=!1,Ge.forEach((function(e){document.removeEventListener(e,ze,!0)}))),Hn&&zn(),delete document.documentElement.dataset.autoMode,Vn("DISABLED"),null===e&&$r("AUTO MODE is now disabled","timePrefix")}function Gn(){const e=si();e.autoMode=!e.autoMode,e.autoMode?(_n(),Q("beepX3Upper",0,0,0,.6)):(Xn(),Q("beepX2Downer",0,0,0,.4))}function Vn(e){null==On&&function(){const e=si();On=e.homeFrameDom.querySelector('[id^="autoModeStatus"] tspan'),Un=e.shipFrameDom.querySelector('#frameShipConfig [id^="autoModeStatus"] tspan')}(),On.textContent=e,Un.textContent=e}function Wn(){const e=si();Hn=!0,document.documentElement.dataset.autoMode="active",Vn("ACTIVE"),$r("AUTO MODE: Prolonged Idling DETECTED","timePrefix"),$r("AUTO MODE: UI Automation in progress"),Q("beepX1Up",0,0,0,.25),jn=e.currentColorScheme,$n=kr(),Pn=Ir(),Nn=setTimeout((()=>{Yn()}),1700)}function Yn(){"visible"==document.visibilityState&&function(){const e=si();if(e.userSessionSettings.autoModeRedAlert&&e.redAlertStatus&&Math.random()<.85)return void Gr(null,"NotUpdatingServer");e.userSessionSettings.autoModeBufferTime&&e.bufferTimeStatus&&Math.random()<.8&&Oe();if(!e.sickbayStatus&&Math.random()<.1)return void("home"==e.pageStatus?ft():"ship"==e.pageStatus&&gt());if(Math.random()<.2){e.userSessionSettings.autoModeColorScheme&&Math.random()<.45&&!e.sickbayStatus&&vr("noUserSessionUpdate","randomized");switch(m(e.userSessionSettings.autoModeRedAlert?5:3)){case 0:Br();break;case 1:Lr();break;case 2:Br(),Lr();break;default:Gr(null,"NotUpdatingServer")}}else if("home"==e.pageStatus)if(e.sickbayStatus)if(Math.random()<.15)yn();else{if("ytWindow"in document.documentElement.dataset&&Math.random()<.17)return void mt();switch(m(5)){case 1:case 2:In();break;case 3:case 4:qn();break;default:pn()}}else{"ytMenu"in document.documentElement.dataset&&"ytWindow"in document.documentElement.dataset&&at();const t=Math.random();if(t<.22)ot();else if(t<.45)mn();else if(t<.65)if(e.userSessionSettings.autoModeBufferTime)Oe();else{const e=Math.random();e<.3?ot():e<.6?mn():e<.8?at():Vr()}else t<.7?setTimeout((()=>{at()}),1300):t<.88?("ytMenu"in document.documentElement.dataset&&at(),"ytWindow"in document.documentElement.dataset?mt():e.userSessionSettings.autoModeYtVideo&&e.sounds.audioMainSwitch&&"running"==e.sounds.audioCtx.state?st():at()):Vr()}else if("ship"==e.pageStatus)if(Math.random()<.4)e.userSessionSettings.autoModeYtVideo&&"ytWindow"in document.documentElement.dataset&&Math.random()<.3?mt():Ur();else if(e.shipZoomMode){const e="|"+document.documentElement.dataset.shipZoomObj+"|";Zn.includes(e)&&Math.random()<.2?de():oe()}else{const e=Math.random();if(e<.08)ne();else if(e<.12)de();else if(e<.2)Pe();else if(e<.45)oe();else if(e<.7)xe();else{const e=Math.random();e<.33?(qe(),Re()):(e<.67||(qe(),Re()),Me()),Math.random()<.15&&Pe()}}}();const e=c(12,30);Nn=setTimeout((()=>{Yn()}),1e3*e)}function zn(){const e=si();clearTimeout(Nn),Hn=!1,document.documentElement.dataset.autoMode="standby",Vn("STANDING BY"),e.userSessionSettings.autoModeRedAlert&&e.redAlertStatus&&Gr(null,"NotUpdatingServer"),e.userSessionSettings.autoModeBufferTime&&e.bufferTimeStatus&&Oe(),Q("exitTask",.2,0,0,.4),null!==jn&&vr("noUserSessionUpdate",jn,"noLog","mute"),null!==$n&&Lr($n,"noLog","mute"),null!==Pn&&Br(Pn,"noLog","mute"),jn=null,$n=null,Pn=null,$r("UI Automation stopped • Style Config Restored","timePrefix"),$r("Auto Mode: Standing by")}const Zn="|warpCoils|starboardNacelle|engineeringHull|warpCore|engineering|navigationalDeflector|";const Jn={useLastVisitSettings:[!1,!0],autoMode:[!0,!1],autoModeColorScheme:[!0,!1],autoModeRedAlert:[!0,!1],autoModeBufferTime:[!0,!1],autoModeYtVideo:[!0,!1],shipName:["text",5,50],shipClass:["text",1,30],shipRegistry:["text",3,20],colorSchemeName:["text",1,50],bgHue:[0,360],bgLevel:[0,16],softVignette:[!0,!1],ldGlare:[!0,!1],audioEnabled:[!1,!0],audioFxLevel:[0,1],audioBgLevel:[0,1],clockType:["24hr","12hr/Am.Pm","12hr"]},Kn={useLastVisitSettings:Jn.useLastVisitSettings[0],autoMode:Jn.autoMode[0],autoModeColorScheme:Jn.autoModeColorScheme[0],autoModeRedAlert:Jn.autoModeRedAlert[0],autoModeBufferTime:Jn.autoModeBufferTime[0],autoModeYtVideo:Jn.autoModeYtVideo[0],shipName:"U.S.S. Cerritos",shipClass:"California",shipRegistry:"NCC-75567",colorSchemeName:"Ritos Yellow",bgHue:Jn.bgHue[0],bgLevel:Jn.bgLevel[0],softVignette:Jn.softVignette[0],ldGlare:Jn.ldGlare[0],audioEnabled:Jn.audioEnabled[0],audioFxLevel:.47,audioBgLevel:.3,clockType:Jn.clockType[0]};function Qn(e=null){const t=si();Object.keys(t.userSessionSettings).forEach((o=>{switch(o){case"shipName":case"shipClass":case"shipRegistry":ti(o,t.userSessionSettings[o]);break;case"colorSchemeName":Tr(t.userSessionSettings[o]);break;case"bgHue":wr(Number(t.userSessionSettings[o]));break;case"bgLevel":xr(Number(t.userSessionSettings[o]));break;case"softVignette":Lr(t.userSessionSettings[o],"noLog","mute");break;case"ldGlare":e.includes("ldGlare")||Br(t.userSessionSettings[o],"noLog","mute")}}))}function er(e,t){const o=si();switch(o.userSessionSettings[e]=t,e){case"shipName":""===t.trim()?ti(e,"U.S.S. CERRITOS"):ti(e,t);break;case"shipClass":""===t.trim()?ti(e,"CALIFORNIA"):ti(e,t);break;case"shipRegistry":""===t.trim()?ti(e,"NCC-75567"):ti(e,t);break;case"audioEnabled":if(t&&0==Z()){J(.33*Kn.audioFxLevel)}Y(t);break;case"audioFxLevel":J(t);break;case"autoMode":o.userSessionSettings.autoMode=t,o.autoMode!=t&&(o.autoMode=t,o.autoMode?_n():Xn());break;case"autoModeColorScheme":case"autoModeRedAlert":case"autoModeBufferTime":case"autoModeYtVideo":o.userSessionSettings[e]=t;break;case"usePreviousSettings":o.userSessionSettings.useLastVisitSettings=t,document.getElementById("localSettingsContent").classList.toggle("usePreviousSettings",o.userSessionSettings.useLastVisitSettings)}!0===o.userSessionSettings.useLastVisitSettings?"usePreviousSettings"==e?Object.keys(Kn).forEach((e=>{nr(e,o.userSessionSettings[e])})):nr(e,t):"usePreviousSettings"==e&&function(){try{localStorage.removeItem("ProjectRITOS")}catch(e){console.log("localStorage error"),console.log(e)}}()}function tr(e,t){const o=si();e in o.userSessionSettings!=0&&(o.userSessionSettings[e]=t,!0===o.userSessionSettings.useLastVisitSettings&&nr(e,t))}function or(){let e,t=!1;try{e=JSON.parse(localStorage.getItem("ProjectRITOS")),null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(t=!0)}catch(e){}return t?(Object.keys(e).forEach((t=>{if("string"==typeof e[t]){const o=e[t].toLowerCase();"true"!=o&&"false"!=o||(e[t]="true"===o)}})),e):(e={},e)}function nr(e,t){let o=or();o[e]=t;try{localStorage.setItem("ProjectRITOS",JSON.stringify(o))}catch(e){console.log("localStorage error"),console.log(e)}}function rr(e){if("preset"in e.target.dataset)return void function(e){let t,o,n;switch(e.toLowerCase()){case"merced":t="U.S.S. MERCED",o="CALIFORNIA",n="NCC-87075";break;case"oakland":t="U.S.S. OAKLAND",o="CALIFORNIA",n="NCC-75012";break;case"carlsbad":t="U.S.S. CARLSBAD",o="CALIFORNIA",n="NCC-73110";break;case"inglewood":t="U.S.S. INGLEWOOD",o="CALIFORNIA",n="NCC-90301";break;case"boaty":t="U.S.S. BOATY MCBOATFACE II",o="ENGLAND",n="NOC-02017";break;case"yamato":t="宇宙戦艦ヤマト",o="YAMATO",n="UNCF BBY-01";break;default:t="",o="",n=""}document.querySelector('#localSettings input[data-key="shipName"]').value=t,document.querySelector('#localSettings input[data-key="shipClass"]').value=o,document.querySelector('#localSettings input[data-key="shipRegistry"]').value=n,er("shipName",t),er("shipClass",o),er("shipRegistry",n),Q("beepX1Up",0,0,0,.25)}(e.target.dataset.preset);if(!("key"in e.target.dataset))return;let t=e.target.dataset.value;if("string"==typeof t){const e=t.toLowerCase();"true"!=e&&"false"!=e||(t="true"===e)}switch(e.target.dataset.key){case"usePreviousSettings":case"autoMode":case"audioEnabled":if(e.target.parentNode.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")})),e.target.classList.add("selected"),"boolean"!=typeof t)return;if("usePreviousSettings"==e.target.dataset.key)Q(t?"beepX2Up":"beepX1Down"),er("usePreviousSettings",t);else if("autoMode"==e.target.dataset.key)Q(t?"beepX3Up":"beepX1Down"),er("autoMode",t);else{if(t){if(0==Z()){const e=.33*Kn.audioFxLevel;J(e),sr(document.getElementById("audioFxLevel"),Math.round(100*e))}Q("shortRandomBeep",0,0,0,.6)}else Qr(e.target,"blink2");er("audioEnabled",t)}break;case"autoModeColorScheme":case"autoModeRedAlert":case"autoModeBufferTime":case"autoModeYtVideo":const o=e.target.classList.toggle("selected");Q(o?"beepX2Upper":"beepX1Downer"),er(e.target.dataset.key,o);break;case"audioFxLevel":const n=e.target.getBoundingClientRect(),r=e.clientX-n.left,i=n.width>0?Math.round(100*r/n.width):0;if(sr(e.target,i),i>0){Y(!0);const e=document.getElementById("localSettingsContent");e.querySelector('div.btn[data-key="audioEnabled"][data-value="true"]').classList.add("selected"),e.querySelector('div.btn[data-key="audioEnabled"][data-value="false"]').classList.remove("selected"),Q("beepX1Up",0,0,0,.8)}else{Y(!1);const e=document.getElementById("localSettingsContent");e.querySelector('div.btn[data-key="audioEnabled"][data-value="true"]').classList.remove("selected"),e.querySelector('div.btn[data-key="audioEnabled"][data-value="false"]').classList.add("selected")}er("audioFxLevel",.01*i)}}function ir(e){"key"in e.target.dataset&&(""==e.target.value.trim()&&(e.target.value=""),"shipName"!=e.target.dataset.key&&"shipClass"!=e.target.dataset.key&&"shipRegistry"!=e.target.dataset.key||(er(e.target.dataset.key,e.target.value),Q(p(["beepX1Up","beepX1Upper","beepX1Down","beepX1Downer","beepX1Down","beepX1Downer"]),0,0,0,.01*c(5,35))))}function sr(e,t){e.style.setProperty("--audioLevel",t+"%"),e.dataset.audioLevel=`${t}%`}function ar(){const e=document.getElementById("localSettings");clearTimeout(Number(e.dataset.timerId)),e.classList.contains("show")?(Q(p(["beepX2Downer","beepX2Down"]),.25,0,0,.35),function(){const e=document.getElementById("localSettings");e.removeEventListener("pointerdown",rr,!1),e.removeEventListener("input",ir,!1)}(),e.classList.remove("show"),e.dataset.timerId=setTimeout((()=>{e.style.display="none"}),650)):(Q(p(["beepX1Up","beepX1Upper"]),0,0,0,.5),function(){const e=document.getElementById("localSettings");e.addEventListener("pointerdown",rr,!1),e.addEventListener("input",ir,!1)}(),e.style.display="block",e.dataset.timerId=setTimeout((()=>{e.classList.add("show")}),50))}function lr(){const e=si();let t;return t=void 0!==e.serverTime?new Date(e.serverTime.getTime()+(performance.now()-e.performanceMarkerServer)):new Date,t}function cr(e,t=null,o="noRingClock"){const n=si();if(null==e)return;if(n.currentDateCache=null,"none"==n.userSessionSettings.clockType)return clearInterval(n.clockIntervalTimer),n.clockIntervalTimer=null,document.documentElement.dataset.clock="off",void(e.textContent=y(6));if(null!=n.clockIntervalTimer)return;let r,i,s,a,l,d,m,h;delete document.documentElement.dataset.clock,"hasRingClock"==o&&(r=document.getElementById("ringHour1"),i=document.getElementById("ringHour2"),s=document.getElementById("ringMinute1"),a=document.getElementById("ringMinute2"),l=document.getElementById("ringMinute3"),d=document.getElementById("ringSecond"),m=document.getElementById("ringRandom"),h=document.getElementById("ringCenter")),n.clockIntervalTimer=setInterval((()=>{const y=lr();let g=y.getHours(),f="";"24hr"!=n.userSessionSettings.clockType&&("12hr/Am.Pm"==n.userSessionSettings.clockType&&(f=g<12?"A":"P"),g%=12,0==g&&(g=12));const b=g<10?"0":"",S=y.getMinutes(),C=S<10?"0":"",A=y.getSeconds(),v=A<10?"0":"";if(e.textContent=b+g+":"+C+S+"."+v+A+f,null!==t){const e=y.toLocaleDateString();if(e!=n.currentDateCache){n.currentDateCache=e;const o={year:"numeric",month:"short",day:"numeric",weekday:"long"};let r=y.toLocaleDateString("en-US",o).replaceAll(",","").toUpperCase().split(" ");t.textContent=`${r[3]}.${r[1]}.${r[2]} • ${r[0]}`}}if("noRingClock"==o)return void(n.ringClockCenterDom=null);n.ringClockCenterDom=h,d.style.strokeDashoffset=935-(A+1)*(4084/60),s.style.strokeDashoffset=300-57.5*S,a.style.strokeDashoffset=1153-S*(3613/60),l.style.strokeDashoffset=500-S*(3544/60)-1772*S;const D=g%12+S/60;r.style.strokeDashoffset=354-D*(2495/12)+2495*S,A%15==0&&(i.classList.add("ticking"),setTimeout((()=>{i.classList.remove("ticking")}),1250)),Math.random()<.3&&(m.style.strokeDashoffset=c(-1438,1438),m.style.transitionDuration=u(.4,3)+"s",m.style.transitionTimingFunction=p(["ease","cubic-bezier(.8, 0, .2, 1)","ease-in","ease-out"])),58==A?(n.bufferTimeStatus||Q("beepX1Down",0,0,0,.2),h.style.transitionDuration="0.6s",h.style.transitionTimingFunction="ease",d3.select(h).transition().delay(200).duration(0).attr("r",5).style("transition-timing-function","ease-out").transition().delay(650).duration(0).attr("r",472).style("transition-duration","0.8s").style("opacity",.3).style("transition-timing-function","ease-out").transition().delay(850).duration(0).attr("r",p([154,c(55,175)])).style("transition-duration","0.9s").style("transition-timing-function","ease-in-out").style("opacity",null)):A<57&&A>1?Math.random()<.2&&(h.setAttribute("r",p([154,c(55,175)])),h.style.transitionDuration=null,h.style.transitionDuration=u(.3,1.7)+"s",h.style.transitionTimingFunction=p(["ease","cubic-bezier(.8, 0, .2, 1)","ease-in","ease-out"])):59==A?n.bufferTimeStatus||Q("beepX1Down",0,0,0,.3):0!=A||n.bufferTimeStatus||(0==S?(Q("lowProfileTask",0,0,0,.3),Q("exitTask",1.1,0,0,.5)):Q(p(["affirmative","negative"]),0,0,0,.3))}),1e3)}function dr(){const e=si();clearInterval(e.clockIntervalTimer),e.clockIntervalTimer=null}function ur(){const e=si();null!==e.ringClockCenterDom&&(e.ringClockCenterDom.classList.remove("blink2"),setTimeout((()=>{e.ringClockCenterDom.classList.add("blink2")}),50))}function mr(e){const t=si();let o;Qr(e,"blink1"),o="24hr"==t.userSessionSettings.clockType?"12hr/Am.Pm":"12hr/Am.Pm"==t.userSessionSettings.clockType?"12hr":"24hr",function(e){const t=si().shipFrameDom.querySelector("#shipClock");"24hr"==e?t.setAttribute("transform","translate(16 0)"):"12hr"==e?t.setAttribute("transform","translate(20 0)"):"12hr/Am.Pm"==e&&t.setAttribute("transform","translate(2 0)")}(o),tr("clockType",o),$r(`Changing to ${o} clock type`),Q("beepX2Downer",0,0,0,.25)}function yr(){if(!/iPad|iPhone|iPod/.test(navigator.platform)&&!Boolean(navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform))&&(document.fullscreenEnabled||document.webkitFullscreenEnabled)){const e=document.querySelector("#msdContainer > svg #frameHeader #btnFullscreen");e.classList.add("capable"),e.addEventListener("pointerdown",(e=>{pr(),e.stopPropagation()})),document.querySelector("#aboutIntroFullscreen > span:first-child").addEventListener("pointerdown",(e=>{pr(),e.stopPropagation()})),document.documentElement.dataset.fullscreenCapable=""}}function pr(){if(document.fullscreenElement)document.exitFullscreen().then((()=>{gr()})).catch((e=>{console.error(e)}));else if(document.webkitFullscreenElement)document.webkitExitFullscreen(),gr();else if(document.fullscreenEnabled)document.documentElement.requestFullscreen(),hr();else if(document.webkitFullscreenEnabled)document.documentElement.webkitRequestFullscreen(),hr();else{const e="Sorry. Fullscreen mode is not available on this device.";$r(e),console.log(e)}}function hr(){document.documentElement.dataset.fullscreen="on",fr(!0),Q("beepX3Upper",0,0,0,.8)}function gr(){delete document.documentElement.dataset.fullscreen,fr(!1),Q("beepX2Downer",0,0,0,.8)}function fr(e){!0===e?$r("Full screen mode is now enabled • Press <ESC> to Exit"):!1===e&&$r("Exited Full screen mode <CTRL+SHIFT+F>")}function br(){const e=si();e.serverApiConnection&&(e.clientIsReady=!0,console.log(`New client [uid=${e.serverApiData.clientUid}] has been initialized, handshaking with server...`),Cr("fetchStatus",{clientUid:e.serverApiData.clientUid},(e=>{console.log("client: server response received...",e),"object"==typeof e&&processServerEvent("responseToFetchStatus",e)})))}function Sr(){const e=si();e.serverApiData.alertStatus=e.redAlertStatus?"red":"normal",e.serverApiData.colorSchemeName=e.colorSchemeNames[e.currentColorScheme];const t=e.themeColors[e.currentColorScheme],o=/rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/.exec(t);return null!==o&&(e.serverApiData.themeColor.r=Number(o[1]),e.serverApiData.themeColor.g=Number(o[2]),e.serverApiData.themeColor.b=Number(o[3])),e.serverApiData}function Cr(e,t,o){si().serverApiConnection&&(console.log(`Preflight checked: Ready to send [${e}] event to server`,t,o),"function"==typeof window.updateServer&&window.updateServer(e,t,o))}function Ar(){const e=si();e.svg1=document.querySelector("#msdContainer > svg"),e.svg1.setAttribute("id","svg1"),e.svg2=document.querySelector("#msdContainer2 > svg"),e.svg2.setAttribute("id","svg2"),e.configContentDom=e.svg1.querySelector("#contentConfig"),e.homeFrameDom=e.svg1.querySelector("#frameHome"),e.homeContentDom=e.svg1.querySelector("#contentHome"),e.sickbayContentDom=e.svg1.querySelector("#contentSickbay"),e.shipFrameDom=e.svg1.querySelector("#frameShip"),e.shipContentDom=e.svg1.querySelector("#contentShip"),e.logDisplayDom=document.getElementById("logDisplay"),e.remoteUi||(e.logPlaceholderDom=e.homeContentDom.querySelector("#log_placeholder")),document.querySelectorAll("#frameHome, #frameShip, #contentHome, #contentShip").forEach((e=>{e.style.visibility="hidden",e.style.opacity=0})),d3.selectAll("#msdContainer svg *, #ritosRemoteContainer svg *").each((function(e,t,o){switch(o[t].getAttribute("fill")){case"#763806":o[t].setAttribute("fill","var(--primaryDarker)");break;case"#875025":o[t].setAttribute("fill","var(--primaryDark)");break;case"#D34E03":o[t].setAttribute("fill","var(--primarySat)");break;case"#DF8313":o[t].setAttribute("fill","var(--primary)");break;case"#DA9A4D":o[t].setAttribute("fill","var(--primaryBright)");break;case"#FFC996":o[t].setAttribute("fill","var(--primaryBrighter)");break;case"#FFF5EB":o[t].setAttribute("fill","var(--primaryBrightest)");break;case"#FFD300":o[t].setAttribute("fill","var(--secondary)");break;case"#FFE359":o[t].setAttribute("fill","var(--secondaryBright)");break;case"#FFEC92":o[t].setAttribute("fill","var(--secondaryBrighter)");break;case"#FFF5C7":o[t].setAttribute("fill","var(--secondaryBrightest)");break;case"#171E22":o[t].setAttribute("fill","var(--bgColor)")}switch(o[t].getAttribute("stroke")){case"#763806":o[t].setAttribute("stroke","var(--primaryDarker)");break;case"#875025":o[t].setAttribute("stroke","var(--primaryDark)");break;case"#D34E03":o[t].setAttribute("stroke","var(--primarySat)");break;case"#DF8313":o[t].setAttribute("stroke","var(--primary)");break;case"#DA9A4D":o[t].setAttribute("stroke","var(--primaryBright)");break;case"#FFC996":o[t].setAttribute("stroke","var(--primaryBrighter)");break;case"#FFF5EB":o[t].setAttribute("stroke","var(--primaryBrightest)");break;case"#FFD300":o[t].setAttribute("stroke","var(--secondary)");break;case"#FFE359":o[t].setAttribute("stroke","var(--secondaryBright)");break;case"#FFEC92":o[t].setAttribute("stroke","var(--secondaryBrighter)");break;case"#FFF5C7":o[t].setAttribute("stroke","var(--secondaryBrightest)");break;case"#171E22":o[t].setAttribute("stroke","var(--bgColor)")}})),d3.select("#homeClock").attr("fill","url(#gradientClock)"),d3.select("#shipClock").attr("fill","url(#gradientClock)");const t=e.svg1.appendChild(document.querySelector("#svgAni > defs"));e.svg2.appendChild(document.querySelector("#svgAni2 > defs"));const o=document.createElementNS("http://www.w3.org/2000/svg","clipPath");o.setAttribute("id","contentHomeClipPathDef"),t.appendChild(o),o.appendChild(e.homeContentDom.querySelector("#contentHomeClipPath")),e.homeContentDom.setAttribute("clip-path","url(#contentHomeClipPathDef)");const n=document.createElementNS("http://www.w3.org/2000/svg","clipPath");n.setAttribute("id","contentShipClipPathDef"),t.appendChild(n),n.appendChild(e.shipContentDom.querySelector("#contentShipClipPath")),e.shipContentDom.setAttribute("clip-path","url(#contentShipClipPathDef)"),e.configContentDom.querySelector("#configBtns").onpointerdown=t=>{const o=t.target.getAttribute("id");if("string"==typeof o)if(0==o.indexOf("btn0"))vr();else if(0==o.indexOf("btn1a"))wr(),tr("bgHue",e.bgHue);else if(0==o.indexOf("btn1b"))xr(),tr("bgLevel",e.bgLevel);else if(0==o.indexOf("btn2")){tr("softVignette",Lr())}else if(0==o.indexOf("btn3")){tr("ldGlare",Br())}};const r=e.configContentDom.getBBox(),i=r.x+.5*r.width,s=r.y+.5*r.height,a=e.shipFrameDom.querySelector("#logsConfig_placeholder").getBBox(),d=a.x+.5*a.width,m=a.y+.5*a.height,y=Math.min(a.width/r.width,a.height/r.height);e.configContentDom.setAttribute("transform-origin",`${i} ${s}`),e.configContentDom.dataset.shipTransform=`translate(${d-i} ${m-s}) scale(${y})`;let p=e.homeFrameDom.querySelector("#autoModeCountdownCircleHome"),g=p.getBBox(),f=g.x+.5*g.width,b=g.y+.5*g.height;p.style.transform=`translate(${f}px,${b}px) rotate(-90deg) translate(-${f}px,-${b}px)`,p=e.shipFrameDom.querySelector("#autoModeCountdownCircleShip"),g=p.getBBox(),f=g.x+.5*g.width,b=g.y+.5*g.height,p.style.transform=`translate(${f}px,${b}px) rotate(-90deg) translate(-${f}px,-${b}px)`;const S=e.homeFrameDom.querySelector("#frameTitleText"),C=S.querySelector("tspan"),A=S.getBBox();C.setAttribute("x",A.x+A.width),S.setAttribute("text-anchor","end"),C.dataset.text=C.textContent,e.homeFrameDom.querySelectorAll('[id^="homeBtn"]').forEach((e=>{e.style.opacity=0}));const v=e.homeFrameDom.querySelector("#topLeftCorner");v.dataset.fill=v.getAttribute("fill"),v.dataset.d=v.getAttribute("d");const D=e.homeFrameDom.querySelector("#homeTopBar");D.dataset.fill=D.getAttribute("fill"),D.dataset.x=D.getAttribute("x"),D.dataset.width=D.getAttribute("width"),D.setAttribute("width","1");const E=e.homeFrameDom.querySelector("#topRightBlock");E.dataset.fill=E.getAttribute("fill");const w=D.getBBox().x-E.getBBox().x;E.style.transition="none",E.style.transform=`translate(${w}px,0)`,e.homeFrameDom.querySelectorAll('[id^="tmpFrameHome1"]').forEach((e=>{e.style.visibility="hidden",e.style.opacity=0,e.dataset.x=e.getAttribute("x"),e.dataset.y=e.getAttribute("y"),e.dataset.width=e.getAttribute("width"),e.dataset.height=e.getAttribute("height")}));const x=e.homeContentDom.querySelector("#ringClock"),k=Zr(x),L=`translate(${k.x}px, ${k.y}px)`,I=`translate(-${k.x}px, -${k.y}px)`;x.style.transform=`${L} rotate(${l()*c(250,380)}deg) scale(0.7) ${I}`,x.style.setProperty("--defaultTranslatePlus",L),x.style.setProperty("--defaultTranslateMinus",I);const B=e.svg1.querySelector("#jwstImageGroup #jwstImage_placeholder").getBBox(),q=x.getBBox(),R=`${L} translate(${B.x-(q.x+.5*q.width)+105}px, ${B.y-(q.y+.5*q.height)+105}px) rotate(0deg) scale(0.25) ${I}`;x.style.setProperty("--jwstRingClockTransform",R),x.dataset.jwstRingClockTransform=R;const F=e.svg1.querySelector("#homeConfig"),M=F.getBBox(),N=e.svg1.querySelector("#homeWindow"),j=N.getBBox();N.dataset.x=j.x,N.style.opacity=0,F.dataset.x=M.x,F.dataset.y=M.y,F.style.opacity=0,it();const $=e.svg1.querySelector("#homeClock");$.dataset.currentSize="normal",$.setAttribute("transform-origin","0 0"),$.setAttribute("transform","translate(0 0) scale(1)"),hn();const P=e.shipFrameDom.querySelector("#shipMainTopLeftCorner");P.dataset.fill=P.getAttribute("fill"),P.dataset.d=P.getAttribute("d");const O=e.shipFrameDom.querySelector("#shipTopBar1a");O.dataset.fill=O.getAttribute("fill"),O.dataset.x=O.getAttribute("x"),O.dataset.width=O.getAttribute("width");const U=e.shipFrameDom.querySelector("#shipTopBar1c");U.dataset.fill=U.getAttribute("fill"),U.style=null;const H=e.shipFrameDom.querySelector("#shipFrame1a");H.dataset.x=H.getAttribute("x"),H.dataset.y=H.getAttribute("y"),H.dataset.width=H.getAttribute("width"),H.dataset.height=H.getAttribute("height");const _=e.shipFrameDom.querySelector("#shipFrame1b");_.dataset.y=_.getAttribute("y"),_.dataset.height=_.getAttribute("height"),e.shipContentDom.querySelector("#tardis").setAttribute("fill-opacity",.5),e.shipContentDom.querySelectorAll('[id^="deflectorBeamAni"]').forEach(((e,t)=>{e.style.animationDelay=.3*t+"s"})),e.shipContentDom.querySelectorAll('[id^="bussardGasAni"]').forEach(((e,t)=>{e.style.animationDuration=u(6,14).toFixed(1)+"s"})),e.remoteUi?(e.svgRemote.querySelector('[id^="buildVersion"]').setAttribute("text-anchor","end"),e.svgRemote.querySelector('[id^="buildVersion"] tspan').textContent=e.revisionDate):e.shipFrameDom.querySelector('[id^="buildVersion"] tspan').textContent=`BUILD • ${e.revisionDate}`,document.getElementById("aboutCurrentBuildVer").textContent=e.revisionDate,Zr(document.querySelector("#msdContainer svg #contentShip")),e.shipFrameDom.querySelector('#shipFrame1c [id^="btn1"]').onpointerdown=()=>{ne()},e.shipFrameDom.querySelector('#shipFrame1c [id^="btn2"]').onpointerdown=e=>{const t=e.target.getBoundingClientRect();if(0==t.width)return;const o=Math.round((e.clientX-t.left)/t.width*100);o<=37?ie("hit_engineeringHull"):o>=41&&o<=66?ie("hit_starboardNacelle"):o>=70&&ie("hit_saucerModule")},e.shipFrameDom.querySelector('#shipFrame1c [id^="btn3"]').onpointerdown=()=>{oe()},e.shipFrameDom.querySelector('#frameShipMain [id^="btnMap"]').onpointerdown=()=>{ne()},e.shipFrameDom.querySelector('#shipMsdBtns [id^="btn1"]').onpointerdown=()=>{xe()},e.shipFrameDom.querySelector('#shipMsdBtns [id^="btn2"]').onpointerdown=()=>{Pe()},e.shipContentDom.querySelectorAll("#outlines > path").forEach((e=>{e.dataset.stroke=e.getAttribute("stroke"),e.dataset.strokeWidth=e.getAttribute("stroke-width")})),ke();const X=e.svg2.querySelector("#bufferTimeGroup1");X.querySelector("#bufferTimeRings1").style.strokeDasharray="0 2595";const G=X.querySelector("#bufferTimeNumber"),V=G.getBBox();G.dataset.fullWidth=V.width;const W=Yr(G);e.bufferTimeTextOrigin=Yr(G),G.setAttribute("transform",`translate(${W.x} ${W.y}) scale(1 0.85) translate(-${W.x} -${W.y})`);const z=G.querySelector("tspan");for(let t=0;t<=60;t++)z.textContent=h(t,2),e.bufferTimeTextWidthOffset[t]=Number((.5*(V.width-G.getBBox().width)).toFixed(2));const Z=e.svg2.querySelector("#ritosTop"),J=Z.getBBox();Z.dataset.transformOriginX=(J.x+.61*J.width).toFixed(2),Z.dataset.transformOriginY=(J.y+.5*J.height).toFixed(2),Zr(Z),Z.querySelector('[id^="fieldOutline"]').removeAttribute("fill"),Z.onpointerdown=()=>{qe(),Re()};const K=e.svg2.querySelector("#ritosFront");K.querySelector("#miniWarpCore").style.display="none",K.onpointerdown=()=>{Me()};const Q=document.querySelector("#redAlertSymbol");Q.querySelector("path").setAttribute("fill","url(#gradientRedAlertSymbol)");const te=Zr(Q),re=`translate(${te.x}px, ${te.y}px)`,se=`translate(-${te.x}px, -${te.y}px)`;Q.style.setProperty("--defaultTranslatePlus",re),Q.style.setProperty("--defaultTranslateMinus",se),delete document.documentElement.dataset.huggy;const ae=e.svg2.querySelector("#huggy");ae.onpointerdown=()=>{nt(ae)},e.homeFrameDom.querySelector("#homeBtn0").onpointerdown=()=>{"transitioning"!==e.pageStatus&&ft()},document.getElementById("btnShipToHome").onpointerdown=()=>{"transitioning"!==e.pageStatus&&gt()},document.getElementById("homeBtn1").onpointerdown=()=>{"transitioning"!==e.pageStatus&&ot()},document.getElementById("homeBtn2").onpointerdown=()=>{"transitioning"!==e.pageStatus&&mn()},document.getElementById("homeBtn3").onpointerdown=()=>{"transitioning"!==e.pageStatus&&Oe()},document.getElementById("homeBtn4").onpointerdown=()=>{"transitioning"!==e.pageStatus&&Gr()},document.getElementById("homeBtn5").onpointerdown=()=>{Gn()},document.getElementById("homeBtn6").onpointerdown=()=>{Rr()},e.homeFrameDom.querySelector('text[id^="bufferTimeQuota"]').setAttribute("text-anchor","end"),e.homeFrameDom.querySelector('text[id^="autoModeStatus"]').setAttribute("text-anchor","end"),document.querySelectorAll("#aboutPage .aboutClose").forEach((e=>{e.onpointerdown=()=>{Rr()}})),document.querySelector("#aboutPage .btnSettings").onpointerdown=()=>{ar()},e.homeContentDom.querySelector('#homeConfig [id^="btnAudio"]').onpointerdown=function(){Y(),Qr(this,"blink2")},e.homeContentDom.querySelector('#homeConfig [id^="btnReset"]').onpointerdown=()=>{Er()},e.homeContentDom.querySelector("#homeConfig #homeConfigTabBtn").onpointerdown=()=>{Vr()},e.shipFrameDom.querySelector("#frameShipConfig").onpointerdown=t=>{if(!t.target.hasAttribute("id"))return;const o=t.target.getAttribute("id");0==o.indexOf("btnLogs")?Or("logs"):0==o.indexOf("btnConfigs")?Or("configs"):0==o.indexOf("btnAudio")?(Y(),Qr(t.target,"blink2")):0==o.indexOf("btnReset")?Er():0==o.indexOf("btnBuildVersion")?Rr():0==o.indexOf("btnRedAlert")?"transitioning"!==e.pageStatus&&Gr():0==o.indexOf("btnAutoMode")&&Gn()},e.homeContentDom.querySelector("#homeClock").onpointerdown=function(){mr(this)},e.shipFrameDom.querySelector("#shipClock").onpointerdown=function(){mr(this)},Te(),e.shipContentDom.querySelector("#computerCoreLeft").setAttribute("fill","url(#gradient3_rightToLeft)"),e.shipContentDom.querySelector("#computerCoreRight").setAttribute("fill","url(#gradient3_leftToRight)"),e.shipContentDom.querySelector("#wc_matter").setAttribute("fill","url(#gradient1_topToBottom)"),e.shipContentDom.querySelector("#wc_antimatter").setAttribute("fill","url(#gradient1_bottomToTop)"),e.shipContentDom.querySelector("#nacelle1").setAttribute("fill","url(#gradient1_rightToLeft)"),e.shipContentDom.querySelector("#bussard1").setAttribute("fill","url(#gradient2_rightToLeft)"),e.shipContentDom.querySelectorAll("#bussard1 path").forEach((e=>{e.setAttribute("fill","url(#gradient2_rightToLeft)")})),e.shipContentDom.querySelector("#dish").setAttribute("fill","url(#gradient2_leftToRight)"),e.shipContentDom.querySelector("#cylinderMain").setAttribute("fill","url(#gradient3_topToBottom)"),e.shipContentDom.querySelector("#impulseEngine").setAttribute("fill","url(#gradient2_rightToLeft)"),ee(),je(),function(){const e=document.querySelector("#msdContainer #subTitle");e.dataset.defaultWidth=Number(e.getBBox().width.toFixed(2));const t=document.querySelector("#msdContainer #subTitleBar");t.dataset.defaultWidth=Number(t.getBBox().width.toFixed(2))}(),T(),he(),ye(),e.svg1.querySelector("#reference16x9").remove(),e.svg2.querySelector("#reference16x9").remove();const le=e.svg1.querySelector("#frameHeader #shipName");le.dataset.defaultWidth=le.getBBox().width;const ce=e.svg1.querySelector("#frameHeader #headerCenterBar");ce.dataset.defaultWidth=ce.getBBox().width,ce.dataset.defaultX=ce.getBBox().x;const de=e.svg1.querySelector("#frameHeader #shipRegistry");de.dataset.defaultWidth=de.getBBox().width,de.dataset.defaultX=de.getBBox().x,delete e.uiInitializing,qr()}function vr(e=!0,t=null,o=null,n=null){const r=si();if(r.redAlertStatus)return Q("negative",0,0,0,.5),$r("unable to comply • red alert in progress"),null;let i;if("mute"!==n&&Q("shortRandomBeep",0,0,0,.3),"number"==typeof(s=t)&&isFinite(s)&&Math.floor(s)===s)i=t;else{let e=1;if("randomized"===t){e=c(1,r.colorSchemeNames.length-2);let t=(r.currentColorScheme+e)%(r.colorSchemeNames.length-1);r.colorSchemeRatings[t]<1&&(e=c(1,r.colorSchemeNames.length-2))}i=(r.currentColorScheme+e)%(r.colorSchemeNames.length-1)}var s;Dr(i);const a=r.colorSchemeNames[i];return"noLog"!==o&&$r(`color scheme <${a}> activated`),!0===e&&tr("colorSchemeName",a),Cr("setStatus",Sr()),a}function Dr(e=0){const t=si();"Shipyard Blueprint"==t.colorSchemeNames[e]?document.documentElement.dataset.colorScheme="blueprint":"Shipyard Blueprint II"==t.colorSchemeNames[e]?document.documentElement.dataset.colorScheme="blueprint2":document.documentElement.dataset.colorScheme=e,t.currentColorScheme=e}function Tr(e=null){const t=si().colorSchemeNames.indexOf(e);return-1!=t?(Dr(t),!0):(console.log(`Error: Requested color scheme change was not performed. [${e}] is not a valid color scheme name.`),!1)}function Er(){const e=si();Q("beepX3Up",0,0,0,.5),Q("powerUp",0,0,0,.5,1.3),document.documentElement.dataset.colorScheme=0,e.currentColorScheme=0,e.bgHue=0,e.bgLevel=0,e.bgPreBlackLevel=0,e.bgShowingBlack=!0,document.documentElement.style.setProperty("--bgColorHue",0),document.documentElement.style.setProperty("--bgColorLevel","0%"),delete document.documentElement.dataset.bgWithHue,delete document.documentElement.dataset.vignette,setTimeout((()=>{document.documentElement.dataset.vignette=""}),20),delete document.documentElement.dataset.ldGlare,setTimeout((()=>{document.documentElement.dataset.ldGlare=""}),20),e.redAlertStatus&&Gr(),$r("LCARS STYLES RESET COMPLETE","timePrefix"),tr("colorSchemeName",e.colorSchemeNames[0]),tr("bgHue",e.bgHue),tr("bgLevel",e.bgLevel),tr("softVignette",!0),tr("ldGlare",!0),Cr("setStatus",Sr())}function wr(e=null){const t=si();if(null===e){if(t.colorSchemeNames[t.currentColorScheme].toLocaleLowerCase().includes("blueprint")||t.colorSchemeNames[t.currentColorScheme].toLocaleLowerCase().includes("beige"))return $r("BG color cannot be changed with this color scheme"),void Q("negative",0,0,0,.5);Q("beepX1Up",0,0,0,.4)}else e<0&&e>360&&(e=0);let o=null===e?t.bgHue+20:e;o>360?t.bgShowingBlack?(t.bgShowingBlack=!1,o=20,t.bgHue=o,document.documentElement.dataset.bgWithHue="",t.bgLevel=t.bgPreBlackLevel,0==t.bgLevel&&(t.bgLevel=8),document.documentElement.style.setProperty("--bgColorLevel",`${t.bgLevel}%`)):(o=0,t.bgShowingBlack=!0,t.bgPreBlackLevel=t.bgLevel,t.bgLevel=0,document.documentElement.style.setProperty("--bgColorLevel","0%"),delete document.documentElement.dataset.bgWithHue):(t.bgShowingBlack=!1,t.bgHue=o,document.documentElement.dataset.bgWithHue="",0==t.bgLevel&&(t.bgLevel=8,document.documentElement.style.setProperty("--bgColorLevel",`${t.bgLevel}%`))),document.documentElement.style.setProperty("--bgColorHue",`${o}`),null===e&&$r(`Background Hue set to ${o}`)}function xr(e=null){const t=si();if(null===e){if(t.colorSchemeNames[t.currentColorScheme].toLocaleLowerCase().includes("blueprint")||t.colorSchemeNames[t.currentColorScheme].toLocaleLowerCase().includes("beige"))return $r("bg level cannot be changed with this color scheme"),void Q("negative",0,0,0,.5);Q("beepX3Up",0,0,0,.4)}t.bgLevel=null===e?(t.bgLevel+4)%20:e%20,t.bgPreBlackLevel=t.bgLevel,document.documentElement.style.setProperty("--bgColorLevel",`${t.bgLevel}%`),null===e&&$r(`Background Light Level set to ${t.bgLevel}%`)}function kr(){return"vignette"in document.documentElement.dataset}function Lr(e=null,t=null,o=null){let n;return n=!0===e||!1!==e&&!kr(),n?(document.documentElement.dataset.vignette="","noLog"!==t&&$r("soft vignette mode on"),"mute"!==o&&Q("longTaskLow",0,1.2,0,.3)):(delete document.documentElement.dataset.vignette,"noLog"!==t&&$r("soft vignette mode off"),"mute"!==o&&Q("beepX2Upper",0,0,0,.3)),n}function Ir(){return"ldGlare"in document.documentElement.dataset}function Br(e=null,t=null,o=null){let n;if(n=!0===e||!1!==e&&!Ir(),n){"mute"!==o&&Q("exitTask",0,0,0,.3);const e=document.querySelector("#glare div:first-child"),n=document.querySelector("#glare div:nth-child(2)"),r=Math.random();if(r<.33)e.style.width=null,e.style.left=null,n.style.width=null,n.style.left=null;else if(r<.67){let t=c(39,47),o=c(53,67)-t;e.style.left=`${t}%`,e.style.width=`${o}%`,t=c(69,76),o=c(82,92)-t,n.style.left=`${t}%`,n.style.width=`${o}%`}else{let t=c(39,47),o=c(53,60)-t;e.style.left=`${t}%`,e.style.width=`${o}%`,t=c(62,76),o=c(82,92)-t,n.style.left=`${t}%`,n.style.width=`${o}%`}document.documentElement.dataset.ldGlare="","noLog"!==t&&$r("Lower Decks Screen Glare mode on")}else delete document.documentElement.dataset.ldGlare,"noLog"!==t&&$r("Lower Decks Screen Glare mode off"),"mute"!==o&&Q("warningLow",0,0,0,.3);return n}function qr(){const e=si();if(e.hasOwnProperty("uiInitializing"))return;const t=document.getElementById("msdContainer").getBoundingClientRect(),o=.15,n=document.getElementById("glare"),r=document.getElementById("vignette");if(e.remoteUi){const e=document.querySelector("#svgRitosRemote #ritosRemotePage").getBoundingClientRect();n.style.width=e.width+"px",n.style.height=.6*e.height+"px",n.style.top=e.top-.04*e.height+"px",n.style.left=e.left+"px";const t=document.getElementById("msdContainer2");t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.top=e.top+"px",t.style.left=e.left+"px"}else if(t.width/t.height>16/9){n.style.width=16*t.height/9+"px";const e=1.15*t.height;n.style.height=e+"px";const i=-e*o;n.style.top=i+"px",n.style.left=.5*(t.width-16*t.height/9)+"px",r.style.width=16*t.height/9+"px",r.style.height=t.height+"px",r.style.top=0,r.style.left=.5*(t.width-16*t.height/9)+"px"}else{n.style.width="100%";const e=9*t.width/16*1.15;n.style.height=e+"px";const i=-e*o;n.style.top=.5*(t.height-9*t.width/16)+i+"px",n.style.left=0,r.style.width="100%",r.style.height=9*t.width/16+"px",r.style.top=.5*(t.height-9*t.width/16)+"px",r.style.left=0}Fr();const i=e.svg1.querySelector("#msd").getBoundingClientRect(),s=e.svg1.querySelector("#msd").getBBox(),a=Number((i.width/s.width).toFixed(3));document.documentElement.style.setProperty("--svgScale",a),ct()}function Rr(e=null){const t=document.getElementById("aboutPage");void 0!==document.documentElement.dataset.about?(t.style.opacity=0,setTimeout((()=>{delete document.documentElement.dataset.about,t.style.display="none"}),400),"mute"!==e&&Q(p(["beepX3Downer","beepX2Downer","beepX1Downer"]),0,0,0,.3)):(document.getElementById("updateLog").classList.remove("show"),document.documentElement.dataset.about="show",t.style.display=null,t.style.opacity=0,setTimeout((()=>{t.style.opacity=1}),50),t.querySelector("div").scrollTop=0,"mute"!==e&&(Q("beepX2Downer",0,0,0,.4),Q("warningLow",.15,0,0,.3)))}function Fr(){const e=si();if(null==e.logPlaceholderDom)return;const t=e.logPlaceholderDom.getBoundingClientRect();e.logDisplayDom.style.top=t.y+"px",e.logDisplayDom.style.left=t.x+"px",e.logDisplayDom.style.width=t.width+"px",e.logDisplayDom.style.height=t.height+"px";const o="ship"==e.pageState?.045:.036;e.logDisplayDom.style.fontSize=t.width*o+"px"}function Mr(){const e=si();setInterval((()=>{performance.now()-e.mostRecentLogTime<6e3||Math.random()<.5||(Math.random()<.05?$r(Pr()):(Nr(),Math.random()>.3||setTimeout((()=>{Nr()}),550)))}),5573)}function Nr(){const e=m(8);let r="",i=!1;if(0==e)r=`${y(3,5)} ${p(t)} • ${y(2,4)} ${p(o)}`;else if(1==e)r=`Task: ${p(n)} / ${y(2,7)}.${y(1,3)} ${y(2,4)}`;else if(2==e)r=`${p(["Ensign","Lt."])} ${y(4)}: ${p(n)} ${y(2,4)}`;else if(3==e)i=!0,r=`${p(o)} ${y(2,4)} - ${p(o)} ${y(2,4)}`;else if(4==e){const e=c(9,19);r=p([`Current Heading: Starbase 80 • for ${p(["crew exchange","ship-wide maintenance"])}`,"Drink H2O: Holodeck might be fake, dehydration is very real",`${p(["Apple","Blueberry","Raspberry"])} Pie Eating Contest in ${c(2,7)} days. Prize: A ${p(["brand new","slightly used"])} ${p(["Padd","T88"])}`,`Upcoming assignment: Holodeck ${c(1,4)} waste removal`,`carbon filter maintenance on deck ${c(1,13)} • section ${c(11,29)}`,`${p(["PLASMA LEAK","COOLANT LEAK","ELEVATED TEMP.","DECONTAMINATION"])} IN JEFFERIES TUBE ON DECK ${c(3,13)} JUNCTIONS ${e}-${e+3}`])}else if(5==e)r=p(["Sonic Showers Advisory: Always replicate a larger towel","When in doubt, always use a medical tricorder","Engineering Reporting: Maximum Warp Me•Who","The purpose of life is a life of purpose",`Reminder: Anomaly consolidation duty in ${c(2,12)} hours`,"Warning • Water leak on deck 11 below the Cetacean Ops",`Alert: Cosmic Koala has been spotted by ${p(["Ensign","Lt Junior"])} ${p(["Mitchell","Stark","Crichton","Targaryen"])}`]);else if(6==e){const e=c(2,7);r=p([`Turboshaft lubing required between deck ${e} & deck ${e+c(1,6)} S•${c(2,20)}`,`duty call: Post Anomaly cleanup on deck ${c(2,13)} section ${c(10,36)}`,`TRANSPORTER ROOM ${c(1,5)} ${p(["CURRENTLY IN USE","REPAIRMENT NEEDED","UNDER MAINTENANCE","HEISENBERG COMPENSATOR STATUS: UNCERTAIN"])}`,"Upper deckers rumor: Rubber Ducky room has vanished","Question of the week: Can a transporter transport a transporter?","Question from lower decks: Is holodeck Inception a thing?",`Space news: Okudagram version 2383 beta ${c(2,13)} testing underway`])}else{const e=m(5);r=0==e?p(["DILITHIUM CHAMBER CONTAINMENT LEVEL","ANTIMATTER GENERATOR EFFICIENCY","FUSION REACTOR OUTPUT","WARP COILS EFFICIENCY","PLASMA INJECTOR STATUS"])+": "+c(70,100)+"%":1==e?"TIME REMAINING ON LEVEL "+c(1,5)+" DIAGNOSTIC: ≈ "+c(0,5)+"HR "+c(2,59)+"MIN":2==e?"ANOMALY DETECTED INSIDE HOLODECK "+c(1,3)+" >> "+p(["BADGEY 2.0","SUPER KNICK KNACK","HOLO M.McMAHAN","A FUNCTIONAL TOILET","PROFESSOR MORIARTY","COWBOY DATAS","ENSIGN SESKA","SMART BARCLAY","DOCTOR CHAOTICA"]):3==e?"WARNING • "+p([`turbolift ${c(1,5)}`,`replicator A${y(2)}`])+" TEMPORARILY INOPERABLE":c(17,47)+" SUBSPACE FREQUENCIES "+p(["ESTABLISHED","DETECTED","MONITORED","LOGGED","ARE CURRENTLY OPEN"])}$r(r,i?"timePrefix":null)}function jr(){si().logPinned=!1}function $r(e=" ",t=null,o=null){const n=si();n.mostRecentLogTime=performance.now();const r="timePrefix"===t?`${S(void 0,void 0,lr())} • ${e}`:e,i=document.getElementById("logDisplay"),s=document.createElement("span");s.textContent=r.toUpperCase(),!0===o&&(n.logPinned=!0),!0!==o&&n.logPinned?i.insertBefore(s,i.firstChild.nextSibling):i.insertBefore(s,i.firstChild),n.logDisplayToConsole&&console.log(r),ur();const a=i.childElementCount;if(a>25)for(let e=0;e<a-10;e++)i.removeChild(i.lastElementChild)}function Pr(e=null){let t=e;return"map"!==t&&"sickbay"!=t&&"home"!=t&&(t=p(["map","sickbay","home"])),p("sickbay"==t?["Sickbay tip: hit the Sickbay title to load a different biobed info","Sickbay tip: hit the patient's body change target position",`Sickbay tip: ${p(["ecg","eeg"])} graph is on a 3-second cycle`,`Sickbay tip: ${p(["etco2","capnogram"])} graph is on a 6-second cycle`,"Sickbay tip: normal O2 Saturation should be above 95%","Sickbay tip: normal ph value of a human = 7.35 to 7.45","Sickbay tip: tachycardia = heart rate greater than 100","Sickbay tip: bradycardia = heart rate less than 60","Sickbay tip: hyperglycemia = blood glucose level greater than 120",`Sickbay tip: brachial bp tends to be higher than ${p(["carotid","femoral"])} bp`,"Sickbay tip: abnormal troponin t level when greater than 0.4","Sickbay tip: patient id contains patient's race info","Sickbay tip: quantum signature is unique to each universe","To override Sickbay's aqua blue color scheme, head to 'ABOUT / SETTINGS'"]:"ship"==t?["MAP tip: warp core can be ejected by hitting its ejection hatch","MAP tip: there is a toilet on deck 12","MAP tip: the Stargate holomovie is available in Holodeck 3","MAP tip: Peanut Hamper can be spotted nearby the 'Nite Forward'","MAP tip: the doctor's spacecraft is parked in the engineering hull section","MAP tip: the 'MAP' title text is clickable","MAP tip: hit the 'LCARS' button near the upper left corner to go back home","MAP tip: the tiny ship's animation lasts approximately 12 seconds",'MAP tip: the "OPS RND" button will zoom in/out of a random spot of the ship',"To change the ship's name & registry number, head to 'HOME / ABOUT / SETTINGS'"]:["tip: the group of rings is a functional clock!","tip: the cosmic koala is hiding in one of the 'JWST IMAGES'","tip: head to 'ABOUT / SETTINGS' to modify some additional user settings","tip: re-activate the red alert to alternate its effect sound clip","tip: to toggle fullscreen mode, hit the small button next to the ship's registry number","tip: hit the time clock to change its display format","tip: auto mode can be customized. head to 'ABOUT / SETTINGS'","tip: audio volume can be adjusted. head to 'ABOUT / SETTINGS'","tip: if enabled, auto mode script will start after 30 sec of page idling"])}function Or(e="logs"){const t=si(),o=p(["blink1","blink2"]);"logs"==e?(t.configContentDom.style.visibility="hidden",t.configContentDom.style.opacity=0,t.configContentDom.classList.remove("enabled"),t.shipFrameDom.querySelector("#frameShipConfig").classList.remove("configsEnabled"),t.logDisplayDom.style.visibility="visible",t.logDisplayDom.style.opacity=1,t.logDisplayDom.classList.add(o),setTimeout((()=>{t.logDisplayDom.classList.remove(o)}),600),Q("beepX1Down",0,0,0,.5)):(t.logDisplayDom.style.visibility="hidden",t.logDisplayDom.style.opacity=0,t.configContentDom.style.visibility="visible",t.configContentDom.style.opacity=1,t.configContentDom.classList.add("enabled"),t.shipFrameDom.querySelector("#frameShipConfig").classList.add("configsEnabled"),t.configContentDom.classList.add(o),setTimeout((()=>{t.configContentDom.classList.remove(o)}),600),Q("beepX2Up",0,0,0,.4))}function Ur(){"visible"==si().logDisplayDom.style.visibility?Or("configs"):Or("logs")}function Hr(){const e=si();e.bubbleTextTimer=setInterval((()=>{e.homeContentDom.querySelectorAll('[id^="bubbleText1"]').forEach((t=>{Math.random()<.3&&t.setAttribute("stroke-dashoffset",c(-450,450)),Math.random()<.3&&t.setAttribute("stroke-dasharray",`${c(20,250)} ${c(20,120)} ${c(20,250)} ${c(20,120)} ${c(20,250)} ${c(20,120)}`),Math.random()<.3&&t.setAttribute("stroke",`var(--${p(e.allColorCssVarNames)})`),t.style.transitionDelay=c(-300,900)+"ms",Math.random()<.2?t.classList.add("blink2"):t.classList.remove("blink2"),t.style.opacity=u(.3,1)}))}),1700)}function _r(){const e=si();clearInterval(e.bubbleTextTimer),e.bubbleTextTimer=null}function Xr(){const e=si();$r("• A l e r t •"),e.redAlertTimer2=setTimeout((()=>{$r("• • A  l  e  r  t • •"),e.redAlertTimer2=setTimeout((()=>{$r("• • • T h i s  i s    R  e  d     A  l  e  r  t • • •")}),1500)}),1200)}function Gr(e,t="updatingServer"){const o=si();if(o.redAlertStatus=!o.redAlertStatus,o.redAlertStatus?(document.documentElement.dataset.redAlert="",Q("startRedAlert"),o.remoteUi?(o.svgRemote.querySelector("#btnAlertStatus").classList.add("redAlertBlink"),o.svgRemote.querySelector("#frame").classList.add("redAlertBlink"),o.svgRemote.querySelector("#grids").classList.add("redAlertBlink")):(o.svg1.getElementById("frameHeader").classList.add("redAlertBlink"),o.homeFrameDom.querySelector("#homeBtn4 > path").classList.add("redAlertBlink"),o.homeContentDom.querySelector("#homeClock").classList.add("redAlertBlink"),o.homeContentDom.querySelector("#homeDate").classList.add("redAlertBlink"),o.shipFrameDom.querySelectorAll("#subTitleBar, #subTitle, #shipFrame1d, #shipFrame1e, #shipClock, #btnRedAlert").forEach((e=>{e.classList.add("redAlertBlink")}))),o.svg2.getElementById("raBar").classList.add("redAlertBlink"),o.svg2.getElementById("raText").classList.add("redAlertBlink"),$r("W a r n i n g","timePrefix"),o.redAlertTimer2=setTimeout((()=>{Xr()}),1e3),o.redAlertTimer=setInterval((()=>{Xr()}),8e3)):(delete document.documentElement.dataset.redAlert,Q("stopRedAlert"),o.remoteUi?(o.svgRemote.querySelector("#btnAlertStatus").classList.remove("redAlertBlink"),o.svgRemote.querySelector("#frame").classList.remove("redAlertBlink"),o.svgRemote.querySelector("#grids").classList.remove("redAlertBlink")):(o.svg1.getElementById("frameHeader").classList.remove("redAlertBlink"),o.homeFrameDom.querySelector("#homeBtn4 > path").classList.remove("redAlertBlink"),o.homeContentDom.querySelector("#homeClock").classList.remove("redAlertBlink"),o.homeContentDom.querySelector("#homeDate").classList.remove("redAlertBlink"),o.shipFrameDom.querySelectorAll("#subTitleBar, #subTitle, #shipFrame1d, #shipFrame1e, #shipClock, #btnRedAlert").forEach((e=>{e.classList.remove("redAlertBlink")}))),o.svg2.getElementById("raBar").classList.remove("redAlertBlink"),o.svg2.getElementById("raText").classList.remove("redAlertBlink"),clearInterval(o.redAlertTimer),clearTimeout(o.redAlertTimer2),o.redAlertTimer=null,o.redAlertTimer2=null,$r("Alert Status: Normal","timePrefix")),o.serverApiConnection&&"updatingServer"==t)try{Cr("setStatus",Sr())}catch(e){}}function Vr(e=null){const t=si(),o=t.svg1.querySelector("#homeConfig"),n=o.querySelector("#homeConfigTabBtn").getBBox(),r=o.getBBox(),i=t.svg1.querySelector("#homeWindow"),s=i.getBBox();let a;if("normal"==e&&(a="normal"),a="minimized"==e?"minimized":"homeConfigMinimized"in document.documentElement.dataset?"normal":"minimized",d3.selectAll([i,o]).interrupt(),"minimized"==a){Q("longTaskLow",0,0,0,.3),document.documentElement.dataset.homeConfigMinimized="init",t.configContentDom.classList.add("minimizedHide");const e=s.height-(n.y-s.y)-n.height;d3.select(i).transition().duration(400).ease(d3.easeBackIn).attr("transform",`translate(${s.width} 0)`),d3.select(o).transition().delay(100).duration(900).ease(d3.easeBackOut.overshoot(1.1)).attr("transform",`translate(${r.width-n.width} 0)`).transition().delay(200).duration(900).ease(d3.easeCubicInOut).attr("transform",`translate(${r.width-n.width} ${e})`).on("end",(()=>{document.documentElement.dataset.homeConfigMinimized=""}))}else Q("shortRandomBeep",0,0,0,.3),Q("warningLow",.65,0,0,.5),Q("beepX2Up",1.3,0,0,.3),document.documentElement.dataset.homeConfigMinimized="exit",d3.select(o).transition().duration(600).ease(d3.easeBackOut.overshoot(1.3)).attr("transform","translate(0 55)").transition().duration(600).ease(d3.easeCubicOut).attr("transform","translate(0 0)").on("end",(()=>{t.configContentDom.classList.remove("minimizedHide")})),i.style.opacity<0&&(i.style.opacity=0),d3.select(i).transition().duration(300).ease(d3.easeCubicOut).attr("transform","translate(0 0)").transition().delay(300).duration(0).on("end",(()=>{delete document.documentElement.dataset.homeConfigMinimized}))}function Wr(e=null){const t=si(),o=t.svg1.querySelector("#homeClock"),n=t.svg1.querySelector("#homeDate");let r;"normal"==e&&(r="normal"),r="minimized"==e||"normal"==o.dataset.currentSize?"minimized":"normal","minimized"==r?(o.dataset.currentSize="minimized",n.style.visibility="hidden",d3.select(o).transition().delay(1e3).duration(1e3).ease(d3.easeCubicOut).attr("transform","translate(675 1830) scale(0.7) translate(-675 -1815)").transition().delay(350).duration(800).ease(d3.easeCubicOut).attr("transform","translate(682 1955) scale(0.6) translate(-675 -1815)").on("end interrupt cancel",(()=>{n.style.visibility="hidden",o.dataset.currentSize="minimized"}))):(o.dataset.currentSize="normal",d3.select(o).transition().delay(1200).duration(1100).ease(d3.easeCubicInOut).attr("transform","translate(0 0) scale(1)").on("end interrupt cancel",(()=>{n.style.visibility="visible",o.dataset.currentSize="normal"})))}function Yr(e){const t=e.getBBox();return{x:t.x+.5*t.width,y:t.y+.5*t.height}}function zr(e,t=null){let o;o=null!==t?t.getBBox():e.getBBox(),e.setAttribute("transform-origin",`${o.x+.5*o.width} ${o.y+.5*o.height}`)}function Zr(e,t=null){let o;o=null!==t?t.getBBox():e.getBBox();const n=o.x+.5*o.width,r=o.y+.5*o.height;return e.dataset.transformOriginX=n,e.dataset.transformOriginY=r,{x:n,y:r}}function Jr(e){return{x:Number(e.dataset.transformOriginX),y:Number(e.dataset.transformOriginY)}}function Kr(e){e.classList.remove("blink1","blink2","blink3")}function Qr(e,t="random"){if(null==e)return void console.log("cannot blink - null node");"random"==t&&(t=p(["blink1","blink2","blink3"])),Kr(e),setTimeout((()=>{e.classList.add(t),setTimeout((()=>{Kr(e)}),700)}),50)}function ei(){const e=Math.random();return e<.15?d3.easeBackInOut.overshoot(u(.5,3)):e<.3?d3.easeElasticInOut.amplitude(u(.9,1.5)).period(u(.2,.4)):e<.45?d3.easeBounceInOut:e<.6?d3.easeCubicIn:e<.75?d3.easeCubicOut:e<.9?d3.easeCubicInOut:d3.easeLinear}function ti(e=null,t=null){if("string"!=typeof e||"string"!=typeof t)return;if("shipName"!==e&&"shipClass"!==e&&"shipRegistry"!==e)return;const o=(r=t,"text"==Jn[n=e][0]&&"string"==typeof r?r.length>=Jn[n][1]&&r.length<=Jn[n][2]||`error: ${n} text can only have ${Jn[n][1]} to ${Jn[n][2]} characters`:`error: ${n} does not have a valid value`);var n,r;if(!0!==o)return void console.log(o);const i=si(),s=i.svg1.querySelector("#frameHeader"),a=s.querySelector("#shipName"),l=s.querySelector("#shipRegistry"),c=s.querySelector("#headerCenterBar");if(i.userSessionSettings[e]=t,"shipName"===e){let e=i.userSessionSettings.shipClass.length>0?`${t}  /  ${i.userSessionSettings.shipClass} CLASS`:t;a.querySelector("tspan").textContent=e.toUpperCase()}else if("shipClass"===e){let e=t.length>0?`${i.userSessionSettings.shipName}  /  ${t} CLASS`:`${i.userSessionSettings.shipName}`;a.querySelector("tspan").textContent=e.toUpperCase()}else l.querySelector("tspan").textContent=t.toUpperCase();setTimeout((()=>{const t=a.getBBox().width,o=l.getBBox().width;"shipRegistry"===e&&l.setAttribute("transform",`translate(${parseFloat(l.dataset.defaultWidth)-o} 0)`),c.setAttribute("x",parseFloat(c.dataset.defaultX)+(t-parseFloat(a.dataset.defaultWidth))),c.setAttribute("width",parseFloat(c.dataset.defaultWidth)-(t-parseFloat(a.dataset.defaultWidth))+(parseFloat(l.dataset.defaultWidth)-o))}),100)}function oi(e="MASTER SYSTEM DISPLAY"){const t=document.querySelector("#msdContainer #subTitle");t.querySelector("tspan").textContent=e;const o=Number(t.getBBox().width.toFixed(2)),n=parseFloat(t.dataset.defaultWidth)-o;t.setAttribute("transform",`translate(${n} 0)`),d3.select(t).attr("opacity",0).attr("fill","var(--secondary)").transition().duration(800).attr("opacity",1).transition().delay(100).duration(0).on("end",(function(){Qr(this,"blink2"),this.setAttribute("fill","var(--primaryBright)")}));const r=document.querySelector("#msdContainer #subTitleBar");d3.select("#msdContainer svg #subTitleBar").transition().ease(d3.easeCubicOut).duration(600).attr("width",parseFloat(r.dataset.defaultWidth)+n)}window.processServerEvent=function(e,t={}){const o=si();if(!o.serverApiConnection)return;if(!o.clientIsReady)return void console.log("App is initializing. This client is not yet ready to process server event.");if("string"!=typeof e)return void console.log("error: server event name is not a valid type");console.log(`Processing server event [${e}] with data:`),console.log(t);const n=e.toLowerCase();if(n=="updateState".toLowerCase()||n=="responseToFetchStatus".toLowerCase()){if("object"!=typeof t)return void console.log("error: event data not found");if("colorSchemeName"in t){Tr(t.colorSchemeName)&&tr("colorSchemeName",t.colorSchemeName)}"alertStatus"in t&&("red"==t.alertStatus.toLowerCase()?o.redAlertStatus?console.log("Already in Red Alert. Alert status not changed."):(Gr(null,"NotUpdatingServer"),console.log("Switching to Red Alert")):"normal"==t.alertStatus.toLowerCase()?o.redAlertStatus?(Gr(null,"NotUpdatingServer"),console.log("Switching Off Red Alert")):console.log("Already in normal status. Alert status not changed."):console.log("requested alert status is currently not available")),"shipName"in t&&ti("shipName",t.shipName),"shipClass"in t&&ti("shipClass",t.shipClass),"shipRegistry"in t&&ti("shipRegistry",t.shipRegistry)}else if(n=="updateSensorData".toLowerCase()){if("object"!=typeof t)return;let e=null,o=null,n=null;Object.keys(t).forEach((r=>{"temperature"==r.toLowerCase()&&(e=Number(t[r])),"humidity"==r.toLowerCase()&&(o=Number(t[r])),"pressure"==r.toLowerCase()&&(n=Number(t[r]))}));let r="";"number"==typeof o&&(r=`Humidity: ${o.toFixed(1)}%`,"number"==typeof n&&(r+=",  ")),"number"==typeof n&&(r+=`Pressure: ${n.toFixed(1)} hPa`),r.length>0&&$r(r),"number"==typeof e&&$r(`Current temperature is ${e.toFixed(1)}°C`,"timePrefix")}else if(n=="remoteLogMsg".toLowerCase()){if("object"!=typeof t)return;let e="",o=!1,n=!1;Object.keys(t).forEach((r=>{switch(r.toLowerCase()){case"message":e=String(t[r]);break;case"showTimePrefix".toLowerCase():o=Boolean(t[r]);break;case"playSound".toLowerCase():n=Boolean(t[r])}})),e.trim().length>0&&($r(e,o?"timePrefix":null),n&&Q(p(["affirmative","awaiting"]),0,0,0,.6))}};var ni;function ri(e){(e.ctrlKey||e.metaKey)&&e.shiftKey&&"KeyF"===e.code?pr():e.ctrlKey||e.metaKey||e.shiftKey||"KeyM"!==e.code||Y()}ni=new URL("images/"+a("gC69E").resolve("8PZrU"),import.meta.url).toString();const ii={appInitAssetPreloaded:!1,userSessionSettings:function(){const e=or();let t={...Kn};return"useLastVisitSettings"in e==!1||!0!==e.useLastVisitSettings||(Object.keys(Jn).forEach((o=>{const n=Jn[o];if(o in e){const r=e[o];2==n.length&&"number"==typeof n[0]&&"number"==typeof n[1]?r>=n[0]&&r<=n[1]&&(t[o]=r):3==n.length&&"text"===n[0]&&"number"==typeof n[1]&&"number"==typeof n[2]?r.length>=n[1]&&r.length<=n[2]&&(t[o]=r):n.includes(r)&&(t[o]=r)}})),t.audioEnabled&&t.audioFxLevel<=0&&(t.audioEnabled=!1,t.audioFxLevel=Kn.audioFxLevel)),t}(),primaryColorCssVarNames:["primary","primarySat","primaryDark","primaryDarker","primaryBright","primaryBrighter","primaryBrightest"],secondaryColorCssVarNames:["secondary","secondaryBright","secondaryBrighter","secondaryBrightest"],allColorCssVarNames:[],nonDarkColorCssVarNames:["primary","primarySat","primaryBright","primaryBrighter","primaryBrightest","secondary","secondaryBright","secondaryBrighter","secondaryBrightest"],colorSchemeNames:["Ritos Yellow","Sickbay Aqua","Picard Gray","Nemesis Cyan","Padd Blue","Titan PurpleHead","Vancouver Orange","Merced Green","Oakland Glory","Inglewood Violet","Carlsbad Nature","Prodigy Blast","Ketracel White","Disco Beige","Shipyard Blueprint","Shipyard Blueprint II","Red Alert"],themeColors:["rgb(255, 211, 0)","rgb(19, 183, 255)","rgb(255, 59, 5)","rgb(22, 155, 179)","rgb(255, 211, 0)","rgb(201, 191, 255)","rgb(252, 80, 11)","rgb(0, 242, 0)","rgb(36, 22, 255)","rgb(252, 34, 255)","rgb(201, 255, 114)","rgb(245, 138, 255)","rgb(222, 222, 222)","rgb(241, 220, 167)","rgb(0, 32, 127)","rgb(0, 32, 127)","rgb(255, 0, 0)"],colorSchemeRatings:[5,4,5,5,4,3,4,3,0,0,0,0,5,0,0,5,0],currentColorScheme:0,bgHue:0,bgLevel:0,bgPreBlackLevel:0,bgShowingBlack:!0,sickbayStatus:!1,jwstStatus:!1,jwstImg:null,sounds:null,videoBox:null,svgWidth:null,svgHeight:null,svg1:null,svg2:null,svgRemote:null,uiInitializing:!0,pageState:"init",pageStatus:"init",pageTimers:[],configContentDom:null,homeFrameDom:null,homeContentDom:null,sickbayContentDom:null,shipFrameDom:null,shipContentDom:null,ringClockCenterDom:null,shipRef:{shipD3:null,zoomInBoundaryBBox:null,zoomInBoundaryCX:null,zoomInBoundaryCY:null,ttA:null,ttB:null,specialZoomInBoundaryBBox:null,specialZoomInBoundaryCX:null,specialZoomInBoundaryCY:null,specialZoomIn_ttA:null,specialZoomIn_ttB:null},shipLabelsVisible:!1,shipLabelsHotArea:[],shipLabelGotHit:!1,shipZoomMode:!1,shipHitareaZoomToBBox:{},logDisplayDom:null,logPlaceholderDom:null,logPinned:!1,logDisplayToConsole:!1,bubbleTextTimer:null,redAlertStatus:!1,redAlertTimer:null,redAlertTimer2:null,bufferTimeStatus:!1,bufferTimeCountdown:60,bufferTimeTimer:null,bufferTimeTextOrigin:null,bufferTimeTextWidthOffset:[],ritosTopFieldTimer:null,ritosFrontShieldTimer:null,mostRecentLogTime:0,rubberDuckyPositions:[],ani:{},autoMode:!0,pageVisible:!0,remoteUi:!1,remoteUiSvgReady:null,currentDateCache:null,clockIntervalTimer:null,serverTime:void 0,isSafari:!1,revisionDate:document.getElementById("revisionDate").textContent,buildNumber:20230112.2,buildFile:"./static/build_info.json",buildCheckLastTime:0,clientIsReady:!1,serverApiData:null,serverApiConnection:!0,debugMode:!1};if(ii.serverApiData={projectRITOS:`${ii.buildNumber}`,clientUid:y(7),alertStatus:"normal",colorSchemeName:"Ritos Yellow",themeColor:{r:0,g:0,b:0}},ii.autoMode=ii.userSessionSettings.autoMode,ii.allColorCssVarNames=ii.primaryColorCssVarNames.concat(ii.secondaryColorCssVarNames),ii.isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&window.safari.pushNotification).toString(),ii.isSafari&&(document.documentElement.dataset.safari=""),ii.serverApiConnection){window.location.search.toLocaleLowerCase().indexOf("remote")>0&&(ii.remoteUi=!0,ii.remoteUiSvgReady=!1)}function si(){return ii}document.body.style.backgroundColor="#000",function(){const e=si(),t=document.getElementById("localSettingsContent");let o;o=e.userSessionSettings.useLastVisitSettings?"true":"false",t.querySelector(`div.btn[data-key="usePreviousSettings"][data-value="${o}"]`).classList.add("selected"),o=e.userSessionSettings.autoMode?"true":"false",t.querySelector(`div.btn[data-key="autoMode"][data-value="${o}"]`).classList.add("selected"),e.userSessionSettings.autoModeColorScheme&&t.querySelector('div.btn[data-key="autoModeColorScheme"]').classList.add("selected"),e.userSessionSettings.autoModeRedAlert&&t.querySelector('div.btn[data-key="autoModeRedAlert"]').classList.add("selected"),e.userSessionSettings.autoModeBufferTime&&t.querySelector('div.btn[data-key="autoModeBufferTime"]').classList.add("selected"),e.userSessionSettings.autoModeYtVideo&&t.querySelector('div.btn[data-key="autoModeYtVideo"]').classList.add("selected"),o=e.userSessionSettings.audioEnabled?"true":"false",t.querySelector(`div.btn[data-key="audioEnabled"][data-value="${o}"]`).classList.add("selected");const n=t.querySelector("#audioFxLevel"),r=Math.round(100*e.userSessionSettings.audioFxLevel);n.style.setProperty("--audioLevel",r+"%"),n.dataset.audioLevel=`${r}%`,t.querySelector('input[data-key="shipName"]').value=e.userSessionSettings.shipName.toUpperCase()==Kn.shipName.toUpperCase()?"":e.userSessionSettings.shipName,t.querySelector('input[data-key="shipClass"]').value=e.userSessionSettings.shipClass.toUpperCase()==Kn.shipClass.toUpperCase()?"":e.userSessionSettings.shipClass,t.querySelector('input[data-key="shipRegistry"]').value=e.userSessionSettings.shipRegistry.toUpperCase()==Kn.shipRegistry.toUpperCase()?"":e.userSessionSettings.shipRegistry,t.classList.toggle("usePreviousSettings",e.userSessionSettings.useLastVisitSettings)}(),ii.setPageState=e=>{"home"!=e&&"ship"!=e&&"remote"!=e||(ii.pageState=e,document.documentElement.dataset.pageState=e)},ii.setDocumentCurrentPage=e=>{"home"!=e&&"ship"!=e&&"remote"!=e||(document.documentElement.dataset.currentPage=e)};const ai=async function(e=!1){const t=432e5;if(!e&&performance.now()-ii.buildCheckLastTime<t)return;ii.buildCheckLastTime=performance.now();const o=ii.buildFile+"?r2="+Math.random();let n,r={};try{const e=await fetch(o);r=await e.json()}catch(e){return void(ii.buildCheckLastTime-=3456e4)}try{if(n=parseInt(localStorage.getItem("cerritos_tmpReloadCounter")),isNaN(n)||n<0?n=0:n++,localStorage.setItem("cerritos_tmpReloadCounter",n),n>0)return void localStorage.removeItem("cerritos_tmpReloadCounter")}catch(e){return}if(r.buildNumber>ii.buildNumber)location.reload();else try{localStorage.removeItem("cerritos_tmpReloadCounter")}catch(e){return}};setInterval((()=>{ai()}),108e5),ai(!0),document.addEventListener("visibilitychange",(function(){document.hidden||ai()}),!1),function(){try{let e=parseFloat(localStorage.getItem("projectRitos_lastVisitVersion"));if(localStorage.setItem("projectRitos_lastVisitVersion",ii.buildNumber),isNaN(e))return;Math.floor(ii.buildNumber)-Math.floor(e)>=1&&document.getElementById("revisionDate").classList.add("highlight")}catch(e){return}}();const li=g((e=>{qr()}),60);function ci(e){return new Promise((t=>setTimeout(t,e)))}window.addEventListener("resize",(function(){li()}));function di(){ii.svg1.onpointerdown=e=>{"ship"!==ii.pageState||!ii.shipLabelsVisible||ii.shipZoomMode||ii.shipLabelGotHit||Le(Number(e.clientX.toFixed(0)),Number(e.clientY.toFixed(0)))}}const ui=async function(){ii.debugMode&&(console.log("%c !!! debugMode is on {obj exposed} !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ","color:#ff9999; background:#440000"),window.CRapp=ii),!0===ii.demo&&console.log("%c *** demo mode is on ***","color:#cc44ff; background:#110022"),ii.serverApiConnection&&console.log("%c >>>>>>> WebSocket API Connection is permitted <<<<<<< ","color:#ff9900; background:#442200"),$r("System Initiating . . .","timePrefix"),await async function(){if(!0===ii.demo)return void(ii.serverTime=void 0);const e=ii.buildFile+"?r1="+Math.random();try{ii.performanceMarkerServer=performance.now();const t=await fetch(e,{method:"HEAD"});ii.performanceMarkerServer=(ii.performanceMarkerServer+performance.now())/2;const o=t.headers.get("date").split("GMT");ii.serverTime=new Date(o[0]+"GMT"),"invalid date"==ii.serverTime.toString().toLowerCase()&&(ii.serverTime=void 0,ii.performanceMarkerServer=void 0)}catch(e){return ii.serverTime=void 0,void(ii.performanceMarkerServer=void 0)}}(),await async function(){let e=document.documentElement;if(e.classList.contains("wf-active"))return!0;let t=5e3;e.classList.contains("wf-inactive")&&(t=3e3);for(let o=0;o<t/200&&(await ci(200),!e.classList.contains("wf-active"));o++);}(),ii.svgWidth=Number(document.querySelector("#msdContainer > svg").getAttribute("width")),ii.svgHeight=Number(document.querySelector("#msdContainer > svg").getAttribute("height")),ii.getPointerLocationOnSvg=(e,t)=>{const o=ii.svgWidth/ii.svgHeight,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight;let i,s,a,l,c;return n/r>o?(i=r/ii.svgHeight,s=ii.svgWidth*i,a=r,l=.5*(n-s),c=0):(i=n/ii.svgWidth,s=n,a=ii.svgHeight*i,l=0,c=.5*(r-a)),{x:Number(((e-l)/i).toFixed(1)),y:Number(((t-c)/i).toFixed(1))}},Ar(),Qn("ldGlare"),yr(),document.addEventListener("keydown",ri,!1),document.querySelector("#updateLog > h1").onpointerdown=function(){document.querySelector("#updateLog").classList.toggle("show"),Qr(this),Q("shortRandomBeep",0,0,0,.25)}},mi=function(){document.querySelector("#aboutIntroLine").classList.add("active"),setTimeout((()=>{"show"!==document.documentElement.dataset.about&&(Rr("mute"),setTimeout((()=>{document.body.style.backgroundColor=null,document.querySelector("#aboutPage #aboutIntro").remove(),document.querySelector("#aboutPage .aboutContent").style.display=null,ii.stopStartUpAudioContextListener(),ii.resumeAudioContext=null,ii.stopStartUpAudioContextListener=null,delete ii.resumeAudioContext,delete ii.stopStartUpAudioContextListener}),200)),document.querySelector("#msdContainer > svg #frameHeader").style.opacity=0,setTimeout((()=>{document.querySelector("#msdContainer").style.opacity=1,$r("BUILD VERSION "+ii.revisionDate),ii.userSessionSettings.ldGlare&&Br(!0,"noLog","mute"),setTimeout((()=>{Q("powerUp"),document.querySelector("#msdContainer > svg #frameHeader").style.opacity=1}),500)}),600),setTimeout((()=>{ii.remoteUi?(bt(),$r("Loading LD REMOTE LCARS . . .","timePrefix")):(ht(),$r("Loading LD LCARS . . .","timePrefix"))}),1800),Mr(),br()}),3e3),ii.remoteUi||setTimeout((()=>{di(),ii.autoMode&&_n("noLog")}),6e3)};!function(){const e=si();e.jwstImg={fileRef:[a("2SJGw"),a("9yuim"),a("goIwB"),a("kJ65z"),a("5QuxL"),a("cMAtB"),a("1FKaC"),a("jDFZu"),a("7c70B"),a("cxwFI"),a("9i5D7")],description:["NGC 3324 in Carina Nebula / credits: NASA•JWST•STScI","Southern Ring Nebula / credits: NASA•JWST•STScI","The Pillars of Creation • Eagle Nebula / credits: NASA•JWST•STScI","galaxy cluster SMACS 0723 / credits: NASA•JWST•STScI","Stephan’s Quintet / credits: NASA•JWST•STScI","Tarantula Nebula / credits: NASA•JWST•STScI","Cartwheel Galaxy / credits: NASA•JWST•STScI","galaxy pair VV 191 / credits: NASA•Hubble•JWST•STScI","The Pillars of Creation • MIRI Image / credits: NASA•JWST•STScI","L1527 & Protostar • NIRCam Image / credits: NASA•JWST•STScI","Dwarf Galaxy WLM • NIRCam Image / credits: NASA•JWST•STScI"],starRotation:[0,0,0,0,30,0,0,0,0,0,0],filePreloaded:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],preloadedIndexes:[],currentIndex:null,nextIndex:null,huggyIndex:5,soundTimer:null},e.jwstImg.nextIndex=m(e.jwstImg.fileRef.length),Je(e.jwstImg.nextIndex),e.jwstImg.nextImageReady=()=>Ze(e.jwstImg.nextIndex)}(),function(){const e=si();e.sounds={audioCtx:new AudioContext,sfxMasterGainNode:null,sbgMasterGainNode:null,assetReady:!1,bgTimerId:null,soundFilesLoaded:0,clips:{},soundTrackBg:null,soundTrackFx:null,audioMainSwitch:e.userSessionSettings.audioEnabled,tempSettingsAudioSwitch:null,soundTrackBgMute:!1,soundTrackFxMute:!1,soundTrackBgVolume:.3,soundTrackFxVolume:e.userSessionSettings.audioFxLevel,redAlertTrackNode:null,redAlertTrackNames:[],redAlertTrackNameCurrentIndex:null},e.resumeAudioContext=()=>{"running"!=e.sounds.audioCtx.state&&(e.sounds.audioCtx.resume(),e.sounds.audioMainSwitch&&z())},document.body.addEventListener("pointerdown",e.resumeAudioContext,!1),document.querySelector("#aboutPage").addEventListener("pointerdown",e.resumeAudioContext,!1),e.stopStartUpAudioContextListener=()=>{document.body.removeEventListener("pointerdown",e.resumeAudioContext,!1),document.querySelector("#aboutPage").removeEventListener("pointerdown",e.resumeAudioContext,!1)},e.sounds.audioCtx.onstatechange=()=>{"running"==e.sounds.audioCtx.state&&e.userSessionSettings.audioEnabled&&1==e.sounds.masterGainNode.gain.value&&z()};const t={};let o=0;async function n(t){return await async function(t){const o=await fetch(t),n=await o.arrayBuffer();return await e.sounds.audioCtx.decodeAudioData(n)}(t)}t.c804=new URL(I),t.c805=new URL(B),t.c806=new URL(q),t.c807=new URL(R),t.c811=new URL(F),t.c812=new URL(M),t.c813=new URL(N),t.c815=new URL(j),t.c816=new URL($),t.c817a=new URL(P),t.c817b=new URL(O),t.c824=new URL(U),t.c826=new URL(H),t.c829=new URL(_),t.p001=new URL(X),t.p002=new URL(G),t.alert01=new URL(V),t.alert02=new URL(W),e.sounds.redAlertTrackNames.push("alert01"),e.sounds.redAlertTrackNames.push("alert02"),e.sounds.redAlertTrackNameCurrentIndex=m(e.sounds.redAlertTrackNames.length);for(const r in t)n(t[r].href).then((n=>{o++,e.sounds.assetReady=o==Object.keys(t).length,e.sounds.clips[r]=n}));e.sounds.masterGainNode=e.sounds.audioCtx.createGain(),e.sounds.masterGainNode.connect(e.sounds.audioCtx.destination),e.sounds.masterGainNode.gain.value=e.sounds.audioMainSwitch?1:0,e.sounds.sfxMasterGainNode=e.sounds.audioCtx.createGain(),e.sounds.sfxMasterGainNode.connect(e.sounds.masterGainNode),e.sounds.sfxMasterGainNode.gain.value=e.sounds.soundTrackFxVolume;const r=document.getElementById("aboutIntroAudio");r.style.opacity=1,r.querySelector("span:first-child").addEventListener("pointerdown",(e=>{Y(),e.stopPropagation()}))}(),ii.remoteUi&&function(){const e=si(),t=new URL(ni);fetch(t).then((e=>e.text())).then((t=>{document.getElementById("msdContainer").insertAdjacentHTML("beforeend",t);const o=document.querySelector("#msdContainer > :last-child");o.setAttribute("id","svgRitosRemote"),o.querySelector("#refBgBox").remove(),document.documentElement.dataset.ritosRemote="",e.remoteUiSvgReady=!0,e.svgRemote=o,e.logPlaceholderDom=o.querySelector("#ritosRemoteLogBoxRef"),o.querySelector("#btnAlertStatus").onpointerdown=function(){Gr();this.querySelector('[id^="txtBig"] tspan:nth-child(2)').textContent=e.redAlertStatus?"RED":"NORMAL"},o.querySelector("#btnColorScheme").onpointerdown=function(){const e=vr();if(null==e)return;const t=e.toUpperCase().split(" ");this.querySelector('[id^="txtBig"] tspan:nth-child(1)').textContent=t.shift(),this.querySelector('[id^="txtBig"] tspan:nth-child(2)').textContent=t.join(" ")},o.querySelector("#btnAudio").onpointerdown=function(e){Y(),Qr(e.target,"blink2")};const n=o.querySelector("#btnMiniShip"),r=o.querySelector("#miniShip"),i=document.querySelector("#msdContainer2 > svg #ritosTop"),s=document.querySelector("#msdContainer2 > svg #ritosFront");i.style.display="none",s.style.display="none",n.dataset.view="side",o.querySelector("#btnMiniShip").onpointerdown=function(e){Q("shortRandomBeep",0,0,0,.4),"side"==e.target.dataset.view?(n.dataset.view="top",r.style.display="none",i.style.display=null):"top"==e.target.dataset.view?(n.dataset.view="front",i.style.display="none",s.style.display=null):(n.dataset.view="side",s.style.display="none",r.style.display=null)}}))}();let yi=setInterval((function(){ii.appInitAssetPreloaded=ii.jwstImg.nextImageReady()&&ii.sounds.assetReady&&!1!==ii.remoteUiSvgReady,"complete"===document.readyState&&ii.appInitAssetPreloaded&&(clearInterval(yi),delete ii.appInitAssetPreloaded,ui().then((()=>{mi()})))}),!0===ii.demo?3e3:800);